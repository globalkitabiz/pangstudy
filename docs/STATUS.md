# Project Status — Pangstudy

**Last updated:** 2025-12-21

## 한줄 요약
- 현재 프로젝트는 기본 기능(로그인/회원가입, 덱/카드 관리, SM-2 기반 복습, 배포) 동작 중입니다. CSV 일괄 가져오기 기능이 추가되었습니다.

## 최신 배포
- URL: https://ae39d317.pangstudy.pages.dev
- 배포 일시: 2025-12-15

## 현재 상태(주요 항목)
- 코드베이스: `main` 브랜치 최신 상태(원격과 동기화됨).
- 로컬 변경: 빌드 산출물이 로컬에 존재했고 안전하게 스태시(`auto-stash-before-build-2025-12-15`)로 보관됨.
- 빌드: 클라이언트 `npm run build` 성공(경고 존재). SPA 빌드 결과를 Pages에 배포 완료.
- 인증: JWT 토큰 만료는 서버에서 발급 시 7일로 설정됨(`functions/api/auth/login.js`).

## 보안·품질 관련
- `npm audit` 결과: 다수의 취약점(높음/치명적 포함) 보고됨 — 시급하게 종속성 점검 필요.
- 빌드 환경 이슈: Node 25 환경에서 OpenSSL 호환성으로 인해 빌드 실패가 있었고, 임시로 `NODE_OPTIONS=--openssl-legacy-provider`를 사용하여 빌드함. 권장: Node LTS(18.x 또는 20.x)로 전환.
- ESLint 경고: `StudySession.js`의 접근성(emoji) 관련 경고 존재(해결 권장).

## 완료된 주요 작업
1. 로그인/회원가입 리다이렉션 수정(자동 이동 `/decks`) — 완료
2. JWT_SECRET 값 강화 및 `wrangler.toml` 환경 적용 — 완료
3. 카드 편집 API 추가 — 완료
4. Reviews 테이블 마이그레이션(SM-2 필드 추가) — 완료
5. 클라이언트 빌드 및 Cloudflare Pages 배포 — 완료(2025-12-15)
6. **CSV 일괄 가져오기 기능 추가** — 완료(2025-12-21)
   - DeckDetail 페이지에 "CSV 가져오기" 버튼 추가
   - CSV 파일 업로드 또는 직접 입력 지원
   - 형식: `앞면,뒷면` (한 줄에 하나씩)
   - 백엔드 bulk create API 연동 (`/api/cards/bulk`)

## 기능 현황

### 완료된 기능
| 기능 | 상태 | 설명 |
|------|------|------|
| 회원가입/로그인 | 완료 | JWT 기반 인증 |
| 덱 관리 (CRUD) | 완료 | 생성, 수정, 삭제, 검색, 정렬 |
| 카드 관리 (CRUD) | 완료 | 개별 추가, 수정, 삭제 |
| CSV 일괄 가져오기 | 완료 | 파일 업로드 또는 직접 입력 |
| SM-2 학습 시스템 | 완료 | 간격 반복 알고리즘 |
| 덱 공유 | 완료 | 공유 링크 생성 및 가져오기 |
| 키보드 단축키 | 완료 | Space(뒤집기), 1-4(난이도) |
| 다크 모드 | 부분 완료 | DeckList만 적용 |

### 미완료 기능
| 기능 | 상태 | 비고 |
|------|------|------|
| Anki .apkg 가져오기 | 코드 존재 | `anki-reader` 패키지 미설치 |
| 이미지 첨부 | 미구현 | |
| 다크 모드 전체 적용 | 진행 중 | DeckDetail, StudySession 등 |

## 현재 진행 중/우선 순위 작업
1. (높음) 의존성 취약점 정리 및 호환성 검토 (`npm audit fix` 및 버전 업그레이드)
2. (중) Node 버전 정리: LTS로 전환 및 CI/CD 빌드 환경 조정
3. (중) 코드 품질 개선: ESLint 경고 수정 및 접근성 개선
4. (중) 스태시된 로컬 변경 검토 후 필요시 병합 또는 커밋
5. (낮) 다크 모드 전체 컴포넌트 적용

## CSV 가져오기 사용법

### 형식
```csv
apple,사과
banana,바나나
happiness,행복
```

또는 헤더 포함:
```csv
front,back
apple,사과
banana,바나나
```

### 엑셀에서 만드는 법
1. A열에 앞면(영어), B열에 뒷면(한국어) 입력
2. 파일 → 다른 이름으로 저장 → CSV UTF-8 (쉼표로 분리) 선택
3. 저장된 .csv 파일을 DeckDetail 페이지에서 업로드

## 당장 해야 할 일 (권장 우선순위)
1. 새 기능 배포: `git add . && git commit && git push`
2. 의존성 자동 수리 시도
   - `cd client`
   - `npm audit fix` (비파괴적 수정)
3. 장기: 패키지 업그레이드(React/라이브러리) 및 테스트 추가

## 담당자 제안 / 다음 단계
- 제가 대신 아래 작업을 실행해 드릴 수 있습니다:
  1. 변경사항 커밋 및 배포
  2. `npm audit fix` 실행 후 결과 검토
  3. `StudySession.js` 접근성 경고 수정
  4. 다크 모드 전체 컴포넌트 적용
  5. Anki .apkg 가져오기 기능 완성 (`anki-reader` 설치)
