# Pangstudy 프론트엔드 설명서

## 1. 개요

**프로젝트:** React 기반 플래시카드 학습 시스템
**React 버전:** 16.14.0
**라우터:** React Router v5.2.0
**빌드 도구:** Create React App

---

## 2. 화면 구성 (라우팅)

| 경로 | 컴포넌트 | 설명 |
|------|----------|------|
| `/login` | Login | 로그인 페이지 |
| `/register` | Register | 회원가입 페이지 |
| `/decks` | DeckList | 덱 목록 (메인 대시보드) |
| `/decks/:deckId` | DeckDetail | 덱 상세 및 카드 관리 |
| `/study/:deckId` | StudySession | 학습 세션 |
| `/study/assigned` | StudySession | 할당된 카드 학습 |
| `/recommendations` | Recommendations | 추천 덱 목록 |
| `/admin` | ManageUsers | 관리자 페이지 |

---

## 3. 전체 레이아웃 구조

```
+----------------------------------------------------------+
|                       Header                              |
|  [Decks] [Recommendations] [Assigned] [Admin] [Logout]   |
+----------------------------------------------------------+
|                                                          |
|                     Main Content                          |
|                    (라우트별 화면)                         |
|                                                          |
+----------------------------------------------------------+
```

---

## 4. 화면별 상세 설명

### 4.1 로그인 페이지 (`/login`)

```
+----------------------------------+
|          플래시카드 학습           |
+----------------------------------+
|                                  |
|   [이메일 입력]                   |
|   [비밀번호 입력]                  |
|                                  |
|   [로그인 버튼]                   |
|                                  |
|   계정이 없으신가요? 회원가입       |
+----------------------------------+
```

**기능:**
- 이메일/비밀번호 로그인
- 로그인 성공 시 `/decks`로 이동
- 회원가입 링크

---

### 4.2 덱 목록 페이지 (`/decks`)

```
+----------------------------------------------------------+
|                      학습 통계                             |
|  [총 덱: N] [총 카드: N] [오늘 복습: N] [예정 카드: N]      |
|  +--------------------------------------------------+    |
|  |              주간 학습 차트 (Line)                 |    |
|  +--------------------------------------------------+    |
+----------------------------------------------------------+
|                                                          |
|  [검색창]                    [정렬: 날짜/이름/카드수]       |
|                                                          |
|  +------------------+  +------------------+               |
|  | 덱 이름           |  | 덱 이름           |              |
|  | 카드: 25장        |  | 카드: 10장        |              |
|  | [학습] [삭제]     |  | [학습] [삭제]     |              |
|  +------------------+  +------------------+               |
|                                                          |
|  [+ 새 덱 만들기]                                         |
|  [공유 덱 가져오기]                                        |
|  [Anki 덱 가져오기]                                        |
+----------------------------------------------------------+
```

**기능:**
- 학습 통계 표시 (Statistics 컴포넌트)
- 주간 학습 차트 (ProgressChart)
- 덱 검색 및 정렬
- 새 덱 생성
- 공유 토큰으로 덱 가져오기
- Anki .apkg 파일 가져오기

---

### 4.3 덱 상세 페이지 (`/decks/:deckId`)

```
+----------------------------------------------------------+
|  [< 뒤로]                                                 |
+----------------------------------------------------------+
|                                                          |
|  덱 이름: [편집 가능]                                      |
|  설명: [편집 가능]                                         |
|                                                          |
|  [저장] [학습 시작] [공유하기]                              |
+----------------------------------------------------------+
|                                                          |
|  카드 추가:                                               |
|  +--------------------------------------------------+    |
|  | [앞면 입력]                                       |    |
|  | [뒷면 입력]                                       |    |
|  | [카드 추가]                                       |    |
|  +--------------------------------------------------+    |
|                                                          |
|  또는 [CSV로 대량 가져오기]                                |
|  +--------------------------------------------------+    |
|  | front,back                                        |    |
|  | 단어,뜻                                           |    |
|  | ...                                               |    |
|  +--------------------------------------------------+    |
|  [CSV 가져오기]                                          |
+----------------------------------------------------------+
|                                                          |
|  카드 목록 (총 N장):                                       |
|  +--------------------------------------------------+    |
|  | 앞면: Hello        뒷면: 안녕하세요    [수정] [삭제] |    |
|  +--------------------------------------------------+    |
|  | 앞면: World        뒷면: 세계         [수정] [삭제] |    |
|  +--------------------------------------------------+    |
+----------------------------------------------------------+
```

**기능:**
- 덱 정보 편집 (이름, 설명)
- 개별 카드 추가
- CSV 대량 가져오기
- 카드 수정/삭제
- 덱 공유 (토큰 생성)

---

### 4.4 학습 세션 페이지 (`/study/:deckId`)

```
+----------------------------------------------------------+
|  진행률: [████████░░░░░░░░░░░░] 8/20                      |
+----------------------------------------------------------+
|                                                          |
|  +--------------------------------------------------+    |
|  |                                                  |    |
|  |                                                  |    |
|  |              Question                            |    |
|  |              (앞면 내용)                          |    |
|  |                                                  |    |
|  |                                                  |    |
|  +--------------------------------------------------+    |
|                                                          |
|  [스페이스바를 눌러 답 확인]                               |
+----------------------------------------------------------+

--- 답 확인 후 ---

+----------------------------------------------------------+
|  진행률: [████████░░░░░░░░░░░░] 8/20                      |
+----------------------------------------------------------+
|                                                          |
|  +--------------------------------------------------+    |
|  |              Question                            |    |
|  |              (앞면 내용)                          |    |
|  +--------------------------------------------------+    |
|  |              Answer                              |    |
|  |              (뒷면 내용)                          |    |
|  +--------------------------------------------------+    |
|                                                          |
|  [1-Again] [2-Hard] [3-Good] [4-Easy]                    |
+----------------------------------------------------------+

--- 학습 완료 ---

+----------------------------------------------------------+
|                                                          |
|              학습 완료!                                    |
|                                                          |
|              복습한 카드: 20장                             |
|              정답률: 85%                                  |
|                                                          |
|              [덱 목록으로]                                 |
+----------------------------------------------------------+
```

**기능:**
- 간격 반복 학습 (Spaced Repetition)
- 카드 뒤집기 (스페이스바)
- 난이도 평가 (1-4 키보드 단축키)
  - Again (0): 다시 보기
  - Hard (1): 어려움
  - Good (2): 보통
  - Easy (3): 쉬움
- 진행률 표시
- 세션 완료 통계

---

### 4.5 추천 페이지 (`/recommendations`)

```
+----------------------------------------------------------+
|  추천 덱                                                  |
+----------------------------------------------------------+
|                                                          |
|  [ ] 내 덱만 보기                                         |
|                                                          |
|  +--------------------------------------------------+    |
|  | 추천 덱 1                                         |    |
|  | 추천 점수: 95%                                    |    |
|  | [학습 시작]                                       |    |
|  +--------------------------------------------------+    |
|  | 추천 덱 2                                         |    |
|  | 추천 점수: 87%                                    |    |
|  | [학습 시작]                                       |    |
|  +--------------------------------------------------+    |
+----------------------------------------------------------+
```

**기능:**
- ML 기반 덱 추천
- 필터링 (내 덱만)
- A/B 테스트 추적

---

### 4.6 관리자 페이지 (`/admin`)

```
+----------------------------------------------------------+
|  사용자 관리                          [+ 사용자 추가]      |
+----------------------------------------------------------+
|                                                          |
|  +--------------------------------------------------+    |
|  | 사용자명        이메일              [할당]         |    |
|  +--------------------------------------------------+    |
|  | 홍길동          hong@email.com     [할당]         |    |
|  | 김철수          kim@email.com      [할당]         |    |
|  +--------------------------------------------------+    |
|                                                          |
+----------------------------------------------------------+
|                      관리자 리포트                         |
|  +--------------------------------------------------+    |
|  |              (AdminReport 컴포넌트)               |    |
|  +--------------------------------------------------+    |
+----------------------------------------------------------+

--- 할당 모달 ---

+----------------------------------+
|  카드/덱 할당                     |
+----------------------------------+
|                                  |
|  덱 선택: [드롭다운]              |
|  카드 선택: [드롭다운] (선택사항)  |
|  마감일: [날짜 선택]              |
|  반복 간격: [입력]                |
|  메모: [텍스트 입력]              |
|                                  |
|  [취소] [할당하기]                |
+----------------------------------+
```

**기능:**
- 사용자 목록 조회
- 새 사용자 추가
- 덱/카드 할당 (AssignModal)
- 관리자 리포트 표시

---

## 5. 컴포넌트 구조

```
App
├── Layout (헤더 + 네비게이션)
│   ├── ThemeProvider (테마 컨텍스트)
│   └── Routes
│       ├── Login
│       ├── Register
│       ├── DeckList
│       │   ├── Statistics
│       │   │   └── ProgressChart
│       │   └── Deck Cards
│       ├── DeckDetail
│       │   ├── Card Form
│       │   └── Card List
│       ├── StudySession
│       │   ├── Progress Bar
│       │   └── Card Flipper
│       ├── Recommendations
│       └── ManageUsers
│           ├── AddUserForm
│           └── AssignModal
```

---

## 6. 상태 관리

### 6.1 Context API

**ThemeContext**
- 라이트/다크 테마 전환
- localStorage에 설정 저장

**AuthContext** (정의됨, 부분 사용)
- 사용자 인증 상태
- 로그인/로그아웃 함수

### 6.2 로컬 스토리지

| 키 | 용도 |
|----|------|
| `authToken` | JWT 인증 토큰 |
| `user` | 사용자 정보 (JSON) |
| `theme` | 테마 설정 ("light" / "dark") |
| `ab_variant` | A/B 테스트 그룹 |

---

## 7. API 연동

### 7.1 API 모듈 (`client/src/utils/api.js`)

| 모듈 | 주요 함수 |
|------|----------|
| `authAPI` | login, register, logout, getUser |
| `deckAPI` | getAll, get, create, delete, update |
| `cardAPI` | create, getByDeck, delete, update, bulkCreate |
| `studyAPI` | getDueCards, getAssignedDue, submitReview |
| `shareAPI` | shareDeck, getSharedDeck, importSharedDeck |
| `ankiAPI` | importDeck |
| `recommendationsAPI` | getRecommendations |

### 7.2 API 호출 흐름

```
컴포넌트 → apiRequest() → fetch() → 백엔드
                ↓
          Authorization 헤더 추가
          (Bearer {token})
```

---

## 8. 테마 시스템

### 8.1 라이트 테마
- 배경: #ffffff
- 텍스트: #212529
- 주요 색상: #007bff (파랑)

### 8.2 다크 테마
- 배경: #1a1a1a
- 텍스트: #e9ecef
- 조정된 대비 색상

### 8.3 테마 전환
- ThemeToggle 컴포넌트
- 헤더에 위치
- 클릭 시 즉시 전환

---

## 9. 키보드 단축키

### 학습 세션 (`/study/:deckId`)

| 키 | 동작 |
|----|------|
| `Space` | 카드 뒤집기 (답 확인) |
| `1` | Again (다시 보기) |
| `2` | Hard (어려움) |
| `3` | Good (보통) |
| `4` | Easy (쉬움) |

---

## 10. 주요 의존성

| 패키지 | 버전 | 용도 |
|--------|------|------|
| react | 16.14.0 | UI 프레임워크 |
| react-router-dom | 5.2.0 | 라우팅 |
| @material-ui/core | 3.7.0 | Material UI 컴포넌트 |
| bootstrap | 4.3.1 | CSS 프레임워크 |
| react-bootstrap | 1.0.0-beta.10 | Bootstrap 래퍼 |
| chart.js | 2.9.4 | 차트 라이브러리 |
| react-chartjs-2 | 2.11.2 | Chart.js React 래퍼 |

---

## 11. 빌드 및 실행

```bash
# 개발 서버 실행
cd client
npm start
# 또는
yarn start

# 프로덕션 빌드
npm run build
# 또는
yarn build
```

---

## 12. 파일 구조

```
client/src/
├── index.js              # 엔트리 포인트
├── App.js                # 루트 컴포넌트 + 라우팅
├── AppNav.js             # 네비게이션 (레거시 호환)
├── components/
│   ├── Auth/
│   │   ├── Login.js      # 로그인
│   │   └── Register.js   # 회원가입
│   ├── DeckList.js       # 덱 목록
│   ├── DeckDetail.js     # 덱 상세
│   ├── StudySession.js   # 학습 세션
│   ├── Statistics.js     # 학습 통계
│   ├── ProgressChart.js  # 주간 차트
│   ├── Recommendations.js# 추천 덱
│   ├── ManageUsers.js    # 사용자 관리
│   ├── AssignModal.js    # 할당 모달
│   ├── AdminReport.js    # 관리자 리포트
│   ├── Layout.js         # 레이아웃
│   ├── ThemeToggle.js    # 테마 전환
│   ├── LoadingSpinner.js # 로딩 표시
│   └── ErrorHandler.js   # 에러 처리
├── contexts/
│   ├── ThemeContext.js   # 테마 컨텍스트
│   └── AuthContext.js    # 인증 컨텍스트
├── utils/
│   ├── api.js            # API 유틸리티
│   ├── analytics.js      # 분석 추적
│   └── abTest.js         # A/B 테스트
└── styles/
    └── themes.js         # 테마 정의
```
