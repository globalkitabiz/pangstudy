# Pangstudy 다국어 지원 계획서

## 1. 개요

Pangstudy를 한국어, 영어, 인도네시아어 3개 언어로 지원하는 다국어(i18n) 시스템 구현

### 지원 언어
| 코드 | 언어 | 기본값 |
|------|------|--------|
| ko | 한국어 | O (기본) |
| en | English | |
| id | Bahasa Indonesia | |

## 2. 기술 스택

### 추천: react-i18next
- React 생태계에서 가장 널리 사용
- 동적 언어 전환 지원
- 네임스페이스로 번역 파일 분리 가능
- localStorage에 언어 설정 저장

```bash
npm install react-i18next i18next i18next-browser-languagedetector
```

## 3. 프로젝트 구조

```
client/src/
├── i18n/
│   ├── index.js          # i18n 설정
│   └── locales/
│       ├── ko/
│       │   ├── common.json    # 공통 UI
│       │   ├── auth.json      # 로그인/회원가입
│       │   ├── deck.json      # 덱 관련
│       │   ├── study.json     # 학습 관련
│       │   └── admin.json     # 관리자
│       ├── en/
│       │   ├── common.json
│       │   ├── auth.json
│       │   ├── deck.json
│       │   ├── study.json
│       │   └── admin.json
│       └── id/
│           ├── common.json
│           ├── auth.json
│           ├── deck.json
│           ├── study.json
│           └── admin.json
```

## 4. 번역 파일 예시

### common.json (공통)

**ko/common.json**
```json
{
  "appName": "Pangstudy",
  "nav": {
    "decks": "덱",
    "recommendations": "추천",
    "assigned": "할당됨",
    "admin": "관리자",
    "logout": "로그아웃",
    "login": "로그인"
  },
  "button": {
    "save": "저장",
    "cancel": "취소",
    "delete": "삭제",
    "edit": "수정",
    "create": "생성",
    "import": "가져오기",
    "export": "내보내기"
  },
  "message": {
    "loading": "로딩 중...",
    "error": "오류가 발생했습니다",
    "success": "성공",
    "confirm": "확인하시겠습니까?"
  },
  "language": {
    "select": "언어 선택",
    "ko": "한국어",
    "en": "English",
    "id": "Bahasa Indonesia"
  }
}
```

**en/common.json**
```json
{
  "appName": "Pangstudy",
  "nav": {
    "decks": "Decks",
    "recommendations": "Recommendations",
    "assigned": "Assigned",
    "admin": "Admin",
    "logout": "Logout",
    "login": "Login"
  },
  "button": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete",
    "edit": "Edit",
    "create": "Create",
    "import": "Import",
    "export": "Export"
  },
  "message": {
    "loading": "Loading...",
    "error": "An error occurred",
    "success": "Success",
    "confirm": "Are you sure?"
  },
  "language": {
    "select": "Select Language",
    "ko": "한국어",
    "en": "English",
    "id": "Bahasa Indonesia"
  }
}
```

**id/common.json**
```json
{
  "appName": "Pangstudy",
  "nav": {
    "decks": "Dek",
    "recommendations": "Rekomendasi",
    "assigned": "Ditugaskan",
    "admin": "Admin",
    "logout": "Keluar",
    "login": "Masuk"
  },
  "button": {
    "save": "Simpan",
    "cancel": "Batal",
    "delete": "Hapus",
    "edit": "Edit",
    "create": "Buat",
    "import": "Impor",
    "export": "Ekspor"
  },
  "message": {
    "loading": "Memuat...",
    "error": "Terjadi kesalahan",
    "success": "Berhasil",
    "confirm": "Apakah Anda yakin?"
  },
  "language": {
    "select": "Pilih Bahasa",
    "ko": "한국어",
    "en": "English",
    "id": "Bahasa Indonesia"
  }
}
```

### auth.json (인증)

**ko/auth.json**
```json
{
  "login": {
    "title": "로그인",
    "email": "이메일",
    "password": "비밀번호",
    "submit": "로그인",
    "noAccount": "계정이 없으신가요?",
    "register": "회원가입",
    "error": {
      "invalid": "이메일 또는 비밀번호가 올바르지 않습니다",
      "required": "모든 필드를 입력해주세요"
    }
  },
  "register": {
    "title": "회원가입",
    "name": "이름",
    "email": "이메일",
    "password": "비밀번호",
    "confirmPassword": "비밀번호 확인",
    "submit": "가입하기",
    "hasAccount": "이미 계정이 있으신가요?",
    "login": "로그인",
    "error": {
      "passwordMismatch": "비밀번호가 일치하지 않습니다",
      "emailExists": "이미 사용 중인 이메일입니다"
    }
  }
}
```

### deck.json (덱)

**ko/deck.json**
```json
{
  "list": {
    "title": "내 덱",
    "empty": "덱이 없습니다. 새 덱을 만들거나 공유된 덱을 가져와보세요!",
    "cardCount": "{{count}}장",
    "dueCount": "오늘 복습: {{count}}장"
  },
  "create": {
    "title": "새 덱 만들기",
    "name": "덱 이름",
    "description": "설명 (선택)",
    "submit": "만들기"
  },
  "import": {
    "title": "Anki 덱 가져오기",
    "description": "Anki 파일(.apkg)을 업로드하여 덱을 가져올 수 있습니다.",
    "howTo": "Anki 덱 구하는 방법:",
    "step1": "AnkiWeb 공유 덱 사이트에서 원하는 덱 검색",
    "step2": ".apkg 파일 다운로드",
    "step3": "아래에서 파일 업로드",
    "openAnkiWeb": "AnkiWeb 공유 덱 사이트 열기",
    "selectFile": "파일 선택",
    "noFile": "선택된 파일 없음",
    "fileType": ".apkg 파일만 지원됩니다.",
    "importing": "가져오는 중...",
    "submit": "가져오기"
  },
  "detail": {
    "cards": "카드 목록",
    "addCard": "카드 추가",
    "study": "학습 시작",
    "share": "공유",
    "delete": "덱 삭제",
    "confirmDelete": "정말 이 덱을 삭제하시겠습니까?"
  },
  "card": {
    "front": "앞면",
    "back": "뒷면",
    "add": "카드 추가",
    "edit": "카드 수정",
    "delete": "카드 삭제"
  }
}
```

### study.json (학습)

**ko/study.json**
```json
{
  "session": {
    "showAnswer": "정답 보기",
    "rateTitle": "얼마나 기억나셨나요?",
    "again": "다시",
    "hard": "어려움",
    "good": "보통",
    "easy": "쉬움",
    "complete": "학습 완료!",
    "cardsStudied": "{{count}}장의 카드를 학습했습니다",
    "backToDecks": "덱 목록으로",
    "continueStudy": "계속 학습"
  },
  "progress": {
    "remaining": "남은 카드: {{count}}",
    "new": "새 카드",
    "learning": "학습 중",
    "review": "복습"
  },
  "assigned": {
    "title": "할당된 학습",
    "empty": "할당된 학습이 없습니다",
    "dueDate": "마감일: {{date}}",
    "start": "학습 시작"
  }
}
```

### admin.json (관리자)

**ko/admin.json**
```json
{
  "nav": {
    "dashboard": "대시보드",
    "users": "사용자 관리",
    "decks": "덱 관리",
    "assign": "학습 할당",
    "stats": "통계",
    "backToSite": "사이트로 돌아가기"
  },
  "dashboard": {
    "title": "대시보드",
    "totalUsers": "전체 사용자",
    "totalDecks": "전체 덱",
    "totalCards": "전체 카드",
    "totalReviews": "전체 복습",
    "todayReviews": "오늘 복습"
  },
  "users": {
    "title": "사용자 관리",
    "name": "이름",
    "email": "이메일",
    "isAdmin": "관리자",
    "actions": "작업",
    "delete": "삭제",
    "makeAdmin": "관리자 지정",
    "removeAdmin": "관리자 해제"
  },
  "decks": {
    "title": "덱 관리",
    "name": "덱 이름",
    "owner": "소유자",
    "cardCount": "카드 수",
    "createdAt": "생성일",
    "delete": "삭제"
  },
  "assign": {
    "title": "학습 할당",
    "selectUser": "사용자 선택",
    "selectDeck": "덱 선택",
    "dueDate": "마감일",
    "submit": "할당하기",
    "current": "현재 할당 목록"
  },
  "stats": {
    "title": "통계",
    "user": "사용자",
    "deckCount": "덱 수",
    "cardCount": "카드 수",
    "totalReviews": "총 복습",
    "todayReviews": "오늘 복습",
    "lastActivity": "마지막 활동"
  }
}
```

## 5. 구현 코드

### i18n/index.js

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// 번역 파일 import
import koCommon from './locales/ko/common.json';
import koAuth from './locales/ko/auth.json';
import koDeck from './locales/ko/deck.json';
import koStudy from './locales/ko/study.json';
import koAdmin from './locales/ko/admin.json';

import enCommon from './locales/en/common.json';
import enAuth from './locales/en/auth.json';
import enDeck from './locales/en/deck.json';
import enStudy from './locales/en/study.json';
import enAdmin from './locales/en/admin.json';

import idCommon from './locales/id/common.json';
import idAuth from './locales/id/auth.json';
import idDeck from './locales/id/deck.json';
import idStudy from './locales/id/study.json';
import idAdmin from './locales/id/admin.json';

const resources = {
  ko: {
    common: koCommon,
    auth: koAuth,
    deck: koDeck,
    study: koStudy,
    admin: koAdmin
  },
  en: {
    common: enCommon,
    auth: enAuth,
    deck: enDeck,
    study: enStudy,
    admin: enAdmin
  },
  id: {
    common: idCommon,
    auth: idAuth,
    deck: idDeck,
    study: idStudy,
    admin: idAdmin
  }
};

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'ko',
    defaultNS: 'common',
    interpolation: {
      escapeValue: false
    },
    detection: {
      order: ['localStorage', 'navigator'],
      caches: ['localStorage']
    }
  });

export default i18n;
```

### 컴포넌트에서 사용

```javascript
import { useTranslation } from 'react-i18next';

function DeckList() {
  const { t } = useTranslation(['deck', 'common']);

  return (
    <div>
      <h1>{t('deck:list.title')}</h1>
      <button>{t('common:button.create')}</button>
      <p>{t('deck:list.cardCount', { count: 10 })}</p>
    </div>
  );
}
```

### 언어 선택 컴포넌트

```javascript
import { useTranslation } from 'react-i18next';

function LanguageSelector() {
  const { t, i18n } = useTranslation();

  const languages = [
    { code: 'ko', name: t('language.ko') },
    { code: 'en', name: t('language.en') },
    { code: 'id', name: t('language.id') }
  ];

  return (
    <select
      value={i18n.language}
      onChange={(e) => i18n.changeLanguage(e.target.value)}
    >
      {languages.map(lang => (
        <option key={lang.code} value={lang.code}>
          {lang.name}
        </option>
      ))}
    </select>
  );
}
```

## 6. 구현 순서

### Phase 1: 기본 설정 (1단계)
1. react-i18next 패키지 설치
2. i18n 설정 파일 생성
3. App.js에 i18n Provider 추가
4. 언어 선택 컴포넌트 추가 (헤더에)

### Phase 2: 번역 파일 생성 (2단계)
1. 한국어(ko) 번역 파일 완성 (현재 텍스트 기준)
2. 영어(en) 번역 파일 작성
3. 인도네시아어(id) 번역 파일 작성

### Phase 3: 컴포넌트 적용 (3단계)
1. Layout.js (네비게이션)
2. Auth 컴포넌트 (Login, Register)
3. DeckList.js
4. DeckDetail.js
5. StudySession.js
6. Admin 컴포넌트들

### Phase 4: 테스트 및 마무리 (4단계)
1. 각 언어별 UI 테스트
2. 누락된 번역 확인
3. 배포

## 7. 번역 필요 파일 목록

| 파일 | 번역 항목 수 (예상) |
|------|-------------------|
| Layout.js | 10개 |
| Login.js | 15개 |
| Register.js | 15개 |
| DeckList.js | 30개 |
| DeckDetail.js | 20개 |
| StudySession.js | 25개 |
| AdminLayout.js | 10개 |
| AdminDashboard.js | 15개 |
| AdminUsers.js | 15개 |
| AdminDecks.js | 15개 |
| AdminAssign.js | 15개 |
| AdminStats.js | 15개 |
| **총계** | **약 200개** |

## 8. 주의사항

1. **동적 텍스트**: 변수가 포함된 텍스트는 interpolation 사용
   ```javascript
   t('cardCount', { count: 10 }) // "10장"
   ```

2. **복수형 처리**: 언어별 복수형 규칙 적용
   ```json
   {
     "card": "{{count}} card",
     "card_plural": "{{count}} cards"
   }
   ```

3. **날짜/시간 포맷**: 언어별 날짜 형식 고려
   - 한국어: 2024년 12월 25일
   - 영어: December 25, 2024
   - 인도네시아어: 25 Desember 2024

4. **RTL 지원**: 현재 3개 언어 모두 LTR이므로 불필요

## 9. 예상 작업량

- Phase 1: 2시간
- Phase 2: 4시간 (번역 작업)
- Phase 3: 6시간 (컴포넌트 수정)
- Phase 4: 2시간

**총 예상: 14시간**

## 10. 새 언어 추가 방법

나중에 다른 언어를 추가하려면 아래 단계를 따르세요.

### Step 1: 번역 파일 생성

```bash
# 새 언어 폴더 생성 (예: 일본어 ja)
mkdir client/src/i18n/locales/ja
```

기존 언어 폴더(예: `ko/`)의 파일을 복사하여 번역:
- `common.json`
- `auth.json`
- `deck.json`
- `study.json`
- `admin.json`

### Step 2: i18n 설정에 추가

`client/src/i18n/index.js` 파일 수정:

```javascript
// 1. import 추가
import jaCommon from './locales/ja/common.json';
import jaAuth from './locales/ja/auth.json';
import jaDeck from './locales/ja/deck.json';
import jaStudy from './locales/ja/study.json';
import jaAdmin from './locales/ja/admin.json';

// 2. resources에 추가
const resources = {
  ko: { ... },
  en: { ... },
  id: { ... },
  // 새 언어 추가
  ja: {
    common: jaCommon,
    auth: jaAuth,
    deck: jaDeck,
    study: jaStudy,
    admin: jaAdmin
  }
};
```

### Step 3: 언어 선택 UI에 추가

각 언어의 `common.json`에 새 언어 이름 추가:

```json
{
  "language": {
    "ko": "한국어",
    "en": "English",
    "id": "Bahasa Indonesia",
    "ja": "日本語"
  }
}
```

### Step 4: 언어 선택 컴포넌트 업데이트

`LanguageSelector.js`에서 새 언어가 자동으로 표시됩니다 (common.json의 language 객체 기반).

### 추가 가능한 언어 예시

| 코드 | 언어 | 네이티브 표기 |
|------|------|---------------|
| ja | 일본어 | 日本語 |
| zh | 중국어 (간체) | 简体中文 |
| zh-TW | 중국어 (번체) | 繁體中文 |
| vi | 베트남어 | Tiếng Việt |
| th | 태국어 | ภาษาไทย |
| es | 스페인어 | Español |
| fr | 프랑스어 | Français |
| de | 독일어 | Deutsch |
| pt | 포르투갈어 | Português |
| ar | 아랍어 | العربية |
| hi | 힌디어 | हिन्दी |
| ms | 말레이어 | Bahasa Melayu |
| tl | 타갈로그어 | Tagalog |

### 체크리스트

새 언어 추가 시 확인할 사항:

- [ ] 모든 번역 파일 생성 (5개)
- [ ] i18n/index.js에 import 추가
- [ ] i18n/index.js의 resources에 추가
- [ ] 모든 언어의 common.json에 새 언어 이름 추가
- [ ] 빌드 테스트 (`npm run build`)
- [ ] 각 페이지에서 언어 전환 테스트
- [ ] 누락된 번역 키 확인 (콘솔 경고 확인)

### RTL 언어 지원 (아랍어 등)

아랍어, 히브리어 등 RTL(Right-to-Left) 언어 추가 시:

```javascript
// App.js에 추가
import { useTranslation } from 'react-i18next';

function App() {
  const { i18n } = useTranslation();
  const isRTL = ['ar', 'he'].includes(i18n.language);

  return (
    <div dir={isRTL ? 'rtl' : 'ltr'}>
      {/* ... */}
    </div>
  );
}
```

CSS에 RTL 스타일 추가:
```css
[dir="rtl"] .some-class {
  text-align: right;
  direction: rtl;
}
```
