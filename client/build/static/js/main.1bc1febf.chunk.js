(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{159:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(50),l=a.n(o),s=a(2),i=(a(58),a(3)),d=(a(59),a(1));const c=()=>localStorage.getItem("authToken"),p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=c();console.log("[API]",e,"token:",a?a.substring(0,20)+"...":"null");const r=Object(d.a)(Object(d.a)({"Content-Type":"application/json"},a&&{Authorization:"Bearer ".concat(a)}),t.headers),n=await fetch("".concat("").concat(e),Object(d.a)(Object(d.a)({},t),{},{headers:r}));if(console.log("[API]",e,"status:",n.status),!n.ok){const t=e.startsWith("/api/auth/");if(401===n.status&&!t)throw console.error("[API] 401 Unauthorized:",e),new Error("Unauthorized - please login again");const a=await n.json();throw new Error(a.error||"API request failed")}return n.json()},m=(e,t,a)=>p("/api/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,username:a})}),g=(e,t)=>p("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),u=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user")},x=(e,t)=>{localStorage.setItem("authToken",e),localStorage.setItem("user",JSON.stringify(t))},h=()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},f={getAll:()=>p("/api/decks"),get:e=>p("/api/decks/".concat(e)),create:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return p("/api/decks",{method:"POST",body:JSON.stringify(Object(d.a)({name:e,description:t},a))})},delete:e=>p("/api/decks/".concat(e),{method:"DELETE"})},b=(e,t,a)=>p("/api/cards",{method:"POST",body:JSON.stringify({deckId:e,front:t,back:a})}),y=e=>p("/api/decks/".concat(e,"/cards")),E=e=>p("/api/cards/".concat(e),{method:"DELETE"}),k=(e,t,a)=>p("/api/cards/".concat(e),{method:"PUT",body:JSON.stringify({front:t,back:a})}),v=(e,t)=>p("/api/cards/bulk",{method:"POST",body:JSON.stringify({deckId:e,cards:t})}),S=e=>p("/api/study/".concat(e,"/due")),C=(e,t)=>p("/api/study/review",{method:"POST",body:JSON.stringify({cardId:e,difficulty:t})}),w=e=>p("/api/decks/".concat(e,"/share"),{method:"POST"}),D=e=>p("/api/shared/".concat(e,"/import"),{method:"POST"}),z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];e.my&&t.push("my=1");const a=t.length?"?".concat(t.join("&")):"";return p("/api/recommendations".concat(a))},A=()=>p("/api/users"),R=(e,t,a)=>p("/api/users",{method:"POST",body:JSON.stringify({name:e,email:t,password:a})}),I=e=>p("/api/admin/users?userId=".concat(e),{method:"DELETE"}),B=(e,t)=>p("/api/admin/users",{method:"PUT",body:JSON.stringify(Object(d.a)({userId:e},t))}),T=e=>p("/api/admin/assign",{method:"POST",body:JSON.stringify(e)}),O=()=>p("/api/admin/stats"),j=()=>p("/api/admin/decks"),W=e=>p("/api/admin/decks/".concat(e),{method:"DELETE"}),F=e=>p("/api/decks/".concat(e,"/cards")),L=()=>p("/api/admin/assignments"),N=e=>p("/api/admin/assignments/".concat(e),{method:"DELETE"}),U=()=>p("/api/admin/user-stats"),P=e=>{const t=e.message||e.toString();return t.includes("Email already exists")||t.includes("UNIQUE constraint")?"\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4. \ub2e4\ub978 \uc774\uba54\uc77c\uc744 \uc0ac\uc6a9\ud574\uc8fc\uc138\uc694.":t.includes("Invalid credentials")||t.includes("Unauthorized")?"\uc774\uba54\uc77c \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.":t.includes("401")?"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.":t.includes("password")&&t.includes("short")?"\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.":t.includes("Failed to fetch")||t.includes("Network")?"\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.":t.includes("404")||t.includes("not found")?"\uc694\uccad\ud55c \ub9ac\uc18c\uc2a4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":t.includes("500")||t.includes("Internal server error")?"\uc11c\ubc84 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.":t.includes("Deck not found")?"\ub371\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":t.includes("Card not found")?"\uce74\ub4dc\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":t.includes("Invalid share token")?"\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uacf5\uc720 \ub9c1\ud06c\uc785\ub2c8\ub2e4.":t||"\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."};class _ extends r.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault(),this.setState({error:"",loading:!0});try{const e=await g(this.state.email,this.state.password);x(e.token,e.user),this.props.onLoginSuccess&&this.props.onLoginSuccess(),this.props.history.push("/decks")}catch(t){this.setState({error:P(t)})}finally{this.setState({loading:!1})}},this.state={email:"",password:"",error:"",loading:!1}}render(){const{email:e,password:t,error:a,loading:r}=this.state,{onSwitchToRegister:o}=this.props;return n.a.createElement("div",{style:{maxWidth:"400px",margin:"50px auto",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"}},n.a.createElement("h2",{style:{textAlign:"center",marginBottom:"20px"}},"\ub85c\uadf8\uc778"),a&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px"}},a),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\uc774\uba54\uc77c"),n.a.createElement("input",{type:"email",value:e,onChange:e=>this.setState({email:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\ube44\ubc00\ubc88\ud638"),n.a.createElement("input",{type:"password",value:t,onChange:e=>this.setState({password:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("button",{type:"submit",disabled:r,style:{width:"100%",padding:"10px",backgroundColor:r?"#ccc":"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"16px",cursor:r?"not-allowed":"pointer"}},r?"\ub85c\ub529 \uc911...":"\ub85c\uadf8\uc778\ud558\uae30")),n.a.createElement("div",{style:{textAlign:"center",marginTop:"15px"}},n.a.createElement("small",null,"\uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?"," ",n.a.createElement("button",{onClick:o,style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",padding:0,fontSize:"inherit"}},"\ud68c\uc6d0\uac00\uc785"))))}}const M=Object(i.g)(_);class J extends r.Component{constructor(e){super(e),this.handleSubmit=async e=>{e.preventDefault(),this.setState({error:"",loading:!0});try{const e=await m(this.state.email,this.state.password,this.state.username);x(e.token,e.user),this.props.onRegisterSuccess&&this.props.onRegisterSuccess(),this.props.history.push("/decks")}catch(t){this.setState({error:P(t)})}finally{this.setState({loading:!1})}},this.state={email:"",password:"",username:"",error:"",loading:!1}}render(){const{email:e,password:t,username:a,error:r,loading:o}=this.state,{onSwitchToLogin:l}=this.props;return n.a.createElement("div",{style:{maxWidth:"400px",margin:"50px auto",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"}},n.a.createElement("h2",{style:{textAlign:"center",marginBottom:"20px"}},"\ud68c\uc6d0\uac00\uc785"),r&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px"}},r),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\uc774\uba54\uc77c"),n.a.createElement("input",{type:"email",value:e,onChange:e=>this.setState({email:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\uc0ac\uc6a9\uc790 \uc774\ub984"),n.a.createElement("input",{type:"text",value:a,onChange:e=>this.setState({username:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\ube44\ubc00\ubc88\ud638"),n.a.createElement("input",{type:"password",value:t,onChange:e=>this.setState({password:e.target.value}),required:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("button",{type:"submit",disabled:o,style:{width:"100%",padding:"10px",backgroundColor:o?"#ccc":"#007bff",color:"#fff",border:"none",borderRadius:"4px",fontSize:"16px",cursor:o?"not-allowed":"pointer"}},o?"\ub85c\ub529 \uc911...":"\uac00\uc785\ud558\uae30")),n.a.createElement("div",{style:{textAlign:"center",marginTop:"15px"}},n.a.createElement("small",null,"\uc774\ubbf8 \uacc4\uc815\uc774 \uc788\uc73c\uc2e0\uac00\uc694?"," ",n.a.createElement("button",{onClick:l,style:{background:"none",border:"none",color:"#007bff",textDecoration:"underline",cursor:"pointer",padding:0,fontSize:"inherit"}},"\ub85c\uadf8\uc778"))))}}const q=Object(i.g)(J);var Q=a(52);class V extends r.Component{render(){const{weeklyData:e}=this.props;if(!e||0===e.length)return n.a.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#6c757d"}},"\ud559\uc2b5 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const t={labels:e.map(e=>e.date),datasets:[{label:"\ud559\uc2b5\ud55c \uce74\ub4dc \uc218",data:e.map(e=>e.count),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0}]};return n.a.createElement("div",{style:{padding:"20px",backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #ddd",marginTop:"20px"}},n.a.createElement(Q.Line,{data:t,options:{responsive:!0,legend:{position:"top"},title:{display:!0,text:"\uc8fc\uac04 \ud559\uc2b5 \uc9c4\ud589\ub960"},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]}}}))}}var H=V;class K extends r.Component{constructor(e){super(e),this.loadStats=async()=>{try{const e=await fetch("/api/stats",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!e.ok)throw new Error("Failed to load stats");const t=await e.json();this.setState({stats:t,loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.loadWeeklyData=async()=>{try{const e=await fetch("/api/stats/weekly",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}});if(!e.ok)throw new Error("Failed to load weekly data");const t=await e.json();this.setState({weeklyData:t.weeklyData})}catch(e){console.error("\uc8fc\uac04 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",e)}},this.state={stats:null,weeklyData:[],loading:!0,error:""}}componentDidMount(){this.loadStats(),this.loadWeeklyData()}render(){const{stats:e,weeklyData:t,loading:a,error:r}=this.state;return a?n.a.createElement("div",null,"\ub85c\ub529 \uc911..."):r?n.a.createElement("div",null,"\uc624\ub958: ",r):e?n.a.createElement("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",marginBottom:"20px"}},n.a.createElement("h3",{style:{marginBottom:"15px"}},n.a.createElement("span",{role:"img","aria-label":"\ud1b5\uacc4"},"\ud83d\udcca")," \ud559\uc2b5 \ud1b5\uacc4"),n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px"}},n.a.createElement("div",{style:{padding:"15px",backgroundColor:"#fff",borderRadius:"4px",textAlign:"center"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#007bff"}},e.deckCount),n.a.createElement("div",{style:{fontSize:"14px",color:"#6c757d",marginTop:"5px"}},"\ucd1d \ub371")),n.a.createElement("div",{style:{padding:"15px",backgroundColor:"#fff",borderRadius:"4px",textAlign:"center"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#28a745"}},e.cardCount),n.a.createElement("div",{style:{fontSize:"14px",color:"#6c757d",marginTop:"5px"}},"\ucd1d \uce74\ub4dc")),n.a.createElement("div",{style:{padding:"15px",backgroundColor:"#fff",borderRadius:"4px",textAlign:"center"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#ffc107"}},e.todayReviews),n.a.createElement("div",{style:{fontSize:"14px",color:"#6c757d",marginTop:"5px"}},"\uc624\ub298 \ud559\uc2b5")),n.a.createElement("div",{style:{padding:"15px",backgroundColor:"#fff",borderRadius:"4px",textAlign:"center"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc3545"}},e.dueCards),n.a.createElement("div",{style:{fontSize:"14px",color:"#6c757d",marginTop:"5px"}},"\ud559\uc2b5 \ub300\uae30"))),n.a.createElement(H,{weeklyData:t})):null}}var $=K;var Z=e=>{let{message:t="\ub85c\ub529 \uc911...",size:a="medium"}=e;const r={small:{spinner:24,fontSize:12},medium:{spinner:40,fontSize:14},large:{spinner:60,fontSize:16}},o=r[a]||r.medium;return n.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px",textAlign:"center"}},n.a.createElement("div",{style:{width:"".concat(o.spinner,"px"),height:"".concat(o.spinner,"px"),border:"4px solid #f3f3f3",borderTop:"4px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),t&&n.a.createElement("p",{style:{marginTop:"15px",color:"#6c757d",fontSize:"".concat(o.fontSize,"px")}},t),n.a.createElement("style",null,"\n                @keyframes spin {\n                    0% { transform: rotate(0deg); }\n                    100% { transform: rotate(360deg); }\n                }\n            "))};const G={background:"#ffffff",backgroundSecondary:"#f8f9fa",text:"#212529",textSecondary:"#6c757d",primary:"#007bff",success:"#28a745",danger:"#dc3545",warning:"#ffc107",info:"#17a2b8",border:"#dee2e6",borderLight:"#e9ecef",cardBackground:"#ffffff",cardBorder:"#ddd",inputBackground:"#ffffff",inputBorder:"#ddd",buttonPrimary:"#007bff",buttonSecondary:"#6c757d",buttonSuccess:"#28a745",buttonDanger:"#dc3545",alertInfo:{bg:"#d1ecf1",text:"#0c5460",border:"#bee5eb"},alertSuccess:{bg:"#d4edda",text:"#155724",border:"#c3e6cb"},alertDanger:{bg:"#f8d7da",text:"#721c24",border:"#f5c6cb"},alertWarning:{bg:"#fff3cd",text:"#856404",border:"#ffeaa7"}},X={background:"#1a1a1a",backgroundSecondary:"#2d2d2d",text:"#e9ecef",textSecondary:"#adb5bd",primary:"#0d6efd",success:"#198754",danger:"#dc3545",warning:"#ffc107",info:"#0dcaf0",border:"#495057",borderLight:"#343a40",cardBackground:"#2d2d2d",cardBorder:"#495057",inputBackground:"#343a40",inputBorder:"#495057",buttonPrimary:"#0d6efd",buttonSecondary:"#6c757d",buttonSuccess:"#198754",buttonDanger:"#dc3545",alertInfo:{bg:"#0c5460",text:"#d1ecf1",border:"#0c5460"},alertSuccess:{bg:"#155724",text:"#d4edda",border:"#155724"},alertDanger:{bg:"#721c24",text:"#f8d7da",border:"#721c24"},alertWarning:{bg:"#856404",text:"#fff3cd",border:"#856404"}},Y=n.a.createContext();class ee extends r.Component{constructor(e){super(e),this.toggleTheme=()=>{const e="light"===this.state.theme?"dark":"light",t="dark"===e?X:G;this.setState({theme:e,colors:t}),localStorage.setItem("theme",e)};const t=localStorage.getItem("theme")||"light";this.state={theme:t,colors:"dark"===t?X:G}}render(){return n.a.createElement(Y.Provider,{value:{theme:this.state.theme,colors:this.state.colors,toggleTheme:this.toggleTheme}},this.props.children)}}class te extends r.Component{render(){return n.a.createElement(Y.Consumer,null,e=>{let{theme:t,toggleTheme:a,colors:r}=e;return n.a.createElement("button",{onClick:a,style:{padding:"8px 16px",backgroundColor:r.backgroundSecondary,color:r.text,border:"1px solid ".concat(r.border),borderRadius:"4px",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"5px"},title:"light"===t?"\ub2e4\ud06c \ubaa8\ub4dc\ub85c \uc804\ud658":"\ub77c\uc774\ud2b8 \ubaa8\ub4dc\ub85c \uc804\ud658"},"light"===t?"\ud83c\udf19":"\u2600\ufe0f","light"===t?"\ub2e4\ud06c":"\ub77c\uc774\ud2b8")})}}var ae=te;class re extends r.Component{constructor(e){super(e),this.loadDecks=async()=>{try{const e=await f.getAll();this.setState({decks:e.decks,loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.handleLogout=()=>{localStorage.clear(),window.location.href="/login"},this.handleCreateDeck=async e=>{e.preventDefault();const{newDeckName:t}=this.state;if(t.trim())try{await f.create(t,""),this.setState({newDeckName:"",showCreateForm:!1,success:"\ub371\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),this.loadDecks(),setTimeout(()=>this.setState({success:""}),3e3)}catch(a){this.setState({error:a.message})}},this.handleImportDeck=async e=>{e.preventDefault();const{shareToken:t}=this.state;if(t.trim())try{const e=await D(t);this.setState({shareToken:"",showImportForm:!1,success:e.message||"\ub371\uc744 \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4!"}),this.loadDecks(),setTimeout(()=>this.setState({success:""}),3e3)}catch(a){this.setState({error:a.message})}},this.handleAnkiImport=async e=>{e.preventDefault();const{ankiFile:t}=this.state;if(t){this.setState({ankiImporting:!0,error:""});try{const e=new FormData;e.append("file",t);const a=localStorage.getItem("authToken"),r="",n=await fetch("".concat(r,"/api/anki/import"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:e}),o=await n.json();if(!n.ok)throw new Error(o.error||"Anki \ud30c\uc77c \uac00\uc838\uc624\uae30 \uc2e4\ud328");this.setState({ankiFile:null,showAnkiImport:!1,ankiImporting:!1,success:o.message||"".concat(o.deckName," \ub371\uc744 \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4! (").concat(o.cardCount,"\uc7a5)")}),this.loadDecks(),setTimeout(()=>this.setState({success:""}),5e3)}catch(a){this.setState({error:a.message,ankiImporting:!1})}}else this.setState({error:"Anki \ud30c\uc77c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})},this.openAnkiWeb=()=>{window.open("https://ankiweb.net/shared/decks","_blank")},this.handleDeleteDeck=async(e,t,a)=>{if(e.preventDefault(),e.stopPropagation(),window.confirm('"'.concat(a,'" \ub371\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\ubaa8\ub4e0 \uce74\ub4dc\uc640 \ud559\uc2b5 \uae30\ub85d\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4.')))try{await f.delete(t),this.setState({success:"\ub371\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),this.loadDecks(),setTimeout(()=>this.setState({success:""}),3e3)}catch(r){this.setState({error:r.message})}},this.getFilteredAndSortedDecks=()=>{const{decks:e,searchQuery:t,sortBy:a}=this.state;let r=e;if(t.trim()){const a=t.toLowerCase();r=e.filter(e=>e.name.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a))}return[...r].sort((e,t)=>{switch(a){case"name":return e.name.localeCompare(t.name);case"created":return new Date(t.created_at)-new Date(e.created_at);case"cards":return(t.card_count||0)-(e.card_count||0);default:return 0}})},this.state={decks:[],loading:!0,error:"",success:"",newDeckName:"",showCreateForm:!1,showImportForm:!1,showAnkiImport:!1,shareToken:"",ankiFile:null,ankiImporting:!1,searchQuery:"",sortBy:"created"}}componentDidMount(){this.loadDecks()}render(){var e,t,a,r,o;const{loading:l,error:i,success:d,newDeckName:c,showCreateForm:p,showImportForm:m,showAnkiImport:g,shareToken:u,searchQuery:x,sortBy:h}=this.state,{colors:f}=this.context;if(l)return n.a.createElement(Z,{message:"\ub371 \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."});const b=this.getFilteredAndSortedDecks();return n.a.createElement("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"20px",backgroundColor:f.background,color:f.text,minHeight:"100vh"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},n.a.createElement("h2",{style:{color:f.text}},"\ub0b4 \ub371"),n.a.createElement("div",{style:{display:"flex",gap:"10px"}},n.a.createElement(ae,null),n.a.createElement("button",{onClick:this.handleLogout,style:{padding:"8px 16px",backgroundColor:f.buttonDanger,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ub85c\uadf8\uc544\uc6c3"))),i&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:f.alertDanger.bg,color:f.alertDanger.text,border:"1px solid ".concat(f.alertDanger.border),borderRadius:"4px"}},i),d&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:f.alertSuccess.bg,color:f.alertSuccess.text,border:"1px solid ".concat(f.alertSuccess.border),borderRadius:"4px"}},d),n.a.createElement($,null),n.a.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",alignItems:"center"}},n.a.createElement("input",{type:"text",placeholder:"\ud83d\udd0d \ub371 \uac80\uc0c9 (\uc774\ub984 \ub610\ub294 \uc124\uba85)...",value:x,onChange:e=>this.setState({searchQuery:e.target.value}),style:{flex:1,padding:"10px",backgroundColor:f.inputBackground,color:f.text,border:"1px solid ".concat(f.inputBorder),borderRadius:"4px",fontSize:"14px"}}),n.a.createElement("select",{value:h,onChange:e=>this.setState({sortBy:e.target.value}),style:{padding:"10px",backgroundColor:f.inputBackground,color:f.text,border:"1px solid ".concat(f.inputBorder),borderRadius:"4px",fontSize:"14px",cursor:"pointer"}},n.a.createElement("option",{value:"created"},"\ucd5c\uc2e0\uc21c"),n.a.createElement("option",{value:"name"},"\uc774\ub984\uc21c"),n.a.createElement("option",{value:"cards"},"\uce74\ub4dc \uc218"))),n.a.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"}},!p&&!m&&!g&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:()=>this.setState({showCreateForm:!0}),style:{padding:"10px 20px",backgroundColor:f.buttonPrimary,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"+ \uc0c8 \ub371 \ub9cc\ub4e4\uae30"),n.a.createElement("button",{onClick:()=>this.setState({showImportForm:!0}),style:{padding:"10px 20px",backgroundColor:f.buttonSuccess,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"\ubc1b\uae30"},"\ud83d\udce5")," \uacf5\uc720\ub41c \ub371 \ubc1b\uae30"),n.a.createElement("button",{onClick:()=>this.setState({showAnkiImport:!0}),style:{padding:"10px 20px",backgroundColor:"#6f42c1",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"Anki"},"\ud83c\udccf")," Anki \ub371 \uac00\uc838\uc624\uae30")),p&&n.a.createElement("div",{style:{padding:"15px",border:"1px solid ".concat(f.border),borderRadius:"4px",backgroundColor:f.backgroundSecondary,flex:1}},n.a.createElement("h5",{style:{color:f.text}},"\uc0c8 \ub371 \ub9cc\ub4e4\uae30"),n.a.createElement("form",{onSubmit:this.handleCreateDeck},n.a.createElement("input",{type:"text",placeholder:"\ub371 \uc774\ub984",value:c,onChange:e=>this.setState({newDeckName:e.target.value}),autoFocus:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",backgroundColor:f.inputBackground,color:f.text,border:"1px solid ".concat(f.inputBorder),borderRadius:"4px"}}),n.a.createElement("button",{type:"submit",style:{padding:"8px 16px",marginRight:"10px",backgroundColor:f.buttonPrimary,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ub9cc\ub4e4\uae30"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showCreateForm:!1}),style:{padding:"8px 16px",backgroundColor:f.buttonSecondary,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c"))),m&&n.a.createElement("div",{style:{padding:"15px",border:"1px solid ".concat(f.border),borderRadius:"4px",backgroundColor:f.backgroundSecondary,flex:1}},n.a.createElement("h5",{style:{color:f.text}},"\uacf5\uc720\ub41c \ub371 \uac00\uc838\uc624\uae30"),n.a.createElement("p",{style:{fontSize:"13px",color:f.textSecondary,marginBottom:"10px"}},"Pangstudy \uc0ac\uc6a9\uc790\uac00 \uacf5\uc720\ud55c \ub371\uc758 \ub9c1\ud06c\ub098 \ud1a0\ud070\uc744 \uc785\ub825\ud558\uc138\uc694."),n.a.createElement("form",{onSubmit:this.handleImportDeck},n.a.createElement("input",{type:"text",placeholder:"\uacf5\uc720 \ub9c1\ud06c \ub610\ub294 \ud1a0\ud070 \uc785\ub825",value:u,onChange:e=>{const t=e.target.value,a=t.match(/shared\/([a-zA-Z0-9-]+)/);this.setState({shareToken:a?a[1]:t})},autoFocus:!0,style:{width:"100%",padding:"8px",marginBottom:"10px",backgroundColor:f.inputBackground,color:f.text,border:"1px solid ".concat(f.inputBorder),borderRadius:"4px"}}),n.a.createElement("button",{type:"submit",style:{padding:"8px 16px",marginRight:"10px",backgroundColor:f.buttonSuccess,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\uac00\uc838\uc624\uae30"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showImportForm:!1}),style:{padding:"8px 16px",backgroundColor:f.buttonSecondary,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c"))),g&&n.a.createElement("div",{style:{padding:"15px",border:"1px solid ".concat(f.border),borderRadius:"4px",backgroundColor:f.backgroundSecondary,flex:1}},n.a.createElement("h5",{style:{color:f.text,marginBottom:"10px"}},"Anki \ub371 \uac00\uc838\uc624\uae30"),n.a.createElement("div",{style:{padding:"12px",backgroundColor:(null===(e=f.alertInfo)||void 0===e?void 0:e.bg)||"#e7f3ff",border:"1px solid ".concat((null===(t=f.alertInfo)||void 0===t?void 0:t.border)||"#b6d4fe"),borderRadius:"6px",marginBottom:"15px"}},n.a.createElement("p",{style:{fontSize:"13px",color:(null===(a=f.alertInfo)||void 0===a?void 0:a.text)||"#084298",margin:"0 0 8px 0",fontWeight:"500"}},"Anki \ud30c\uc77c(.apkg)\uc744 \uc5c5\ub85c\ub4dc\ud558\uc5ec \ub371\uc744 \uac00\uc838\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4."),n.a.createElement("p",{style:{fontSize:"12px",color:(null===(r=f.alertInfo)||void 0===r?void 0:r.text)||"#084298",margin:"0 0 8px 0"}},n.a.createElement("strong",null,"Anki \ub371 \uad6c\ud558\ub294 \ubc29\ubc95:")),n.a.createElement("ol",{style:{fontSize:"12px",color:(null===(o=f.alertInfo)||void 0===o?void 0:o.text)||"#084298",margin:"0",paddingLeft:"20px"}},n.a.createElement("li",{style:{marginBottom:"4px"}},"AnkiWeb \uacf5\uc720 \ub371 \uc0ac\uc774\ud2b8\uc5d0\uc11c \uc6d0\ud558\ub294 \ub371 \uac80\uc0c9"),n.a.createElement("li",{style:{marginBottom:"4px"}},".apkg \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc"),n.a.createElement("li",null,"\uc544\ub798\uc5d0\uc11c \ud30c\uc77c \uc5c5\ub85c\ub4dc")),n.a.createElement("button",{type:"button",onClick:this.openAnkiWeb,style:{marginTop:"10px",padding:"6px 12px",backgroundColor:"#0d6efd",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"AnkiWeb \uacf5\uc720 \ub371 \uc0ac\uc774\ud2b8 \uc5f4\uae30")),n.a.createElement("form",{onSubmit:this.handleAnkiImport},n.a.createElement("input",{type:"file",accept:".apkg",onChange:e=>this.setState({ankiFile:e.target.files[0]}),style:{width:"100%",padding:"8px",marginBottom:"10px",backgroundColor:f.inputBackground,color:f.text,border:"1px solid ".concat(f.inputBorder),borderRadius:"4px"}}),n.a.createElement("p",{style:{fontSize:"11px",color:f.textSecondary,marginBottom:"10px"}},"* \ucd5c\ub300 10MB, .apkg \ud30c\uc77c\ub9cc \uc9c0\uc6d0\ub429\ub2c8\ub2e4."),n.a.createElement("button",{type:"submit",disabled:this.state.ankiImporting,style:{padding:"8px 16px",marginRight:"10px",backgroundColor:this.state.ankiImporting?"#999":"#6f42c1",color:"#fff",border:"none",borderRadius:"4px",cursor:this.state.ankiImporting?"not-allowed":"pointer"}},this.state.ankiImporting?"\uac00\uc838\uc624\ub294 \uc911...":"\uac00\uc838\uc624\uae30"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showAnkiImport:!1,ankiFile:null}),style:{padding:"8px 16px",backgroundColor:f.buttonSecondary,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c")))),0===b.length?n.a.createElement("div",{style:{padding:"15px",backgroundColor:f.alertInfo.bg,color:f.alertInfo.text,border:"1px solid ".concat(f.alertInfo.border),borderRadius:"4px"}},x?"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.":"\ub371\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8 \ub371\uc744 \ub9cc\ub4e4\uac70\ub098 \uacf5\uc720\ub41c \ub371\uc744 \uac00\uc838\uc640\ubcf4\uc138\uc694!"):n.a.createElement("div",null,b.map(e=>n.a.createElement("div",{key:e.id,style:{display:"flex",padding:"15px",marginBottom:"10px",border:"1px solid ".concat(f.cardBorder),borderRadius:"4px",backgroundColor:f.cardBackground,alignItems:"center"}},n.a.createElement(s.b,{to:"/decks/".concat(e.id),style:{flex:1,textDecoration:"none",color:f.text}},n.a.createElement("h4",{style:{margin:"0 0 5px 0",color:f.text}},e.name),n.a.createElement("p",{style:{margin:0,color:f.textSecondary,fontSize:"14px"}},"\uce74\ub4dc ",e.card_count||0,"\uac1c")),n.a.createElement("button",{onClick:t=>this.handleDeleteDeck(t,e.id,e.name),style:{padding:"6px 12px",backgroundColor:f.buttonDanger,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"\uc0ad\uc81c")))))}}re.contextType=Y;var ne=re;class oe extends r.Component{constructor(e){super(e),this.loadDeckAndCards=async()=>{const{deckId:e}=this.props.match.params;try{this.setState({loading:!0});const[t,a]=await Promise.all([f.get(e),y(e)]);this.setState({deck:t.deck,cards:a.cards||[],editDeckName:t.deck.name,editDeckDescription:t.deck.description||"",loading:!1})}catch(t){this.setState({error:t.message,loading:!1})}},this.handleAddCard=async e=>{e.preventDefault();const{deckId:t}=this.props.match.params,{newCard:a}=this.state;if(a.front.trim()&&a.back.trim())try{await b(t,a.front,a.back),this.setState({newCard:{front:"",back:""},showAddForm:!1,success:"\uce74\ub4dc\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),this.loadDeckAndCards(),setTimeout(()=>this.setState({success:""}),3e3)}catch(r){this.setState({error:r.message})}},this.handleShareDeck=async()=>{const{deckId:e}=this.props.match.params;try{const t=await w(e);this.setState({showShareModal:!0,shareUrl:t.shareUrl})}catch(t){this.setState({error:t.message})}},this.handleCopyShareLink=()=>{const{shareUrl:e}=this.state;navigator.clipboard.writeText(e).then(()=>{this.setState({success:"\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),setTimeout(()=>this.setState({success:""}),3e3)})},this.handleEditDeck=async e=>{e.preventDefault();const{deckId:t}=this.props.match.params,{editDeckName:a,editDeckDescription:r}=this.state;if(a.trim())try{await f.update(t,a,r),this.setState({showEditDeck:!1,success:"\ub371\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),this.loadDeckAndCards(),setTimeout(()=>this.setState({success:""}),3e3)}catch(n){this.setState({error:n.message})}},this.handleDeleteCard=async e=>{if(window.confirm("\uc774 \uce74\ub4dc\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await E(e),this.setState({success:"\uce74\ub4dc\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),this.loadDeckAndCards(),setTimeout(()=>this.setState({success:""}),3e3)}catch(t){this.setState({error:t.message})}},this.handleEditCard=e=>{this.setState({editingCard:Object(d.a)({},e),showAddForm:!1})},this.handleCsvFileSelect=e=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{this.setState({csvText:e.target.result})},a.readAsText(t,"UTF-8")},this.handleCsvImport=async()=>{const{csvText:e}=this.state,{deckId:t}=this.props.match.params;if(e.trim()){this.setState({csvImporting:!0,error:""});try{const a=e.trim().split("\n"),r=[];for(let e=0;e<a.length;e++){const t=a[e].trim();if(!t)continue;if(0===e&&t.toLowerCase().includes("front")&&t.toLowerCase().includes("back"))continue;const n=this.parseCsvLine(t);if(n.length>=2){const e=n[0].trim(),t=n[1].trim();e&&t&&r.push({front:e,back:t})}}if(0===r.length)return void this.setState({error:"\uc720\ud6a8\ud55c \uce74\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ud615\uc2dd: \uc55e\uba74,\ub4b7\uba74",csvImporting:!1});await v(t,r),this.setState({showCsvImport:!1,csvText:"",success:"".concat(r.length,"\uac1c\uc758 \uce74\ub4dc\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),csvImporting:!1}),this.loadDeckAndCards(),setTimeout(()=>this.setState({success:""}),3e3)}catch(a){this.setState({error:a.message||"CSV \uac00\uc838\uc624\uae30 \uc2e4\ud328",csvImporting:!1})}}else this.setState({error:"CSV \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uac70\ub098 \ud30c\uc77c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})},this.parseCsvLine=e=>{const t=[];let a="",r=!1;for(let n=0;n<e.length;n++){const o=e[n];'"'===o?r=!r:","!==o||r?a+=o:(t.push(a.replace(/^"|"$/g,"")),a="")}return t.push(a.replace(/^"|"$/g,"")),t},this.handleUpdateCard=async e=>{e.preventDefault();const{editingCard:t}=this.state;if(t.front.trim()&&t.back.trim())try{await k(t.id,t.front,t.back),this.setState({editingCard:null,success:"\uce74\ub4dc\uac00 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"}),this.loadDeckAndCards(),setTimeout(()=>this.setState({success:""}),3e3)}catch(a){this.setState({error:a.message})}},this.state={deck:null,cards:[],loading:!0,error:"",success:"",showAddForm:!1,showShareModal:!1,showEditDeck:!1,showCsvImport:!1,editingCard:null,shareUrl:"",newCard:{front:"",back:""},editDeckName:"",editDeckDescription:"",csvText:"",csvImporting:!1},this.fileInputRef=n.a.createRef()}componentDidMount(){this.loadDeckAndCards()}render(){const{deck:e,cards:t,loading:a,error:r,success:o,showAddForm:l,showShareModal:i,showEditDeck:c,showCsvImport:p,editingCard:m,shareUrl:g,newCard:u,editDeckName:x,editDeckDescription:h,csvText:f,csvImporting:b}=this.state;return a?n.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},"\ub85c\ub529 \uc911..."):n.a.createElement("div",{style:{maxWidth:"800px",margin:"20px auto",padding:"20px"}},n.a.createElement("div",{style:{marginBottom:"20px"}},n.a.createElement(s.b,{to:"/decks",style:{display:"inline-block",padding:"8px 16px",marginBottom:"15px",backgroundColor:"#6c757d",color:"#fff",textDecoration:"none",borderRadius:"4px"}},"\u2190 \ub371 \ubaa9\ub85d\uc73c\ub85c"),c?n.a.createElement("form",{onSubmit:this.handleEditDeck,style:{padding:"15px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"}},n.a.createElement("h5",null,"\ub371 \uc218\uc815"),n.a.createElement("input",{type:"text",placeholder:"\ub371 \uc774\ub984",value:x,onChange:e=>this.setState({editDeckName:e.target.value}),style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"4px"}}),n.a.createElement("textarea",{placeholder:"\uc124\uba85 (\uc120\ud0dd)",value:h,onChange:e=>this.setState({editDeckDescription:e.target.value}),rows:2,style:{width:"100%",padding:"8px",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"4px"}}),n.a.createElement("button",{type:"submit",style:{padding:"8px 16px",marginRight:"10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\uc800\uc7a5"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showEditDeck:!1,editDeckName:e.name,editDeckDescription:e.description||""}),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c")):n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.a.createElement("div",null,n.a.createElement("h2",{style:{margin:"0 0 5px 0"}},e&&e.name),e&&e.description&&n.a.createElement("p",{style:{color:"#6c757d",margin:0}},e.description)),n.a.createElement("div",{style:{display:"flex",gap:"10px"}},n.a.createElement("button",{onClick:()=>this.props.history.push("/study/".concat(e.id)),style:{padding:"8px 16px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"\ucc45"},"\ud83d\udcda")," \ud559\uc2b5"),n.a.createElement("button",{onClick:()=>this.setState({showEditDeck:!0}),style:{padding:"8px 16px",backgroundColor:"#ffc107",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"\uc218\uc815"},"\u270f\ufe0f")),n.a.createElement("button",{onClick:this.handleShareDeck,style:{padding:"8px 16px",backgroundColor:"#17a2b8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"\uacf5\uc720"},"\ud83d\udce4"))))),r&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px"}},r),o&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#d4edda",color:"#155724",border:"1px solid #c3e6cb",borderRadius:"4px"}},o),i&&n.a.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},n.a.createElement("div",{style:{backgroundColor:"#fff",padding:"30px",borderRadius:"8px",maxWidth:"500px",width:"90%"}},n.a.createElement("h3",null,"\ub371 \uacf5\uc720 \ub9c1\ud06c"),n.a.createElement("p",null,"\uc774 \ub9c1\ud06c\ub97c \uacf5\uc720\ud558\uba74 \ub2e4\ub978 \uc0ac\ub78c\uc774 \uc774 \ub371\uc744 \uac00\uc838\uac08 \uc218 \uc788\uc2b5\ub2c8\ub2e4:"),n.a.createElement("div",{style:{padding:"10px",backgroundColor:"#f8f9fa",border:"1px solid #ddd",borderRadius:"4px",marginBottom:"15px",wordBreak:"break-all"}},g),n.a.createElement("div",{style:{display:"flex",gap:"10px"}},n.a.createElement("button",{onClick:this.handleCopyShareLink,style:{flex:1,padding:"10px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},n.a.createElement("span",{role:"img","aria-label":"\ubcf5\uc0ac"},"\ud83d\udccb")," \ub9c1\ud06c \ubcf5\uc0ac"),n.a.createElement("button",{onClick:()=>this.setState({showShareModal:!1}),style:{flex:1,padding:"10px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ub2eb\uae30")))),n.a.createElement("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"}},l||p?p?n.a.createElement("div",{style:{width:"100%",padding:"15px",border:"1px solid #17a2b8",borderRadius:"4px",backgroundColor:"#e7f5f7"}},n.a.createElement("h5",{style:{marginBottom:"10px"}},"CSV\ub85c \uce74\ub4dc \uc77c\uad04 \ucd94\uac00"),n.a.createElement("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"}},"\ud615\uc2dd: ",n.a.createElement("code",null,"\uc55e\uba74,\ub4b7\uba74")," (\ud55c \uc904\uc5d0 \ud558\ub098\uc529)",n.a.createElement("br",null),"\uc608\uc2dc: ",n.a.createElement("code",null,"apple,\uc0ac\uacfc")),n.a.createElement("div",{style:{marginBottom:"10px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"CSV \ud30c\uc77c \uc120\ud0dd"),n.a.createElement("input",{type:"file",accept:".csv,.txt",onChange:this.handleCsvFileSelect,ref:this.fileInputRef,style:{marginBottom:"10px"}})),n.a.createElement("div",{style:{marginBottom:"10px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\ub610\ub294 \uc9c1\uc811 \uc785\ub825"),n.a.createElement("textarea",{rows:8,placeholder:"apple,\uc0ac\uacfc\nbanana,\ubc14\ub098\ub098\nhappiness,\ud589\ubcf5",value:f,onChange:e=>this.setState({csvText:e.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontFamily:"monospace",fontSize:"13px"}})),n.a.createElement("button",{onClick:this.handleCsvImport,disabled:b||!f.trim(),style:{padding:"8px 16px",marginRight:"10px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:b?"not-allowed":"pointer",opacity:b?.7:1}},b?"\uac00\uc838\uc624\ub294 \uc911...":"\uac00\uc838\uc624\uae30"),n.a.createElement("button",{onClick:()=>this.setState({showCsvImport:!1,csvText:""}),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c")):n.a.createElement("div",{style:{padding:"15px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f8f9fa"}},n.a.createElement("h5",null,"\uc0c8 \uce74\ub4dc \ucd94\uac00"),n.a.createElement("form",{onSubmit:this.handleAddCard},n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\uc55e\uba74 (\uc9c8\ubb38)"),n.a.createElement("textarea",{rows:3,placeholder:"\uc608: Hello",value:u.front,onChange:e=>this.setState({newCard:Object(d.a)(Object(d.a)({},u),{},{front:e.target.value})}),autoFocus:!0,style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\ub4b7\uba74 (\ub2f5\ubcc0)"),n.a.createElement("textarea",{rows:3,placeholder:"\uc608: \uc548\ub155\ud558\uc138\uc694",value:u.back,onChange:e=>this.setState({newCard:Object(d.a)(Object(d.a)({},u),{},{back:e.target.value})}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px"}})),n.a.createElement("button",{type:"submit",style:{padding:"8px 16px",marginRight:"10px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucd94\uac00"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showAddForm:!1}),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{onClick:()=>this.setState({showAddForm:!0,showCsvImport:!1}),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"+ \uce74\ub4dc \ucd94\uac00"),n.a.createElement("button",{onClick:()=>this.setState({showCsvImport:!0,showAddForm:!1}),style:{padding:"10px 20px",backgroundColor:"#17a2b8",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"CSV \uac00\uc838\uc624\uae30"))),n.a.createElement("h4",{style:{marginBottom:"15px"}},"\uce74\ub4dc \ubaa9\ub85d (",t.length,")"),m&&n.a.createElement("div",{style:{padding:"15px",marginBottom:"20px",border:"1px solid #ffc107",borderRadius:"4px",backgroundColor:"#fff3cd"}},n.a.createElement("h5",null,"\uce74\ub4dc \uc218\uc815"),n.a.createElement("form",{onSubmit:this.handleUpdateCard},n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\uc55e\uba74"),n.a.createElement("textarea",{rows:3,value:m.front,onChange:e=>this.setState({editingCard:Object(d.a)(Object(d.a)({},m),{},{front:e.target.value})}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),n.a.createElement("div",{style:{marginBottom:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"}},"\ub4b7\uba74"),n.a.createElement("textarea",{rows:3,value:m.back,onChange:e=>this.setState({editingCard:Object(d.a)(Object(d.a)({},m),{},{back:e.target.value})}),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}})),n.a.createElement("button",{type:"submit",style:{padding:"8px 16px",marginRight:"10px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\uc800\uc7a5"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({editingCard:null}),style:{padding:"8px 16px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"}},"\ucde8\uc18c"))),0===t.length?n.a.createElement("div",{style:{padding:"15px",backgroundColor:"#d1ecf1",color:"#0c5460",border:"1px solid #bee5eb",borderRadius:"4px"}},"\uce74\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uce74\ub4dc\ub97c \ucd94\uac00\ud574\ubcf4\uc138\uc694!"):n.a.createElement("div",null,t.map(e=>n.a.createElement("div",{key:e.id,style:{padding:"15px",marginBottom:"10px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#fff"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},n.a.createElement("div",{style:{flex:1,display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},n.a.createElement("div",null,n.a.createElement("strong",null,"\uc55e\uba74:"),n.a.createElement("p",{style:{margin:"5px 0 0 0"}},e.front)),n.a.createElement("div",null,n.a.createElement("strong",null,"\ub4b7\uba74:"),n.a.createElement("p",{style:{margin:"5px 0 0 0"}},e.back))),n.a.createElement("div",{style:{display:"flex",gap:"5px",marginLeft:"10px"}},n.a.createElement("button",{onClick:()=>this.handleEditCard(e),style:{padding:"5px 10px",backgroundColor:"#ffc107",color:"#000",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"\uc218\uc815"},n.a.createElement("span",{role:"img","aria-label":"\uc218\uc815"},"\u270f\ufe0f")),n.a.createElement("button",{onClick:()=>this.handleDeleteCard(e.id),style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"\uc0ad\uc81c"},n.a.createElement("span",{role:"img","aria-label":"\uc0ad\uc81c"},"\ud83d\uddd1\ufe0f"))))))))}}var le=Object(i.g)(oe);class se extends r.Component{constructor(e){super(e),this.loadDueCards=async()=>{const{deckId:e}=this.props.match.params;try{this.setState({loading:!0});const t=await S(e);0===t.cards.length?this.setState({completed:!0,loading:!1}):this.setState({cards:t.cards,loading:!1})}catch(t){this.setState({error:t.message,loading:!1})}},this.loadAssignedCards=async()=>{try{this.setState({loading:!0});const e=await(await fetch("/api/study/assigned/due",{headers:Object(d.a)({},localStorage.getItem("authToken")?{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}:{})})).json();if(e.assignments&&0!==e.assignments.length){const t=e.assignments.map(e=>({id:e.id,front:e.card_front||e.notes||"Assigned item",back:e.card_back||"",meta_assignment:e}));this.setState({cards:t,loading:!1})}else this.setState({completed:!0,loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.handleAnswer=async e=>{const{cards:t,currentIndex:a,stats:r}=this.state,n=t[a];try{await C(n.id,e);r[["again","hard","good","easy"][e]]++,a+1<t.length?this.setState({currentIndex:a+1,showAnswer:!1,stats:r}):this.setState({completed:!0,stats:r})}catch(o){this.setState({error:o.message})}},this.handleKeyPress=e=>{const{showAnswer:t,cards:a,currentIndex:r}=this.state;if(a[r]){if("Space"===e.code&&!t)return e.preventDefault(),void this.setState({showAnswer:!0});if(t)switch(e.key){case"1":e.preventDefault(),this.handleAnswer(0);break;case"2":e.preventDefault(),this.handleAnswer(1);break;case"3":e.preventDefault(),this.handleAnswer(2);break;case"4":e.preventDefault(),this.handleAnswer(3)}}},this.state={cards:[],currentIndex:0,showAnswer:!1,loading:!0,error:"",completed:!1,stats:{again:0,hard:0,good:0,easy:0}}}componentDidMount(){const{assignedMode:e}=this.props,{deckId:t}=this.props.match.params;e||"assigned"===t?this.loadAssignedCards():this.loadDueCards(),document.addEventListener("keydown",this.handleKeyPress)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyPress)}render(){const{cards:e,currentIndex:t,showAnswer:a,loading:r,error:o,completed:l,stats:s}=this.state,{deckId:i}=this.props.match.params;if(r)return n.a.createElement("div",{style:{textAlign:"center",marginTop:"50px"}},"\ub85c\ub529 \uc911...");if(l)return n.a.createElement("div",{style:{maxWidth:"600px",margin:"50px auto",padding:"30px",textAlign:"center",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff"}},n.a.createElement("h2",null,"\ud559\uc2b5 \uc644\ub8cc!"),n.a.createElement("p",{style:{fontSize:"18px",marginTop:"20px"}},"\uc624\ub298\uc758 \ud559\uc2b5\uc744 \ubaa8\ub450 \ub9c8\ucce4\uc2b5\ub2c8\ub2e4."),n.a.createElement("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"4px"}},n.a.createElement("h4",null,"\ud559\uc2b5 \ud1b5\uacc4"),n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginTop:"15px"}},n.a.createElement("div",null,n.a.createElement("strong",null,"\ub2e4\uc2dc:")," ",s.again),n.a.createElement("div",null,n.a.createElement("strong",null,"\uc5b4\ub824\uc6c0:")," ",s.hard),n.a.createElement("div",null,n.a.createElement("strong",null,"\ubcf4\ud1b5:")," ",s.good),n.a.createElement("div",null,n.a.createElement("strong",null,"\uc26c\uc6c0:")," ",s.easy)),n.a.createElement("div",{style:{marginTop:"15px",fontSize:"20px",fontWeight:"bold"}},"\ucd1d ",s.again+s.hard+s.good+s.easy,"\uac1c \uce74\ub4dc \ud559\uc2b5")),n.a.createElement("div",{style:{marginTop:"30px",display:"flex",gap:"10px",justifyContent:"center"}},n.a.createElement("button",{onClick:()=>this.props.history.push("/decks/".concat(i)),style:{padding:"12px 24px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"}},"\ub371\uc73c\ub85c \ub3cc\uc544\uac00\uae30"),n.a.createElement("button",{onClick:()=>this.props.history.push("/decks"),style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px"}},"\ub371 \ubaa9\ub85d\uc73c\ub85c")));const d=e[t],c=(t+1)/e.length*100;return n.a.createElement("div",{style:{maxWidth:"600px",margin:"20px auto",padding:"20px"}},n.a.createElement("h2",null,"\ud559\uc2b5 \uc138\uc158"),n.a.createElement("div",{style:{padding:"10px",marginBottom:"20px",backgroundColor:"#e7f3ff",border:"1px solid #b3d9ff",borderRadius:"4px",fontSize:"12px",color:"#004085"}},"\u2328\ufe0f ",n.a.createElement("strong",null,"\ud0a4\ubcf4\ub4dc \ub2e8\ucd95\ud0a4:")," Space = \ub2f5\ubcc0 \ubcf4\uae30 | 1 = \ub2e4\uc2dc | 2 = \uc5b4\ub824\uc6c0 | 3 = \ubcf4\ud1b5 | 4 = \uc26c\uc6c0"),o&&n.a.createElement("div",{style:{padding:"10px",marginBottom:"15px",backgroundColor:"#f8d7da",color:"#721c24",border:"1px solid #f5c6cb",borderRadius:"4px"}},o),n.a.createElement("div",{style:{marginBottom:"20px"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"}},n.a.createElement("span",null,t+1," / ",e.length),n.a.createElement("span",null,Math.round(c),"%")),n.a.createElement("div",{style:{width:"100%",height:"8px",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden"}},n.a.createElement("div",{style:{width:"".concat(c,"%"),height:"100%",backgroundColor:"#007bff",transition:"width 0.3s"}}))),n.a.createElement("div",{style:{minHeight:"300px",padding:"40px",border:"2px solid #007bff",borderRadius:"8px",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",cursor:a?"default":"pointer",transition:"transform 0.3s"},onClick:()=>!a&&this.setState({showAnswer:!0})},n.a.createElement("div",{style:{textAlign:"center",width:"100%"}},a?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{fontSize:"20px",color:"#6c757d",marginBottom:"20px"}},d.front),n.a.createElement("hr",{style:{margin:"20px 0",border:"none",borderTop:"1px solid #dee2e6"}}),n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#28a745"}},d.back)):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px"}},d.front),n.a.createElement("div",{style:{color:"#6c757d",marginTop:"30px"}},"\ud074\ub9ad\ud558\uc5ec \ub2f5\ubcc0 \ubcf4\uae30")))),a&&n.a.createElement("div",{style:{marginTop:"30px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"}},n.a.createElement("button",{onClick:()=>this.handleAnswer(0),style:{padding:"15px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},n.a.createElement("div",{style:{fontWeight:"bold"}},"\ub2e4\uc2dc"),n.a.createElement("div",{style:{fontSize:"12px",marginTop:"5px"}},"<1\ubd84")),n.a.createElement("button",{onClick:()=>this.handleAnswer(1),style:{padding:"15px",backgroundColor:"#fd7e14",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},n.a.createElement("div",{style:{fontWeight:"bold"}},"\uc5b4\ub824\uc6c0"),n.a.createElement("div",{style:{fontSize:"12px",marginTop:"5px"}},"1\uc77c")),n.a.createElement("button",{onClick:()=>this.handleAnswer(2),style:{padding:"15px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},n.a.createElement("div",{style:{fontWeight:"bold"}},"\ubcf4\ud1b5"),n.a.createElement("div",{style:{fontSize:"12px",marginTop:"5px"}},"3\uc77c")),n.a.createElement("button",{onClick:()=>this.handleAnswer(3),style:{padding:"15px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},n.a.createElement("div",{style:{fontWeight:"bold"}},"\uc26c\uc6c0"),n.a.createElement("div",{style:{fontSize:"12px",marginTop:"5px"}},"7\uc77c"))))}}var ie=Object(i.g)(se);a(159);class de extends r.Component{render(){const e=h();return n.a.createElement("div",{className:"layout-container"},n.a.createElement("header",{className:"layout-header"},n.a.createElement("div",{className:"header-content"},n.a.createElement("div",{className:"header-brand"},n.a.createElement("small",{className:"brand-subtitle"},"Inspired by Anki"),n.a.createElement("h1",{className:"brand-title"},"Pangstudy")),n.a.createElement("nav",{className:"header-nav"},n.a.createElement(s.b,{to:"/decks",className:"nav-link"},"Decks"),n.a.createElement(s.b,{to:"/recommendations",className:"nav-link"},"Recommendations"),n.a.createElement(s.b,{to:"/study/assigned",className:"nav-link"},"Assigned"),e&&e.is_admin&&n.a.createElement(s.b,{to:"/admin",className:"nav-link"},"Admin"),e?n.a.createElement("button",{className:"logout-btn",onClick:()=>{localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"}},"Logout"):n.a.createElement(s.b,{to:"/login",className:"nav-link"},"Login")))),n.a.createElement("main",{className:"layout-main"},this.props.children))}}var ce=de;const pe=()=>localStorage.getItem("authToken");async function me(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=pe(),n={eventType:e,deckId:t,variant:a};h()&&(n.userId=h().id);try{await fetch("".concat("","/api/analytics"),{method:"POST",headers:Object(d.a)({"Content-Type":"application/json"},r&&{Authorization:"Bearer ".concat(r)}),body:JSON.stringify(n)})}catch(o){console.warn("analytics log failed",o)}}var ge=()=>{const[e,t]=Object(r.useState)(!0),[a,o]=Object(r.useState)([]),[l,i]=Object(r.useState)(null),[d,c]=Object(r.useState)(!1),[p,m]=Object(r.useState)(0),g=Object(r.useRef)(!1),u=function(){try{const e="ab_variant";let t=localStorage.getItem(e);return t||(t=Math.random()<.5?"A":"B",localStorage.setItem(e,t),t)}catch(e){return"A"}}();return Object(r.useEffect)(()=>{let e=!0;return t(!0),i(null),z({my:d}).then(t=>{e&&o(t.recommendations||[])}).catch(t=>{e&&i(t.message||"Failed to load recommendations")}).finally(()=>e&&t(!1)),()=>{e=!1}},[d,p]),Object(r.useEffect)(()=>{g.current=!1},[d,p]),Object(r.useEffect)(()=>{e||g.current||(g.current=!0,me("recommendations_shown",null,u))},[e,a,u]),e?n.a.createElement("div",null,"\ucd94\ucc9c \ud56d\ubaa9\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."):l?n.a.createElement("div",null,"\uc624\ub958: ",l):n.a.createElement("div",null,n.a.createElement("h2",null,"\ucd94\ucc9c \ub371"),n.a.createElement("div",{style:{marginBottom:12}},n.a.createElement("label",{style:{marginRight:12}},n.a.createElement("input",{type:"checkbox",checked:d,onChange:e=>c(e.target.checked)})," \ub0b4 \ub371\ub9cc \ubcf4\uae30"),n.a.createElement("button",{onClick:()=>m(e=>e+1)},"\uc0c8\ub85c\uace0\uce68")),a.length?n.a.createElement("ul",{style:{listStyle:"none",padding:0}},a.map(e=>n.a.createElement("li",{key:e.id,style:{borderBottom:"1px solid #eee",padding:"8px 0"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.a.createElement("div",null,n.a.createElement("strong",null,e.name),n.a.createElement("div",{style:{fontSize:12,color:"#666"}},"\uc810\uc218: ",Math.round(e.score)),n.a.createElement("div",{style:{fontSize:12,color:"#444",marginTop:6}},e.meta&&e.meta.due?n.a.createElement("span",null,"\ub300\uae30 \uce74\ub4dc: ",e.meta.due," \xb7 "):null,e.meta&&e.meta.assigned?n.a.createElement("span",null,"\ud560\ub2f9 \ub300\uae30: ",e.meta.assigned," \xb7 "):null,e.meta&&e.meta.recent?n.a.createElement("span",null,"\ucd5c\uadfc \ub9ac\ubdf0: ",e.meta.recent," \xb7 "):null,e.meta&&e.meta.wrong?n.a.createElement("span",{style:{color:"#b00"}},"\uc624\ub2f5 \uc774\ub825: ",e.meta.wrong):null)),n.a.createElement("div",null,n.a.createElement(s.b,{to:"/decks/".concat(e.id),style:{marginRight:8}},"\ub371 \ubcf4\uae30"),n.a.createElement(s.b,{to:"/study/".concat(e.id),onClick:()=>me("recommendation_start",e.id,u)},"\ud559\uc2b5 \uc2dc\uc791")))))):n.a.createElement("div",null,"\ucd94\ucc9c\ud560 \ub371\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ud559\uc2b5\uc744 \uc2dc\uc791\ud574\ubcf4\uc138\uc694!"))};class ue extends r.Component{render(){var e;const t=h(),{location:a}=this.props,r=a.pathname,o=[{path:"/admin",label:"\ub300\uc2dc\ubcf4\ub4dc",exact:!0},{path:"/admin/users",label:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"},{path:"/admin/decks",label:"\ub371 \uad00\ub9ac"},{path:"/admin/assign",label:"\ud559\uc2b5 \ud560\ub2f9"},{path:"/admin/stats",label:"\ud1b5\uacc4"}],l=e=>e.exact?r===e.path:r.startsWith(e.path);return n.a.createElement("div",{style:{display:"flex",minHeight:"100vh"}},n.a.createElement("div",{style:{width:"220px",backgroundColor:"#2c3e50",color:"#ecf0f1",flexShrink:0}},n.a.createElement("div",{style:{padding:"20px",borderBottom:"1px solid #34495e"}},n.a.createElement("h2",{style:{margin:0,fontSize:"18px"}},"Pangstudy"),n.a.createElement("small",{style:{color:"#95a5a6"}},"Admin Panel")),n.a.createElement("ul",{style:{listStyle:"none",padding:0,margin:0}},o.map(e=>n.a.createElement("li",{key:e.path},n.a.createElement(s.b,{to:e.path,style:{display:"block",padding:"12px 20px",color:l(e)?"#fff":"#bdc3c7",backgroundColor:l(e)?"#34495e":"transparent",textDecoration:"none",borderLeft:l(e)?"4px solid #3498db":"4px solid transparent"}},e.label)))),n.a.createElement("div",{style:{padding:"20px",borderTop:"1px solid #34495e",marginTop:"20px"}},n.a.createElement(s.b,{to:"/decks",style:{color:"#3498db",textDecoration:"none",fontSize:"14px"}},"\u2190 \uc0ac\uc774\ud2b8\ub85c \ub3cc\uc544\uac00\uae30"))),n.a.createElement("div",{style:{flex:1,backgroundColor:"#f5f6fa"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px 20px",backgroundColor:"#fff",borderBottom:"1px solid #ddd"}},n.a.createElement("h1",{style:{margin:0,fontSize:"20px",color:"#2c3e50"}},(null===(e=o.find(e=>l(e)))||void 0===e?void 0:e.label)||"\uad00\ub9ac\uc790"),n.a.createElement("div",{style:{display:"flex",alignItems:"center",gap:"15px"}},n.a.createElement("span",{style:{color:"#7f8c8d",fontSize:"14px"}},(null===t||void 0===t?void 0:t.username)||(null===t||void 0===t?void 0:t.email)),n.a.createElement("button",{onClick:()=>{u(),window.location.href="/login"},style:{padding:"6px 12px",backgroundColor:"#e74c3c",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px"}},"\ub85c\uadf8\uc544\uc6c3"))),n.a.createElement("div",{style:{padding:"20px"}},this.props.children)))}}var xe=Object(i.g)(ue);class he extends r.Component{constructor(e){super(e),this.loadDashboardData=async()=>{try{var e;const[t,a]=await Promise.all([O(),A()]);this.setState({stats:t,recentUsers:(null===(e=a.users)||void 0===e?void 0:e.slice(0,5))||[],loading:!1})}catch(t){this.setState({error:t.message,loading:!1})}},this.state={stats:null,recentUsers:[],recentActivity:[],loading:!0,error:""}}componentDidMount(){this.loadDashboardData()}render(){const{stats:e,recentUsers:t,loading:a,error:r}=this.state,o={backgroundColor:"#fff",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},l=e=>Object(d.a)(Object(d.a)({},o),{},{borderLeft:"4px solid ".concat(e),flex:1,minWidth:"200px"});return a?n.a.createElement("div",{style:{textAlign:"center",padding:"40px"}},"\ub85c\ub529 \uc911..."):r?n.a.createElement("div",{style:{color:"#e74c3c",padding:"20px"}},r):n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",flexWrap:"wrap"}},n.a.createElement("div",{style:l("#3498db")},n.a.createElement("div",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"5px"}},"\ucd1d \uc0ac\uc6a9\uc790"),n.a.createElement("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2c3e50"}},(null===e||void 0===e?void 0:e.totalUsers)||0)),n.a.createElement("div",{style:l("#2ecc71")},n.a.createElement("div",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"5px"}},"\ucd1d \ub371"),n.a.createElement("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2c3e50"}},(null===e||void 0===e?void 0:e.totalDecks)||0)),n.a.createElement("div",{style:l("#e67e22")},n.a.createElement("div",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"5px"}},"\ucd1d \uce74\ub4dc"),n.a.createElement("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2c3e50"}},(null===e||void 0===e?void 0:e.totalCards)||0)),n.a.createElement("div",{style:l("#9b59b6")},n.a.createElement("div",{style:{color:"#7f8c8d",fontSize:"14px",marginBottom:"5px"}},"\uc624\ub298 \ud559\uc2b5"),n.a.createElement("div",{style:{fontSize:"28px",fontWeight:"bold",color:"#2c3e50"}},(null===e||void 0===e?void 0:e.todayReviews)||0))),n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"}},n.a.createElement("div",{style:o},n.a.createElement("h3",{style:{margin:"0 0 15px",color:"#2c3e50",fontSize:"16px"}},"\ucd5c\uadfc \uac00\uc785 \uc0ac\uc6a9\uc790"),0===t.length?n.a.createElement("div",{style:{color:"#95a5a6"}},"\uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"):n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",{style:{borderBottom:"1px solid #eee"}},n.a.createElement("th",{style:{textAlign:"left",padding:"8px 0",color:"#7f8c8d",fontWeight:"normal",fontSize:"13px"}},"\uc774\ub984"),n.a.createElement("th",{style:{textAlign:"left",padding:"8px 0",color:"#7f8c8d",fontWeight:"normal",fontSize:"13px"}},"\uc774\uba54\uc77c"))),n.a.createElement("tbody",null,t.map(e=>n.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f5f5f5"}},n.a.createElement("td",{style:{padding:"10px 0",fontSize:"14px"}},e.username||e.name),n.a.createElement("td",{style:{padding:"10px 0",fontSize:"14px",color:"#7f8c8d"}},e.email)))))),n.a.createElement("div",{style:o},n.a.createElement("h3",{style:{margin:"0 0 15px",color:"#2c3e50",fontSize:"16px"}},"\uc2dc\uc2a4\ud15c \uc815\ubcf4"),n.a.createElement("div",{style:{fontSize:"14px",color:"#7f8c8d"}},n.a.createElement("div",{style:{marginBottom:"10px"}},n.a.createElement("strong",null,"\ud50c\ub7ab\ud3fc:")," Cloudflare Pages"),n.a.createElement("div",{style:{marginBottom:"10px"}},n.a.createElement("strong",null,"\ub370\uc774\ud130\ubca0\uc774\uc2a4:")," D1 SQLite"),n.a.createElement("div",{style:{marginBottom:"10px"}},n.a.createElement("strong",null,"\ubc84\uc804:")," 1.0.0")))))}}var fe=he;class be extends r.Component{constructor(e){super(e),this.loadUsers=async()=>{try{const e=await A();this.setState({users:e.users||[],loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.handleAddUser=async e=>{e.preventDefault();const{newUser:t}=this.state;try{await R(t.name,t.email,t.password),this.setState({showAddForm:!1,newUser:{name:"",email:"",password:""}}),this.loadUsers()}catch(a){alert("\uc0ac\uc6a9\uc790 \ucd94\uac00 \uc2e4\ud328: "+a.message)}},this.handleToggleAdmin=async(e,t)=>{try{await B(e,{is_admin:!t}),this.loadUsers()}catch(a){alert("\uad8c\ud55c \ubcc0\uacbd \uc2e4\ud328: "+a.message)}},this.handleResetPassword=async e=>{const t=prompt("\uc0c8 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694:");if(t)try{await B(e,{password:t}),alert("\ube44\ubc00\ubc88\ud638\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(a){alert("\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uc2e4\ud328: "+a.message)}},this.handleDeleteUser=async(e,t)=>{if(window.confirm("\uc815\ub9d0 ".concat(t," \uc0ac\uc6a9\uc790\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{await I(e),this.loadUsers()}catch(a){alert("\uc0ad\uc81c \uc2e4\ud328: "+a.message)}},this.state={users:[],loading:!0,error:"",showAddForm:!1,newUser:{name:"",email:"",password:""},editingUser:null}}componentDidMount(){this.loadUsers()}render(){const{users:e,loading:t,error:a,showAddForm:r,newUser:o}=this.state,l={backgroundColor:"#fff",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},s=e=>({padding:"6px 12px",backgroundColor:e,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",marginRight:"5px"});return t?n.a.createElement("div",null,"\ub85c\ub529 \uc911..."):a?n.a.createElement("div",{style:{color:"red"}},a):n.a.createElement("div",null,n.a.createElement("div",{style:{marginBottom:"20px"}},n.a.createElement("button",{onClick:()=>this.setState({showAddForm:!r}),style:s("#3498db")},"+ \uc0ac\uc6a9\uc790 \ucd94\uac00")),r&&n.a.createElement("div",{style:Object(d.a)(Object(d.a)({},l),{},{marginBottom:"20px"})},n.a.createElement("h3",{style:{margin:"0 0 15px",fontSize:"16px"}},"\uc0c8 \uc0ac\uc6a9\uc790 \ucd94\uac00"),n.a.createElement("form",{onSubmit:this.handleAddUser},n.a.createElement("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"}},n.a.createElement("input",{type:"text",placeholder:"\uc774\ub984",value:o.name,onChange:e=>this.setState({newUser:Object(d.a)(Object(d.a)({},o),{},{name:e.target.value})}),required:!0,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px",flex:1}}),n.a.createElement("input",{type:"email",placeholder:"\uc774\uba54\uc77c",value:o.email,onChange:e=>this.setState({newUser:Object(d.a)(Object(d.a)({},o),{},{email:e.target.value})}),required:!0,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px",flex:1}}),n.a.createElement("input",{type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",value:o.password,onChange:e=>this.setState({newUser:Object(d.a)(Object(d.a)({},o),{},{password:e.target.value})}),required:!0,style:{padding:"8px",border:"1px solid #ddd",borderRadius:"4px",flex:1}}),n.a.createElement("button",{type:"submit",style:s("#2ecc71")},"\ucd94\uac00"),n.a.createElement("button",{type:"button",onClick:()=>this.setState({showAddForm:!1}),style:s("#95a5a6")},"\ucde8\uc18c")))),n.a.createElement("div",{style:l},n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",{style:{borderBottom:"2px solid #eee"}},n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"ID"),n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"\uc774\ub984"),n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"\uc774\uba54\uc77c"),n.a.createElement("th",{style:{textAlign:"center",padding:"12px 8px",color:"#7f8c8d"}},"\uad00\ub9ac\uc790"),n.a.createElement("th",{style:{textAlign:"right",padding:"12px 8px",color:"#7f8c8d"}},"\uc791\uc5c5"))),n.a.createElement("tbody",null,e.map(e=>n.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f5f5f5"}},n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px"}},e.id),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px"}},e.username||e.name),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px",color:"#7f8c8d"}},e.email),n.a.createElement("td",{style:{padding:"12px 8px",textAlign:"center"}},n.a.createElement("input",{type:"checkbox",checked:1===e.is_admin||!0===e.is_admin,onChange:()=>this.handleToggleAdmin(e.id,e.is_admin)})),n.a.createElement("td",{style:{padding:"12px 8px",textAlign:"right"}},n.a.createElement("button",{onClick:()=>this.handleResetPassword(e.id),style:s("#f39c12")},"\ube44\ubc00\ubc88\ud638"),n.a.createElement("button",{onClick:()=>this.handleDeleteUser(e.id,e.email),style:s("#e74c3c")},"\uc0ad\uc81c")))))),0===e.length&&n.a.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#95a5a6"}},"\uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4")))}}var ye=be;class Ee extends r.Component{constructor(e){super(e),this.loadDecks=async()=>{try{const e=await j();this.setState({decks:e.decks||[],loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.handleDeleteDeck=async(e,t)=>{if(window.confirm('\uc815\ub9d0 "'.concat(t,'" \ub371\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?')))try{await W(e),this.loadDecks()}catch(a){alert("\uc0ad\uc81c \uc2e4\ud328: "+a.message)}},this.state={decks:[],loading:!0,error:""}}componentDidMount(){this.loadDecks()}render(){const{decks:e,loading:t,error:a}=this.state;return t?n.a.createElement("div",null,"\ub85c\ub529 \uc911..."):a?n.a.createElement("div",{style:{color:"red"}},a):n.a.createElement("div",{style:{backgroundColor:"#fff",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",{style:{borderBottom:"2px solid #eee"}},n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"ID"),n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"\ub371 \uc774\ub984"),n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"\uc18c\uc720\uc790"),n.a.createElement("th",{style:{textAlign:"center",padding:"12px 8px",color:"#7f8c8d"}},"\uce74\ub4dc \uc218"),n.a.createElement("th",{style:{textAlign:"left",padding:"12px 8px",color:"#7f8c8d"}},"\uc0dd\uc131\uc77c"),n.a.createElement("th",{style:{textAlign:"right",padding:"12px 8px",color:"#7f8c8d"}},"\uc791\uc5c5"))),n.a.createElement("tbody",null,e.map(e=>{return n.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f5f5f5"}},n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px"}},e.id),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px"}},e.name),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px",color:"#7f8c8d"}},e.owner_name||e.owner_email||"User #".concat(e.user_id)),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px",textAlign:"center"}},e.card_count||0),n.a.createElement("td",{style:{padding:"12px 8px",fontSize:"14px",color:"#95a5a6"}},e.created_at?new Date(e.created_at).toLocaleDateString():"-"),n.a.createElement("td",{style:{padding:"12px 8px",textAlign:"right"}},n.a.createElement("button",{onClick:()=>this.handleDeleteDeck(e.id,e.name),style:(t="#e74c3c",{padding:"6px 12px",backgroundColor:t,color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"})},"\uc0ad\uc81c")));var t}))),0===e.length&&n.a.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#95a5a6"}},"\ub371\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"))}}var ke=Ee;class ve extends r.Component{constructor(e){super(e),this.loadData=async()=>{try{const[e,t,a]=await Promise.all([A(),j(),L()]);this.setState({users:e.users||[],decks:t.decks||[],assignments:a.assignments||[],loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.loadCards=async e=>{if(e)try{const t=await F(e);this.setState({cards:t.cards||[]})}catch(t){console.error("Failed to load cards:",t)}else this.setState({cards:[]})},this.handleDeckChange=e=>{this.setState({form:Object(d.a)(Object(d.a)({},this.state.form),{},{deckId:e,cardId:""})}),this.loadCards(e)},this.handleSubmit=async e=>{e.preventDefault();const{form:t}=this.state;if(t.userId&&t.deckId)try{await T({userId:parseInt(t.userId),deckId:parseInt(t.deckId),cardId:t.cardId?parseInt(t.cardId):null,dueDate:t.dueDate||null,note:t.note||null}),alert("\ud560\ub2f9 \uc644\ub8cc!"),this.setState({form:{userId:"",deckId:"",cardId:"",dueDate:"",note:""},cards:[]}),this.loadData()}catch(a){alert("\ud560\ub2f9 \uc2e4\ud328: "+a.message)}else alert("\uc0ac\uc6a9\uc790\uc640 \ub371\uc744 \uc120\ud0dd\ud558\uc138\uc694")},this.handleDeleteAssignment=async e=>{if(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await N(e),this.loadData()}catch(t){alert("\uc0ad\uc81c \uc2e4\ud328: "+t.message)}},this.state={users:[],decks:[],assignments:[],loading:!0,error:"",form:{userId:"",deckId:"",cardId:"",dueDate:"",note:""},cards:[]}}componentDidMount(){this.loadData()}render(){const{users:e,decks:t,assignments:a,cards:r,loading:o,error:l,form:s}=this.state,i={backgroundColor:"#fff",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"20px"},c={padding:"8px 12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"14px",width:"100%"};return o?n.a.createElement("div",null,"\ub85c\ub529 \uc911..."):l?n.a.createElement("div",{style:{color:"red"}},l):n.a.createElement("div",null,n.a.createElement("div",{style:i},n.a.createElement("h3",{style:{margin:"0 0 15px",fontSize:"16px",color:"#2c3e50"}},"\uc0c8 \ud559\uc2b5 \ud560\ub2f9"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"}},n.a.createElement("div",null,n.a.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#7f8c8d",fontSize:"13px"}},"\uc0ac\uc6a9\uc790 *"),n.a.createElement("select",{value:s.userId,onChange:e=>this.setState({form:Object(d.a)(Object(d.a)({},s),{},{userId:e.target.value})}),style:c,required:!0},n.a.createElement("option",{value:""},"\uc120\ud0dd\ud558\uc138\uc694"),e.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.username||e.name," (",e.email,")")))),n.a.createElement("div",null,n.a.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#7f8c8d",fontSize:"13px"}},"\ub371 *"),n.a.createElement("select",{value:s.deckId,onChange:e=>this.handleDeckChange(e.target.value),style:c,required:!0},n.a.createElement("option",{value:""},"\uc120\ud0dd\ud558\uc138\uc694"),t.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.name)))),n.a.createElement("div",null,n.a.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#7f8c8d",fontSize:"13px"}},"\uce74\ub4dc (\uc120\ud0dd)"),n.a.createElement("select",{value:s.cardId,onChange:e=>this.setState({form:Object(d.a)(Object(d.a)({},s),{},{cardId:e.target.value})}),style:c,disabled:!s.deckId},n.a.createElement("option",{value:""},"\uc804\uccb4 \ub371"),r.map(e=>n.a.createElement("option",{key:e.id,value:e.id},e.front.substring(0,30),"...")))),n.a.createElement("div",null,n.a.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#7f8c8d",fontSize:"13px"}},"\ub9c8\uac10\uc77c"),n.a.createElement("input",{type:"date",value:s.dueDate,onChange:e=>this.setState({form:Object(d.a)(Object(d.a)({},s),{},{dueDate:e.target.value})}),style:c}))),n.a.createElement("div",{style:{marginTop:"15px"}},n.a.createElement("label",{style:{display:"block",marginBottom:"5px",color:"#7f8c8d",fontSize:"13px"}},"\uba54\ubaa8"),n.a.createElement("input",{type:"text",value:s.note,onChange:e=>this.setState({form:Object(d.a)(Object(d.a)({},s),{},{note:e.target.value})}),style:c,placeholder:"\ud560\ub2f9 \uba54\ubaa8 (\uc120\ud0dd)"})),n.a.createElement("div",{style:{marginTop:"15px"}},n.a.createElement("button",{type:"submit",style:{padding:"10px 20px",backgroundColor:"#3498db",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"}},"\ud560\ub2f9\ud558\uae30")))),n.a.createElement("div",{style:i},n.a.createElement("h3",{style:{margin:"0 0 15px",fontSize:"16px",color:"#2c3e50"}},"\ud560\ub2f9 \ubaa9\ub85d"),n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",{style:{borderBottom:"2px solid #eee"}},n.a.createElement("th",{style:{textAlign:"left",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uc0ac\uc6a9\uc790"),n.a.createElement("th",{style:{textAlign:"left",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\ub371"),n.a.createElement("th",{style:{textAlign:"left",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\ub9c8\uac10\uc77c"),n.a.createElement("th",{style:{textAlign:"left",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uba54\ubaa8"),n.a.createElement("th",{style:{textAlign:"right",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uc791\uc5c5"))),n.a.createElement("tbody",null,a.map(e=>n.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f5f5f5"}},n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px"}},e.user_name||e.user_email),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px"}},e.deck_name),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",color:"#95a5a6"}},e.due_date?new Date(e.due_date).toLocaleDateString():"-"),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",color:"#7f8c8d"}},e.note||"-"),n.a.createElement("td",{style:{padding:"10px 8px",textAlign:"right"}},n.a.createElement("button",{onClick:()=>this.handleDeleteAssignment(e.id),style:{padding:"4px 10px",backgroundColor:"#e74c3c",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"}},"\uc0ad\uc81c")))))),0===a.length&&n.a.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#95a5a6"}},"\ud560\ub2f9\ub41c \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4")))}}var Se=ve;class Ce extends r.Component{constructor(e){super(e),this.loadStats=async()=>{try{const[e,t]=await Promise.all([O(),U()]);this.setState({stats:e,userStats:t.users||[],loading:!1})}catch(e){this.setState({error:e.message,loading:!1})}},this.state={stats:null,userStats:[],loading:!0,error:""}}componentDidMount(){this.loadStats()}render(){const{stats:e,userStats:t,loading:a,error:r}=this.state,o={backgroundColor:"#fff",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",marginBottom:"20px"};return a?n.a.createElement("div",null,"\ub85c\ub529 \uc911..."):r?n.a.createElement("div",{style:{color:"red"}},r):n.a.createElement("div",null,n.a.createElement("div",{style:o},n.a.createElement("h3",{style:{margin:"0 0 15px",fontSize:"16px",color:"#2c3e50"}},"\uc804\uccb4 \ud1b5\uacc4"),n.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px"}},n.a.createElement("div",{style:{textAlign:"center",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#3498db"}},(null===e||void 0===e?void 0:e.totalUsers)||0),n.a.createElement("div",{style:{fontSize:"13px",color:"#7f8c8d",marginTop:"5px"}},"\ucd1d \uc0ac\uc6a9\uc790")),n.a.createElement("div",{style:{textAlign:"center",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2ecc71"}},(null===e||void 0===e?void 0:e.totalDecks)||0),n.a.createElement("div",{style:{fontSize:"13px",color:"#7f8c8d",marginTop:"5px"}},"\ucd1d \ub371")),n.a.createElement("div",{style:{textAlign:"center",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#e67e22"}},(null===e||void 0===e?void 0:e.totalCards)||0),n.a.createElement("div",{style:{fontSize:"13px",color:"#7f8c8d",marginTop:"5px"}},"\ucd1d \uce74\ub4dc")),n.a.createElement("div",{style:{textAlign:"center",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#9b59b6"}},(null===e||void 0===e?void 0:e.totalReviews)||0),n.a.createElement("div",{style:{fontSize:"13px",color:"#7f8c8d",marginTop:"5px"}},"\ucd1d \ud559\uc2b5 \ud69f\uc218")),n.a.createElement("div",{style:{textAlign:"center",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"}},n.a.createElement("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#1abc9c"}},(null===e||void 0===e?void 0:e.todayReviews)||0),n.a.createElement("div",{style:{fontSize:"13px",color:"#7f8c8d",marginTop:"5px"}},"\uc624\ub298 \ud559\uc2b5")))),n.a.createElement("div",{style:o},n.a.createElement("h3",{style:{margin:"0 0 15px",fontSize:"16px",color:"#2c3e50"}},"\uc0ac\uc6a9\uc790\ubcc4 \ud559\uc2b5 \ud604\ud669"),n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse"}},n.a.createElement("thead",null,n.a.createElement("tr",{style:{borderBottom:"2px solid #eee"}},n.a.createElement("th",{style:{textAlign:"left",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uc0ac\uc6a9\uc790"),n.a.createElement("th",{style:{textAlign:"center",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\ub371 \uc218"),n.a.createElement("th",{style:{textAlign:"center",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uce74\ub4dc \uc218"),n.a.createElement("th",{style:{textAlign:"center",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\ucd1d \ud559\uc2b5"),n.a.createElement("th",{style:{textAlign:"center",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\uc624\ub298 \ud559\uc2b5"),n.a.createElement("th",{style:{textAlign:"center",padding:"10px 8px",color:"#7f8c8d",fontSize:"13px"}},"\ub9c8\uc9c0\ub9c9 \ud65c\ub3d9"))),n.a.createElement("tbody",null,t.map(e=>n.a.createElement("tr",{key:e.id,style:{borderBottom:"1px solid #f5f5f5"}},n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px"}},n.a.createElement("div",null,e.username||e.name),n.a.createElement("div",{style:{fontSize:"12px",color:"#95a5a6"}},e.email)),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",textAlign:"center"}},e.deck_count||0),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",textAlign:"center"}},e.card_count||0),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",textAlign:"center"}},e.total_reviews||0),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"14px",textAlign:"center"}},n.a.createElement("span",{style:{backgroundColor:e.today_reviews>0?"#d4edda":"#f8f9fa",padding:"2px 8px",borderRadius:"10px",fontSize:"13px"}},e.today_reviews||0)),n.a.createElement("td",{style:{padding:"10px 8px",fontSize:"13px",textAlign:"center",color:"#95a5a6"}},e.last_activity?new Date(e.last_activity).toLocaleDateString():"-"))))),0===t.length&&n.a.createElement("div",{style:{textAlign:"center",padding:"20px",color:"#95a5a6"}},"\ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4")))}}var we=Ce;class De extends r.Component{constructor(e){super(e),this.handleLoginSuccess=()=>{this.setState({user:h()})},this.state={user:h(),showRegister:!1}}render(){const{user:e,showRegister:t}=this.state,a=null===e||void 0===e?void 0:e.is_admin;return n.a.createElement(ee,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/admin"},e&&a?n.a.createElement(xe,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{exact:!0,path:"/admin",component:fe}),n.a.createElement(i.b,{exact:!0,path:"/admin/users",component:ye}),n.a.createElement(i.b,{exact:!0,path:"/admin/decks",component:ke}),n.a.createElement(i.b,{exact:!0,path:"/admin/assign",component:Se}),n.a.createElement(i.b,{exact:!0,path:"/admin/stats",component:we}))):e?n.a.createElement(i.a,{to:"/decks"}):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,null,n.a.createElement(ce,null,n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/login"},e?n.a.createElement(i.a,{to:"/decks"}):t?n.a.createElement(q,{onSwitchToLogin:()=>this.setState({showRegister:!1}),onRegisterSuccess:this.handleLoginSuccess}):n.a.createElement(M,{onSwitchToRegister:()=>this.setState({showRegister:!0}),onLoginSuccess:this.handleLoginSuccess})),n.a.createElement(i.b,{exact:!0,path:"/register"},e?n.a.createElement(i.a,{to:"/decks"}):n.a.createElement(q,{onSwitchToLogin:()=>this.setState({showRegister:!1}),onRegisterSuccess:this.handleLoginSuccess})),n.a.createElement(i.b,{exact:!0,path:"/decks"},e?n.a.createElement(ne,null):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,{exact:!0,path:"/recommendations"},e?n.a.createElement(ge,null):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,{exact:!0,path:"/users"},n.a.createElement(i.a,{to:"/admin"})),n.a.createElement(i.b,{exact:!0,path:"/decks/:deckId"},e?n.a.createElement(le,null):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,{exact:!0,path:"/study/assigned"},e?n.a.createElement(ie,{assignedMode:!0}):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,{exact:!0,path:"/study/:deckId"},e?n.a.createElement(ie,null):n.a.createElement(i.a,{to:"/login"})),n.a.createElement(i.b,{exact:!0,path:"/"},n.a.createElement(i.a,{to:e?"/decks":"/login"})))))))}}var ze=De;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(s.a,null,n.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},53:function(e,t,a){e.exports=a(160)},58:function(e,t,a){},59:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.1bc1febf.chunk.js.map