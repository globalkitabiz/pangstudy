{"version":3,"sources":["utils/api.js","utils/errorHandler.js","components/Auth/Login.js","components/Auth/Register.js","components/ProgressChart.js","components/Statistics.js","components/LoadingSpinner.js","styles/themes.js","contexts/ThemeContext.js","components/ThemeToggle.js","components/DeckList.js","components/DeckDetail.js","components/StudySession.js","components/LanguageSelector.js","components/Layout.js","utils/analytics.js","components/Recommendations.js","utils/abTest.js","components/admin/AdminLayout.js","components/admin/AdminDashboard.js","components/admin/AdminUsers.js","components/admin/AdminDecks.js","components/admin/AdminAssign.js","components/admin/AdminStats.js","App.js","serviceWorker.js","i18n/index.js","index.js"],"names":["getAuthToken","localStorage","getItem","apiRequest","async","endpoint","options","arguments","length","undefined","token","console","log","substring","headers","_objectSpread","Authorization","concat","response","fetch","status","ok","isAuthEndpoint","startsWith","error","Error","json","authAPI","register","email","password","username","method","body","JSON","stringify","login","logout","removeItem","saveToken","user","setItem","getUser","parse","deckAPI","getAll","get","deckId","create","name","description","metadata","delete","cardAPI","front","back","cardId","update","bulkCreate","cards","studyAPI","submitReview","difficulty","shareAPI","shareToken","recommendationsAPI","opts","params","my","push","q","join","adminAPI","getUsers","addUser","userId","updateUser","updates","data","getDashboardStats","getAllDecks","getAssignments","assignmentId","getUserStats","getErrorMessage","message","toString","includes","Login","Component","constructor","props","super","handleSubmit","e","preventDefault","this","setState","loading","state","onLoginSuccess","history","err","render","onSwitchToRegister","React","createElement","style","maxWidth","margin","padding","border","borderRadius","backgroundColor","textAlign","marginBottom","color","onSubmit","display","fontWeight","type","value","onChange","target","required","width","fontSize","disabled","cursor","marginTop","onClick","background","textDecoration","LoginWithRouter","withRouter","Register","onRegisterSuccess","onSwitchToLogin","RegisterWithRouter","ProgressChart","weeklyData","labels","map","d","date","datasets","label","count","borderColor","fill","Line","responsive","legend","position","title","text","scales","yAxes","ticks","beginAtZero","stepSize","Statistics","loadStats","stats","loadWeeklyData","componentDidMount","role","aria-label","gridTemplateColumns","gap","deckCount","cardCount","todayReviews","dueCards","LoadingSpinner","_ref","size","sizes","small","spinner","medium","large","currentSize","flexDirection","alignItems","justifyContent","height","borderTop","animation","lightTheme","backgroundSecondary","textSecondary","primary","success","danger","warning","info","borderLight","cardBackground","cardBorder","inputBackground","inputBorder","buttonPrimary","buttonSecondary","buttonSuccess","buttonDanger","alertInfo","bg","alertSuccess","alertDanger","alertWarning","darkTheme","ThemeContext","createContext","ThemeProvider","toggleTheme","newTheme","theme","newColors","colors","savedTheme","Provider","children","ThemeToggle","Consumer","DeckList","loadDecks","decks","handleLogout","clear","window","location","href","handleCreateDeck","newDeckName","trim","showCreateForm","setTimeout","handleImportDeck","result","showImportForm","handleAnkiImport","ankiFile","ankiImporting","arrayBuffer","zip","JSZip","loadAsync","dbFile","file","dbData","initSqlJs","Promise","resolve","reject","script","document","src","onload","onerror","head","appendChild","db","locateFile","Database","results","exec","values","row","parts","split","cleanAnkiText","close","API_BASE","deckName","replace","slice","showAnkiImport","openAnkiWeb","open","handleDeleteDeck","stopPropagation","confirm","getFilteredAndSortedDecks","searchQuery","sortBy","filtered","query","toLowerCase","filter","deck","sort","a","b","localeCompare","Date","created_at","card_count","_colors$alertInfo","_colors$alertInfo2","_colors$alertInfo3","_colors$alertInfo4","_colors$alertInfo5","context","filteredDecks","minHeight","placeholder","flex","flexWrap","Fragment","autoFocus","marginRight","tokenMatch","match","paddingLeft","accept","files","key","id","Link","to","contextType","DeckDetail","loadDeckAndCards","deckData","cardsData","all","editDeckName","editDeckDescription","handleAddCard","newCard","showAddForm","handleShareDeck","showShareModal","shareUrl","handleCopyShareLink","navigator","clipboard","writeText","then","handleEditDeck","showEditDeck","handleDeleteCard","handleEditCard","card","editingCard","handleCsvFileSelect","reader","FileReader","event","csvText","readAsText","handleCsvImport","csvImporting","lines","i","line","parseCsvLine","showCsvImport","current","inQuotes","char","handleUpdateCard","fileInputRef","createRef","rows","top","left","right","bottom","zIndex","wordBreak","ref","fontFamily","opacity","marginLeft","StudySession","_this","loadVoices","speechSynthesis","voices","getVoices","availableVoices","speak","lang","cancel","utterance","SpeechSynthesisUtterance","rate","voiceGender","langVoices","v","genderKeywords","genderVoice","find","some","k","voice","onstart","speaking","onend","detectLanguage","test","speakCurrentCard","side","currentIndex","currentCard","loadDueCards","completed","autoSpeak","loadAssignedCards","assignments","card_front","notes","card_back","meta_assignment","handleAnswer","showAnswer","handleKeyPress","code","again","hard","good","easy","showVoiceSettings","assignedMode","addEventListener","onvoiceschanged","componentWillUnmount","removeEventListener","progress","Math","round","overflow","transition","languages","flag","LanguageSelector","_i18n$language","i18n","useTranslation","language","changeLanguage","Layout","t","className","is_admin","withTranslation","logRecommendationEvent","eventType","variant","warn","Recommendations","setLoading","useState","items","setItems","setError","myOnly","setMyOnly","refreshKey","setRefreshKey","shownLoggedRef","useRef","random","getABVariant","useEffect","mounted","res","recommendations","catch","finally","checked","listStyle","borderBottom","score","meta","due","assigned","recent","wrong","AdminLayout","_menuItems$find","currentPath","pathname","menuItems","path","exact","isActive","item","flexShrink","borderLeft","AdminDashboard","loadDashboardData","_usersRes$users","statsRes","usersRes","recentUsers","users","recentActivity","cardStyle","boxShadow","statCardStyle","minWidth","totalUsers","totalDecks","totalCards","borderCollapse","AdminUsers","loadUsers","handleAddUser","newUser","alert","handleToggleAdmin","currentIsAdmin","handleResetPassword","newPassword","prompt","handleDeleteUser","editingUser","btnStyle","AdminDecks","owner_name","owner_email","user_id","toLocaleDateString","AdminAssign","loadData","decksRes","assignRes","loadCards","handleDeckChange","form","parseInt","dueDate","note","handleDeleteAssignment","inputStyle","u","c","user_name","user_email","deck_name","due_date","AdminStats","dashRes","userStatsRes","userStats","totalReviews","deck_count","total_reviews","today_reviews","last_activity","App","handleLoginSuccess","showRegister","isAdmin","Switch","Route","component","Redirect","Boolean","hostname","resources","ko","common","auth","study","admin","en","use","LanguageDetector","initReactI18next","init","fallbackLng","defaultNS","ns","interpolation","escapeValue","detection","order","caches","lookupLocalStorage","ReactDOM","BrowserRouter","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7068a2da.chunk.js","sourcesContent":["// API  \r\nconst API_BASE_URL = '';\r\n\r\n//  \r\nconst getAuthToken = () => localStorage.getItem('authToken');\r\n\r\n// API  \r\nconst apiRequest = async (endpoint, options = {}) => {\r\n    const token = getAuthToken();\r\n    console.log('[API]', endpoint, 'token:', token ? token.substring(0, 20) + '...' : 'null');\r\n    const headers = {\r\n        'Content-Type': 'application/json',\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n        ...options.headers,\r\n    };\r\n\r\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n    });\r\n\r\n    console.log('[API]', endpoint, 'status:', response.status);\r\n\r\n    if (!response.ok) {\r\n        // 401   (      )\r\n        const isAuthEndpoint = endpoint.startsWith('/api/auth/');\r\n        if (response.status === 401 && !isAuthEndpoint) {\r\n            console.error('[API] 401 Unauthorized:', endpoint);\r\n            //     throw\r\n            throw new Error('Unauthorized - please login again');\r\n        }\r\n        const error = await response.json();\r\n        throw new Error(error.error || 'API request failed');\r\n    }\r\n\r\n    return response.json();\r\n};\r\n\r\n//  API\r\nexport const authAPI = {\r\n    register: (email, password, username) =>\r\n        apiRequest('/api/auth/register', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ email, password, username }),\r\n        }),\r\n\r\n    login: (email, password) =>\r\n        apiRequest('/api/auth/login', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ email, password }),\r\n        }),\r\n\r\n    logout: () => {\r\n        localStorage.removeItem('authToken');\r\n        localStorage.removeItem('user');\r\n    },\r\n\r\n    saveToken: (token, user) => {\r\n        localStorage.setItem('authToken', token);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n    },\r\n\r\n    getUser: () => {\r\n        const user = localStorage.getItem('user');\r\n        return user ? JSON.parse(user) : null;\r\n    },\r\n};\r\n\r\n//  API\r\nexport const deckAPI = {\r\n    getAll: () => apiRequest('/api/decks'),\r\n\r\n    get: (deckId) => apiRequest(`/api/decks/${deckId}`),\r\n\r\n    create: (name, description, metadata = {}) =>\r\n        apiRequest('/api/decks', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ name, description, ...metadata }),\r\n        }),\r\n\r\n    delete: (deckId) =>\r\n        apiRequest(`/api/decks/${deckId}`, {\r\n            method: 'DELETE',\r\n        }),\r\n};\r\n\r\n//  API\r\nexport const cardAPI = {\r\n    create: (deckId, front, back) =>\r\n        apiRequest(`/api/cards`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({ deckId, front, back }),\r\n        }),\r\n    getByDeck: (deckId) => apiRequest(`/api/decks/${deckId}/cards`),\r\n    delete: (cardId) =>\r\n        apiRequest(`/api/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n        }),\r\n    update: (cardId, front, back) =>\r\n        apiRequest(`/api/cards/${cardId}`, {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ front, back }),\r\n        }),\r\n    bulkCreate: (deckId, cards) =>\r\n        apiRequest(`/api/cards/bulk`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({ deckId, cards }),\r\n        }),\r\n};\r\n\r\n//  API\r\nexport const studyAPI = {\r\n    getDueCards: (deckId) => apiRequest(`/api/study/${deckId}/due`),\r\n    getAssignedDue: () => apiRequest('/api/study/assigned/due'),\r\n    submitReview: (cardId, difficulty) =>\r\n        apiRequest('/api/study/review', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ cardId, difficulty }),\r\n        }),\r\n};\r\n\r\n//  API\r\nexport const shareAPI = {\r\n    shareDeck: (deckId) =>\r\n        apiRequest(`/api/decks/${deckId}/share`, {\r\n            method: 'POST',\r\n        }),\r\n    getSharedDeck: (shareToken) => apiRequest(`/api/shared/${shareToken}`),\r\n    importSharedDeck: (shareToken) =>\r\n        apiRequest(`/api/shared/${shareToken}/import`, {\r\n            method: 'POST',\r\n        }),\r\n};\r\n\r\n// Anki  API\r\nexport const ankiAPI = {\r\n    importDeck: (file) => {\r\n        const formData = new FormData();\r\n        formData.append('file', file);\r\n\r\n        const token = getAuthToken();\r\n        return fetch(`${API_BASE_URL}/api/anki/import`, {\r\n            method: 'POST',\r\n            headers: {\r\n                ...(token && { Authorization: `Bearer ${token}` }),\r\n            },\r\n            body: formData,\r\n        }).then((res) => {\r\n            if (!res.ok) {\r\n                return res.json().then((error) => {\r\n                    throw new Error(error.error || 'Import failed');\r\n                });\r\n            }\r\n            return res.json();\r\n        });\r\n    },\r\n};\r\n\r\n//  API (MVP)\r\nexport const recommendationsAPI = {\r\n    // opts: { my: boolean }\r\n    getRecommendations: (opts = {}) => {\r\n        const params = [];\r\n        if (opts.my) params.push('my=1');\r\n        const q = params.length ? `?${params.join('&')}` : '';\r\n        return apiRequest(`/api/recommendations${q}`);\r\n    },\r\n};\r\n\r\n//  API\r\nexport const adminAPI = {\r\n    //   \r\n    getUsers: () => apiRequest('/api/users'),\r\n\r\n    //  \r\n    addUser: (name, email, password) =>\r\n        apiRequest('/api/users', {\r\n            method: 'POST',\r\n            body: JSON.stringify({ name, email, password }),\r\n        }),\r\n\r\n    //  \r\n    deleteUser: (userId) =>\r\n        apiRequest(`/api/admin/users?userId=${userId}`, {\r\n            method: 'DELETE',\r\n        }),\r\n\r\n    //   \r\n    updateUser: (userId, updates) =>\r\n        apiRequest('/api/admin/users', {\r\n            method: 'PUT',\r\n            body: JSON.stringify({ userId, ...updates }),\r\n        }),\r\n\r\n    //  \r\n    assignToUser: (data) =>\r\n        apiRequest('/api/admin/assign', {\r\n            method: 'POST',\r\n            body: JSON.stringify(data),\r\n        }),\r\n\r\n    //  \r\n    getDashboardStats: () => apiRequest('/api/admin/stats'),\r\n\r\n    //    ()\r\n    getAllDecks: () => apiRequest('/api/admin/decks'),\r\n\r\n    //   ()\r\n    deleteDeck: (deckId) =>\r\n        apiRequest(`/api/admin/decks/${deckId}`, {\r\n            method: 'DELETE',\r\n        }),\r\n\r\n    //   \r\n    getDeckCards: (deckId) => apiRequest(`/api/decks/${deckId}/cards`),\r\n\r\n    //   \r\n    getAssignments: () => apiRequest('/api/admin/assignments'),\r\n\r\n    //  \r\n    deleteAssignment: (assignmentId) =>\r\n        apiRequest(`/api/admin/assignments/${assignmentId}`, {\r\n            method: 'DELETE',\r\n        }),\r\n\r\n    //  \r\n    getUserStats: () => apiRequest('/api/admin/user-stats'),\r\n};\r\n","//    \r\n\r\nexport const getErrorMessage = (error) => {\r\n    const message = error.message || error.toString();\r\n\r\n    //  \r\n    if (message.includes('Email already exists') || message.includes('UNIQUE constraint')) {\r\n        return '   .   .';\r\n    }\r\n\r\n    //  \r\n    if (message.includes('Invalid credentials') || message.includes('Unauthorized')) {\r\n        return '    .';\r\n    }\r\n\r\n    if (message.includes('401')) {\r\n        return ' .  .';\r\n    }\r\n\r\n    //  \r\n    if (message.includes('password') && message.includes('short')) {\r\n        return '  8  .';\r\n    }\r\n\r\n    //  \r\n    if (message.includes('Failed to fetch') || message.includes('Network')) {\r\n        return '  .';\r\n    }\r\n\r\n    // 404 \r\n    if (message.includes('404') || message.includes('not found')) {\r\n        return '    .';\r\n    }\r\n\r\n    // 500  \r\n    if (message.includes('500') || message.includes('Internal server error')) {\r\n        return '  .    .';\r\n    }\r\n\r\n    //   \r\n    if (message.includes('Deck not found')) {\r\n        return '   .';\r\n    }\r\n\r\n    if (message.includes('Card not found')) {\r\n        return '   .';\r\n    }\r\n\r\n    //   \r\n    if (message.includes('Invalid share token')) {\r\n        return '   .';\r\n    }\r\n\r\n    //  \r\n    return message || ' .  .';\r\n};\r\n\r\n//   \r\nexport const getSuccessMessage = (action, itemName = '') => {\r\n    const messages = {\r\n        create: `${itemName}() .`,\r\n        update: `${itemName}() .`,\r\n        delete: `${itemName}() .`,\r\n        import: `${itemName}() .`,\r\n        share: '  .',\r\n        copy: ' .'\r\n    };\r\n\r\n    return messages[action] || ' .';\r\n};\r\n","//  \r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { authAPI } from '../../utils/api';\r\nimport { getErrorMessage } from '../../utils/errorHandler';\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            error: '',\r\n            loading: false\r\n        };\r\n    }\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        this.setState({ error: '', loading: true });\r\n\r\n        try {\r\n            const response = await authAPI.login(this.state.email, this.state.password);\r\n            //    \r\n            authAPI.saveToken(response.token, response.user);\r\n\r\n            if (this.props.onLoginSuccess) {\r\n                this.props.onLoginSuccess();\r\n            }\r\n\r\n            //     (React Router )\r\n            this.props.history.push('/decks');\r\n        } catch (err) {\r\n            this.setState({ error: getErrorMessage(err) });\r\n        } finally {\r\n            this.setState({ loading: false });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { email, password, error, loading } = this.state;\r\n        const { onSwitchToRegister } = this.props;\r\n\r\n        return (\r\n            <div style={{ maxWidth: '400px', margin: '50px auto', padding: '20px', border: '1px solid #ddd', borderRadius: '8px', backgroundColor: '#fff' }}>\r\n                <h2 style={{ textAlign: 'center', marginBottom: '20px' }}></h2>\r\n\r\n                {error && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: '#f8d7da', color: '#721c24', border: '1px solid #f5c6cb', borderRadius: '4px' }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                        <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => this.setState({ email: e.target.value })}\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                        <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => this.setState({ password: e.target.value })}\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '10px',\r\n                            backgroundColor: loading ? '#ccc' : '#007bff',\r\n                            color: '#fff',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            fontSize: '16px',\r\n                            cursor: loading ? 'not-allowed' : 'pointer'\r\n                        }}\r\n                    >\r\n                        {loading ? ' ...' : ''}\r\n                    </button>\r\n                </form>\r\n\r\n                <div style={{ textAlign: 'center', marginTop: '15px' }}>\r\n                    <small>\r\n                         ?{' '}\r\n                        <button\r\n                            onClick={onSwitchToRegister}\r\n                            style={{\r\n                                background: 'none',\r\n                                border: 'none',\r\n                                color: '#007bff',\r\n                                textDecoration: 'underline',\r\n                                cursor: 'pointer',\r\n                                padding: 0,\r\n                                fontSize: 'inherit'\r\n                            }}\r\n                        >\r\n                            \r\n                        </button>\r\n                    </small>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst LoginWithRouter = withRouter(Login);\r\nexport { LoginWithRouter as Login };\r\n","//  \r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { authAPI } from '../../utils/api';\r\nimport { getErrorMessage } from '../../utils/errorHandler';\r\n\r\nclass Register extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            username: '',\r\n            error: '',\r\n            loading: false\r\n        };\r\n    }\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        this.setState({ error: '', loading: true });\r\n\r\n        try {\r\n            const response = await authAPI.register(this.state.email, this.state.password, this.state.username);\r\n            //    \r\n            authAPI.saveToken(response.token, response.user);\r\n\r\n            if (this.props.onRegisterSuccess) {\r\n                this.props.onRegisterSuccess();\r\n            }\r\n\r\n            //     (React Router )\r\n            this.props.history.push('/decks');\r\n        } catch (err) {\r\n            this.setState({ error: getErrorMessage(err) });\r\n        } finally {\r\n            this.setState({ loading: false });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { email, password, username, error, loading } = this.state;\r\n        const { onSwitchToLogin } = this.props;\r\n\r\n        return (\r\n            <div style={{ maxWidth: '400px', margin: '50px auto', padding: '20px', border: '1px solid #ddd', borderRadius: '8px', backgroundColor: '#fff' }}>\r\n                <h2 style={{ textAlign: 'center', marginBottom: '20px' }}></h2>\r\n\r\n                {error && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: '#f8d7da', color: '#721c24', border: '1px solid #f5c6cb', borderRadius: '4px' }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                        <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => this.setState({ email: e.target.value })}\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                        <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}> </label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={username}\r\n                            onChange={(e) => this.setState({ username: e.target.value })}\r\n                            style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                        <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => this.setState({ password: e.target.value })}\r\n                            required\r\n                            style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        style={{\r\n                            width: '100%',\r\n                            padding: '10px',\r\n                            backgroundColor: loading ? '#ccc' : '#007bff',\r\n                            color: '#fff',\r\n                            border: 'none',\r\n                            borderRadius: '4px',\r\n                            fontSize: '16px',\r\n                            cursor: loading ? 'not-allowed' : 'pointer'\r\n                        }}\r\n                    >\r\n                        {loading ? ' ...' : ''}\r\n                    </button>\r\n                </form>\r\n\r\n                <div style={{ textAlign: 'center', marginTop: '15px' }}>\r\n                    <small>\r\n                          ?{' '}\r\n                        <button\r\n                            onClick={onSwitchToLogin}\r\n                            style={{\r\n                                background: 'none',\r\n                                border: 'none',\r\n                                color: '#007bff',\r\n                                textDecoration: 'underline',\r\n                                cursor: 'pointer',\r\n                                padding: 0,\r\n                                fontSize: 'inherit'\r\n                            }}\r\n                        >\r\n                            \r\n                        </button>\r\n                    </small>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst RegisterWithRouter = withRouter(Register);\r\nexport { RegisterWithRouter as Register };\r\n","//     (Chart.js 2.x )\r\nimport React, { Component } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\n\r\nclass ProgressChart extends Component {\r\n    render() {\r\n        const { weeklyData } = this.props;\r\n\r\n        if (!weeklyData || weeklyData.length === 0) {\r\n            return (\r\n                <div style={{ padding: '20px', textAlign: 'center', color: '#6c757d' }}>\r\n                      .\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const data = {\r\n            labels: weeklyData.map(d => d.date),\r\n            datasets: [\r\n                {\r\n                    label: '  ',\r\n                    data: weeklyData.map(d => d.count),\r\n                    borderColor: 'rgb(75, 192, 192)',\r\n                    backgroundColor: 'rgba(75, 192, 192, 0.2)',\r\n                    fill: true\r\n                }\r\n            ]\r\n        };\r\n\r\n        const options = {\r\n            responsive: true,\r\n            legend: {\r\n                position: 'top',\r\n            },\r\n            title: {\r\n                display: true,\r\n                text: '  '\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true,\r\n                        stepSize: 1\r\n                    }\r\n                }]\r\n            }\r\n        };\r\n\r\n        return (\r\n            <div style={{ padding: '20px', backgroundColor: '#fff', borderRadius: '8px', border: '1px solid #ddd', marginTop: '20px' }}>\r\n                <Line data={data} options={options} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProgressChart;\r\n","//  \r\nimport React, { Component } from 'react';\r\nimport ProgressChart from './ProgressChart';\r\n\r\nclass Statistics extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            stats: null,\r\n            weeklyData: [],\r\n            loading: true,\r\n            error: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadStats();\r\n        this.loadWeeklyData();\r\n    }\r\n\r\n    loadStats = async () => {\r\n        try {\r\n            const response = await fetch('/api/stats', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n                }\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to load stats');\r\n\r\n            const data = await response.json();\r\n            this.setState({ stats: data, loading: false });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    loadWeeklyData = async () => {\r\n        try {\r\n            const response = await fetch('/api/stats/weekly', {\r\n                headers: {\r\n                    'Authorization': `Bearer ${localStorage.getItem('authToken')}`\r\n                }\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to load weekly data');\r\n\r\n            const data = await response.json();\r\n            this.setState({ weeklyData: data.weeklyData });\r\n        } catch (err) {\r\n            console.error('   :', err);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { stats, weeklyData, loading, error } = this.state;\r\n\r\n        if (loading) return <div> ...</div>;\r\n        if (error) return <div>: {error}</div>;\r\n        if (!stats) return null;\r\n\r\n        return (\r\n            <div style={{ padding: '20px', backgroundColor: '#f8f9fa', borderRadius: '8px', marginBottom: '20px' }}>\r\n                <h3 style={{ marginBottom: '15px' }}><span role=\"img\" aria-label=\"\"></span>  </h3>\r\n                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px' }}>\r\n                    <div style={{ padding: '15px', backgroundColor: '#fff', borderRadius: '4px', textAlign: 'center' }}>\r\n                        <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#007bff' }}>{stats.deckCount}</div>\r\n                        <div style={{ fontSize: '14px', color: '#6c757d', marginTop: '5px' }}> </div>\r\n                    </div>\r\n                    <div style={{ padding: '15px', backgroundColor: '#fff', borderRadius: '4px', textAlign: 'center' }}>\r\n                        <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#28a745' }}>{stats.cardCount}</div>\r\n                        <div style={{ fontSize: '14px', color: '#6c757d', marginTop: '5px' }}> </div>\r\n                    </div>\r\n                    <div style={{ padding: '15px', backgroundColor: '#fff', borderRadius: '4px', textAlign: 'center' }}>\r\n                        <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#ffc107' }}>{stats.todayReviews}</div>\r\n                        <div style={{ fontSize: '14px', color: '#6c757d', marginTop: '5px' }}> </div>\r\n                    </div>\r\n                    <div style={{ padding: '15px', backgroundColor: '#fff', borderRadius: '4px', textAlign: 'center' }}>\r\n                        <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#dc3545' }}>{stats.dueCards}</div>\r\n                        <div style={{ fontSize: '14px', color: '#6c757d', marginTop: '5px' }}> </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*     */}\r\n                <ProgressChart weeklyData={weeklyData} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Statistics;\r\n","//   \r\nimport React from 'react';\r\n\r\nconst LoadingSpinner = ({ message = ' ...', size = 'medium' }) => {\r\n    const sizes = {\r\n        small: { spinner: 24, fontSize: 12 },\r\n        medium: { spinner: 40, fontSize: 14 },\r\n        large: { spinner: 60, fontSize: 16 }\r\n    };\r\n\r\n    const currentSize = sizes[size] || sizes.medium;\r\n\r\n    return (\r\n        <div style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '40px',\r\n            textAlign: 'center'\r\n        }}>\r\n            <div style={{\r\n                width: `${currentSize.spinner}px`,\r\n                height: `${currentSize.spinner}px`,\r\n                border: '4px solid #f3f3f3',\r\n                borderTop: '4px solid #007bff',\r\n                borderRadius: '50%',\r\n                animation: 'spin 1s linear infinite'\r\n            }} />\r\n            {message && (\r\n                <p style={{\r\n                    marginTop: '15px',\r\n                    color: '#6c757d',\r\n                    fontSize: `${currentSize.fontSize}px`\r\n                }}>\r\n                    {message}\r\n                </p>\r\n            )}\r\n            <style>{`\r\n                @keyframes spin {\r\n                    0% { transform: rotate(0deg); }\r\n                    100% { transform: rotate(360deg); }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","//   \r\n\r\nexport const lightTheme = {\r\n    // \r\n    background: '#ffffff',\r\n    backgroundSecondary: '#f8f9fa',\r\n\r\n    // \r\n    text: '#212529',\r\n    textSecondary: '#6c757d',\r\n\r\n    //  \r\n    primary: '#007bff',\r\n    success: '#28a745',\r\n    danger: '#dc3545',\r\n    warning: '#ffc107',\r\n    info: '#17a2b8',\r\n\r\n    // \r\n    border: '#dee2e6',\r\n    borderLight: '#e9ecef',\r\n\r\n    // /\r\n    cardBackground: '#ffffff',\r\n    cardBorder: '#ddd',\r\n\r\n    //  \r\n    inputBackground: '#ffffff',\r\n    inputBorder: '#ddd',\r\n\r\n    // \r\n    buttonPrimary: '#007bff',\r\n    buttonSecondary: '#6c757d',\r\n    buttonSuccess: '#28a745',\r\n    buttonDanger: '#dc3545',\r\n\r\n    // \r\n    alertInfo: { bg: '#d1ecf1', text: '#0c5460', border: '#bee5eb' },\r\n    alertSuccess: { bg: '#d4edda', text: '#155724', border: '#c3e6cb' },\r\n    alertDanger: { bg: '#f8d7da', text: '#721c24', border: '#f5c6cb' },\r\n    alertWarning: { bg: '#fff3cd', text: '#856404', border: '#ffeaa7' }\r\n};\r\n\r\nexport const darkTheme = {\r\n    // \r\n    background: '#1a1a1a',\r\n    backgroundSecondary: '#2d2d2d',\r\n\r\n    // \r\n    text: '#e9ecef',\r\n    textSecondary: '#adb5bd',\r\n\r\n    //  \r\n    primary: '#0d6efd',\r\n    success: '#198754',\r\n    danger: '#dc3545',\r\n    warning: '#ffc107',\r\n    info: '#0dcaf0',\r\n\r\n    // \r\n    border: '#495057',\r\n    borderLight: '#343a40',\r\n\r\n    // /\r\n    cardBackground: '#2d2d2d',\r\n    cardBorder: '#495057',\r\n\r\n    //  \r\n    inputBackground: '#343a40',\r\n    inputBorder: '#495057',\r\n\r\n    // \r\n    buttonPrimary: '#0d6efd',\r\n    buttonSecondary: '#6c757d',\r\n    buttonSuccess: '#198754',\r\n    buttonDanger: '#dc3545',\r\n\r\n    // \r\n    alertInfo: { bg: '#0c5460', text: '#d1ecf1', border: '#0c5460' },\r\n    alertSuccess: { bg: '#155724', text: '#d4edda', border: '#155724' },\r\n    alertDanger: { bg: '#721c24', text: '#f8d7da', border: '#721c24' },\r\n    alertWarning: { bg: '#856404', text: '#fff3cd', border: '#856404' }\r\n};\r\n","//  Context\r\nimport React, { Component } from 'react';\r\nimport { lightTheme, darkTheme } from '../styles/themes';\r\n\r\nexport const ThemeContext = React.createContext();\r\n\r\nexport class ThemeProvider extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // localStorage  \r\n        const savedTheme = localStorage.getItem('theme') || 'light';\r\n\r\n        this.state = {\r\n            theme: savedTheme,\r\n            colors: savedTheme === 'dark' ? darkTheme : lightTheme\r\n        };\r\n    }\r\n\r\n    toggleTheme = () => {\r\n        const newTheme = this.state.theme === 'light' ? 'dark' : 'light';\r\n        const newColors = newTheme === 'dark' ? darkTheme : lightTheme;\r\n\r\n        this.setState({\r\n            theme: newTheme,\r\n            colors: newColors\r\n        });\r\n\r\n        // localStorage \r\n        localStorage.setItem('theme', newTheme);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <ThemeContext.Provider value={{\r\n                theme: this.state.theme,\r\n                colors: this.state.colors,\r\n                toggleTheme: this.toggleTheme\r\n            }}>\r\n                {this.props.children}\r\n            </ThemeContext.Provider>\r\n        );\r\n    }\r\n}\r\n","//    \r\nimport React, { Component } from 'react';\r\nimport { ThemeContext } from '../contexts/ThemeContext';\r\n\r\nclass ThemeToggle extends Component {\r\n    render() {\r\n        return (\r\n            <ThemeContext.Consumer>\r\n                {({ theme, toggleTheme, colors }) => (\r\n                    <button\r\n                        onClick={toggleTheme}\r\n                        style={{\r\n                            padding: '8px 16px',\r\n                            backgroundColor: colors.backgroundSecondary,\r\n                            color: colors.text,\r\n                            border: `1px solid ${colors.border}`,\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                        }}\r\n                        title={theme === 'light' ? '  ' : '  '}\r\n                    >\r\n                        {theme === 'light' ? '' : ''}\r\n                        {theme === 'light' ? '' : ''}\r\n                    </button>\r\n                )}\r\n            </ThemeContext.Consumer>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ThemeToggle;\r\n","//   \r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { deckAPI, shareAPI } from '../utils/api';\r\nimport Statistics from './Statistics';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport ThemeToggle from './ThemeToggle';\r\nimport { ThemeContext } from '../contexts/ThemeContext';\r\nimport JSZip from 'jszip';\r\n// sql.js CDN   (  )\r\n\r\nclass DeckList extends Component {\r\n    static contextType = ThemeContext;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            decks: [],\r\n            loading: true,\r\n            error: '',\r\n            success: '',\r\n            newDeckName: '',\r\n            showCreateForm: false,\r\n            showImportForm: false,\r\n            showAnkiImport: false,\r\n            shareToken: '',\r\n            ankiFile: null,\r\n            ankiImporting: false,\r\n            searchQuery: '',\r\n            sortBy: 'created'\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadDecks();\r\n    }\r\n\r\n    loadDecks = async () => {\r\n        try {\r\n            const response = await deckAPI.getAll();\r\n            this.setState({ decks: response.decks, loading: false });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    handleLogout = () => {\r\n        localStorage.clear();\r\n        window.location.href = '/login';\r\n    };\r\n\r\n    handleCreateDeck = async (e) => {\r\n        e.preventDefault();\r\n        const { newDeckName } = this.state;\r\n\r\n        if (!newDeckName.trim()) return;\r\n\r\n        try {\r\n            await deckAPI.create(newDeckName, '');\r\n            this.setState({ newDeckName: '', showCreateForm: false, success: ' !' });\r\n            this.loadDecks();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleImportDeck = async (e) => {\r\n        e.preventDefault();\r\n        const { shareToken } = this.state;\r\n\r\n        if (!shareToken.trim()) return;\r\n\r\n        try {\r\n            const result = await shareAPI.importSharedDeck(shareToken);\r\n            this.setState({ shareToken: '', showImportForm: false, success: result.message || ' !' });\r\n            this.loadDecks();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleAnkiImport = async (e) => {\r\n        e.preventDefault();\r\n        const { ankiFile } = this.state;\r\n\r\n        if (!ankiFile) {\r\n            this.setState({ error: 'Anki  .' });\r\n            return;\r\n        }\r\n\r\n        this.setState({ ankiImporting: true, error: '' });\r\n\r\n        try {\r\n            // 1.  .apkg (ZIP)  \r\n            const arrayBuffer = await ankiFile.arrayBuffer();\r\n            const zip = await JSZip.loadAsync(arrayBuffer);\r\n\r\n            // 2. collection.anki2  collection.anki21  \r\n            let dbFile = zip.file('collection.anki2') || zip.file('collection.anki21');\r\n            if (!dbFile) {\r\n                throw new Error('Anki    .');\r\n            }\r\n\r\n            // 3. SQLite  \r\n            const dbData = await dbFile.async('uint8array');\r\n\r\n            // 4. sql.js CDN  \r\n            // eslint-disable-next-line no-undef\r\n            if (!window.initSqlJs) {\r\n                await new Promise((resolve, reject) => {\r\n                    const script = document.createElement('script');\r\n                    script.src = 'https://sql.js.org/dist/sql-wasm.js';\r\n                    script.onload = resolve;\r\n                    script.onerror = reject;\r\n                    document.head.appendChild(script);\r\n                });\r\n            }\r\n            // eslint-disable-next-line no-undef\r\n            const SQL = await window.initSqlJs({\r\n                locateFile: file => `https://sql.js.org/dist/${file}`\r\n            });\r\n            const db = new SQL.Database(dbData);\r\n\r\n            // 5. notes   \r\n            const results = db.exec(\"SELECT flds FROM notes\");\r\n            if (!results.length || !results[0].values.length) {\r\n                throw new Error('  .');\r\n            }\r\n\r\n            const cards = [];\r\n            for (const row of results[0].values) {\r\n                const flds = row[0];\r\n                const parts = flds.split('\\x1f'); // Unit Separator\r\n                if (parts.length >= 2) {\r\n                    const front = this.cleanAnkiText(parts[0]);\r\n                    const back = this.cleanAnkiText(parts[1]);\r\n                    if (front && back) {\r\n                        cards.push({ front, back });\r\n                    }\r\n                }\r\n            }\r\n\r\n            db.close();\r\n\r\n            if (cards.length === 0) {\r\n                throw new Error('    .');\r\n            }\r\n\r\n            // 6.    \r\n            const token = localStorage.getItem('authToken');\r\n            const API_BASE = process.env.NODE_ENV === 'production' ? '' : 'http://localhost:8788';\r\n            const deckName = ankiFile.name.replace('.apkg', '').replace(/_/g, ' ');\r\n\r\n            const response = await fetch(`${API_BASE}/api/anki/import-cards`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    deckName,\r\n                    cards: cards.slice(0, 1000) //  1000\r\n                })\r\n            });\r\n\r\n            const result = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(result.error || 'Anki   ');\r\n            }\r\n\r\n            this.setState({\r\n                ankiFile: null,\r\n                showAnkiImport: false,\r\n                ankiImporting: false,\r\n                success: result.message || `${deckName}  ! (${cards.length})`\r\n            });\r\n            this.loadDecks();\r\n            setTimeout(() => this.setState({ success: '' }), 5000);\r\n        } catch (err) {\r\n            console.error('Anki import error:', err);\r\n            this.setState({ error: err.message, ankiImporting: false });\r\n        }\r\n    };\r\n\r\n    // Anki   (HTML   )\r\n    cleanAnkiText = (text) => {\r\n        if (!text) return '';\r\n        return text\r\n            .replace(/<[^>]+>/g, '') // HTML  \r\n            .replace(/\\[sound:[^\\]]+\\]/g, '') //   \r\n            .replace(/&nbsp;/g, ' ')\r\n            .replace(/&amp;/g, '&')\r\n            .replace(/&lt;/g, '<')\r\n            .replace(/&gt;/g, '>')\r\n            .replace(/\\s+/g, ' ')\r\n            .trim();\r\n    };\r\n\r\n    openAnkiWeb = () => {\r\n        window.open('https://ankiweb.net/shared/decks', '_blank');\r\n    };\r\n\r\n    handleDeleteDeck = async (e, deckId, deckName) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (!window.confirm(`\"${deckName}\"  ?\\n    .`)) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await deckAPI.delete(deckId);\r\n            this.setState({ success: ' .' });\r\n            this.loadDecks();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    //      \r\n    getFilteredAndSortedDecks = () => {\r\n        const { decks, searchQuery, sortBy } = this.state;\r\n\r\n        //  \r\n        let filtered = decks;\r\n        if (searchQuery.trim()) {\r\n            const query = searchQuery.toLowerCase();\r\n            filtered = decks.filter(deck =>\r\n                deck.name.toLowerCase().includes(query) ||\r\n                (deck.description && deck.description.toLowerCase().includes(query))\r\n            );\r\n        }\r\n\r\n        // \r\n        const sorted = [...filtered].sort((a, b) => {\r\n            switch (sortBy) {\r\n                case 'name':\r\n                    return a.name.localeCompare(b.name);\r\n                case 'created':\r\n                    return new Date(b.created_at) - new Date(a.created_at);\r\n                case 'cards':\r\n                    return (b.card_count || 0) - (a.card_count || 0);\r\n                default:\r\n                    return 0;\r\n            }\r\n        });\r\n\r\n        return sorted;\r\n    };\r\n\r\n    render() {\r\n        const { loading, error, success, newDeckName, showCreateForm, showImportForm, showAnkiImport, shareToken, searchQuery, sortBy } = this.state;\r\n        const { colors } = this.context;\r\n\r\n        if (loading) {\r\n            return <LoadingSpinner message=\"   ...\" />;\r\n        }\r\n\r\n        const filteredDecks = this.getFilteredAndSortedDecks();\r\n\r\n        return (\r\n            <div style={{ maxWidth: '800px', margin: '20px auto', padding: '20px', backgroundColor: colors.background, color: colors.text, minHeight: '100vh' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\r\n                    <h2 style={{ color: colors.text }}> </h2>\r\n                    <div style={{ display: 'flex', gap: '10px' }}>\r\n                        <ThemeToggle />\r\n                        <button\r\n                            onClick={this.handleLogout}\r\n                            style={{ padding: '8px 16px', backgroundColor: colors.buttonDanger, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                        >\r\n                            \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: colors.alertDanger.bg, color: colors.alertDanger.text, border: `1px solid ${colors.alertDanger.border}`, borderRadius: '4px' }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                {success && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: colors.alertSuccess.bg, color: colors.alertSuccess.text, border: `1px solid ${colors.alertSuccess.border}`, borderRadius: '4px' }}>\r\n                        {success}\r\n                    </div>\r\n                )}\r\n\r\n                <Statistics />\r\n\r\n                {/*    */}\r\n                <div style={{ marginBottom: '20px', display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"   (  )...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => this.setState({ searchQuery: e.target.value })}\r\n                        style={{\r\n                            flex: 1,\r\n                            padding: '10px',\r\n                            backgroundColor: colors.inputBackground,\r\n                            color: colors.text,\r\n                            border: `1px solid ${colors.inputBorder}`,\r\n                            borderRadius: '4px',\r\n                            fontSize: '14px'\r\n                        }}\r\n                    />\r\n                    <select\r\n                        value={sortBy}\r\n                        onChange={(e) => this.setState({ sortBy: e.target.value })}\r\n                        style={{\r\n                            padding: '10px',\r\n                            backgroundColor: colors.inputBackground,\r\n                            color: colors.text,\r\n                            border: `1px solid ${colors.inputBorder}`,\r\n                            borderRadius: '4px',\r\n                            fontSize: '14px',\r\n                            cursor: 'pointer'\r\n                        }}\r\n                    >\r\n                        <option value=\"created\"></option>\r\n                        <option value=\"name\"></option>\r\n                        <option value=\"cards\"> </option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div style={{ marginBottom: '20px', display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n                    {!showCreateForm && !showImportForm && !showAnkiImport && (\r\n                        <>\r\n                            <button\r\n                                onClick={() => this.setState({ showCreateForm: true })}\r\n                                style={{ padding: '10px 20px', backgroundColor: colors.buttonPrimary, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                +   \r\n                            </button>\r\n                            <button\r\n                                onClick={() => this.setState({ showImportForm: true })}\r\n                                style={{ padding: '10px 20px', backgroundColor: colors.buttonSuccess, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                <span role=\"img\" aria-label=\"\"></span>   \r\n                            </button>\r\n                            <button\r\n                                onClick={() => this.setState({ showAnkiImport: true })}\r\n                                style={{ padding: '10px 20px', backgroundColor: '#6f42c1', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                <span role=\"img\" aria-label=\"Anki\"></span> Anki  \r\n                            </button>\r\n                        </>\r\n                    )}\r\n\r\n                    {showCreateForm && (\r\n                        <div style={{ padding: '15px', border: `1px solid ${colors.border}`, borderRadius: '4px', backgroundColor: colors.backgroundSecondary, flex: 1 }}>\r\n                            <h5 style={{ color: colors.text }}>  </h5>\r\n                            <form onSubmit={this.handleCreateDeck}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\" \"\r\n                                    value={newDeckName}\r\n                                    onChange={(e) => this.setState({ newDeckName: e.target.value })}\r\n                                    autoFocus\r\n                                    style={{ width: '100%', padding: '8px', marginBottom: '10px', backgroundColor: colors.inputBackground, color: colors.text, border: `1px solid ${colors.inputBorder}`, borderRadius: '4px' }}\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: colors.buttonPrimary, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => this.setState({ showCreateForm: false })}\r\n                                    style={{ padding: '8px 16px', backgroundColor: colors.buttonSecondary, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    )}\r\n\r\n                    {showImportForm && (\r\n                        <div style={{ padding: '15px', border: `1px solid ${colors.border}`, borderRadius: '4px', backgroundColor: colors.backgroundSecondary, flex: 1 }}>\r\n                            <h5 style={{ color: colors.text }}>  </h5>\r\n                            <p style={{ fontSize: '13px', color: colors.textSecondary, marginBottom: '10px' }}>\r\n                                Pangstudy      .\r\n                            </p>\r\n                            <form onSubmit={this.handleImportDeck}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"    \"\r\n                                    value={shareToken}\r\n                                    onChange={(e) => {\r\n                                        const value = e.target.value;\r\n                                        const tokenMatch = value.match(/shared\\/([a-zA-Z0-9-]+)/);\r\n                                        this.setState({ shareToken: tokenMatch ? tokenMatch[1] : value });\r\n                                    }}\r\n                                    autoFocus\r\n                                    style={{ width: '100%', padding: '8px', marginBottom: '10px', backgroundColor: colors.inputBackground, color: colors.text, border: `1px solid ${colors.inputBorder}`, borderRadius: '4px' }}\r\n                                />\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: colors.buttonSuccess, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => this.setState({ showImportForm: false })}\r\n                                    style={{ padding: '8px 16px', backgroundColor: colors.buttonSecondary, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    )}\r\n\r\n                    {showAnkiImport && (\r\n                        <div style={{ padding: '15px', border: `1px solid ${colors.border}`, borderRadius: '4px', backgroundColor: colors.backgroundSecondary, flex: 1 }}>\r\n                            <h5 style={{ color: colors.text, marginBottom: '10px' }}>Anki  </h5>\r\n\r\n                            <div style={{\r\n                                padding: '12px',\r\n                                backgroundColor: colors.alertInfo?.bg || '#e7f3ff',\r\n                                border: `1px solid ${colors.alertInfo?.border || '#b6d4fe'}`,\r\n                                borderRadius: '6px',\r\n                                marginBottom: '15px'\r\n                            }}>\r\n                                <p style={{ fontSize: '13px', color: colors.alertInfo?.text || '#084298', margin: '0 0 8px 0', fontWeight: '500' }}>\r\n                                    Anki (.apkg)     .\r\n                                </p>\r\n                                <p style={{ fontSize: '12px', color: colors.alertInfo?.text || '#084298', margin: '0 0 8px 0' }}>\r\n                                    <strong>Anki   :</strong>\r\n                                </p>\r\n                                <ol style={{ fontSize: '12px', color: colors.alertInfo?.text || '#084298', margin: '0', paddingLeft: '20px' }}>\r\n                                    <li style={{ marginBottom: '4px' }}>AnkiWeb      </li>\r\n                                    <li style={{ marginBottom: '4px' }}>.apkg  </li>\r\n                                    <li>  </li>\r\n                                </ol>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={this.openAnkiWeb}\r\n                                    style={{\r\n                                        marginTop: '10px',\r\n                                        padding: '6px 12px',\r\n                                        backgroundColor: '#0d6efd',\r\n                                        color: '#fff',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '12px'\r\n                                    }}\r\n                                >\r\n                                    AnkiWeb    \r\n                                </button>\r\n                            </div>\r\n\r\n                            <form onSubmit={this.handleAnkiImport}>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\".apkg\"\r\n                                    onChange={(e) => this.setState({ ankiFile: e.target.files[0] })}\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        padding: '8px',\r\n                                        marginBottom: '10px',\r\n                                        backgroundColor: colors.inputBackground,\r\n                                        color: colors.text,\r\n                                        border: `1px solid ${colors.inputBorder}`,\r\n                                        borderRadius: '4px'\r\n                                    }}\r\n                                />\r\n                                <p style={{ fontSize: '11px', color: colors.textSecondary, marginBottom: '10px' }}>\r\n                                    * .apkg  .\r\n                                </p>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={this.state.ankiImporting}\r\n                                    style={{\r\n                                        padding: '8px 16px',\r\n                                        marginRight: '10px',\r\n                                        backgroundColor: this.state.ankiImporting ? '#999' : '#6f42c1',\r\n                                        color: '#fff',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        cursor: this.state.ankiImporting ? 'not-allowed' : 'pointer'\r\n                                    }}\r\n                                >\r\n                                    {this.state.ankiImporting ? ' ...' : ''}\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => this.setState({ showAnkiImport: false, ankiFile: null })}\r\n                                    style={{ padding: '8px 16px', backgroundColor: colors.buttonSecondary, color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {filteredDecks.length === 0 ? (\r\n                    <div style={{ padding: '15px', backgroundColor: colors.alertInfo.bg, color: colors.alertInfo.text, border: `1px solid ${colors.alertInfo.border}`, borderRadius: '4px' }}>\r\n                        {searchQuery ? '  .' : ' .      !'}\r\n                    </div>\r\n                ) : (\r\n                    <div>\r\n                        {filteredDecks.map(deck => (\r\n                            <div\r\n                                key={deck.id}\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    padding: '15px',\r\n                                    marginBottom: '10px',\r\n                                    border: `1px solid ${colors.cardBorder}`,\r\n                                    borderRadius: '4px',\r\n                                    backgroundColor: colors.cardBackground,\r\n                                    alignItems: 'center'\r\n                                }}\r\n                            >\r\n                                <Link\r\n                                    to={`/decks/${deck.id}`}\r\n                                    style={{\r\n                                        flex: 1,\r\n                                        textDecoration: 'none',\r\n                                        color: colors.text\r\n                                    }}\r\n                                >\r\n                                    <h4 style={{ margin: '0 0 5px 0', color: colors.text }}>{deck.name}</h4>\r\n                                    <p style={{ margin: 0, color: colors.textSecondary, fontSize: '14px' }}>\r\n                                         {deck.card_count || 0}\r\n                                    </p>\r\n                                </Link>\r\n                                <button\r\n                                    onClick={(e) => this.handleDeleteDeck(e, deck.id, deck.name)}\r\n                                    style={{\r\n                                        padding: '6px 12px',\r\n                                        backgroundColor: colors.buttonDanger,\r\n                                        color: '#fff',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: '12px'\r\n                                    }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DeckList;\r\n","//      \r\nimport React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { deckAPI, cardAPI, shareAPI } from '../utils/api';\r\n\r\nclass DeckDetail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            deck: null,\r\n            cards: [],\r\n            loading: true,\r\n            error: '',\r\n            success: '',\r\n            showAddForm: false,\r\n            showShareModal: false,\r\n            showEditDeck: false,\r\n            showCsvImport: false,\r\n            editingCard: null,\r\n            shareUrl: '',\r\n            newCard: { front: '', back: '' },\r\n            editDeckName: '',\r\n            editDeckDescription: '',\r\n            csvText: '',\r\n            csvImporting: false\r\n        };\r\n        this.fileInputRef = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadDeckAndCards();\r\n    }\r\n\r\n    loadDeckAndCards = async () => {\r\n        const { deckId } = this.props.match.params;\r\n        try {\r\n            this.setState({ loading: true });\r\n            const [deckData, cardsData] = await Promise.all([\r\n                deckAPI.get(deckId),\r\n                cardAPI.getByDeck(deckId)\r\n            ]);\r\n            this.setState({\r\n                deck: deckData.deck,\r\n                cards: cardsData.cards || [],\r\n                editDeckName: deckData.deck.name,\r\n                editDeckDescription: deckData.deck.description || '',\r\n                loading: false\r\n            });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    handleAddCard = async (e) => {\r\n        e.preventDefault();\r\n        const { deckId } = this.props.match.params;\r\n        const { newCard } = this.state;\r\n\r\n        if (!newCard.front.trim() || !newCard.back.trim()) return;\r\n\r\n        try {\r\n            await cardAPI.create(deckId, newCard.front, newCard.back);\r\n            this.setState({\r\n                newCard: { front: '', back: '' },\r\n                showAddForm: false,\r\n                success: ' !'\r\n            });\r\n            this.loadDeckAndCards();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleShareDeck = async () => {\r\n        const { deckId } = this.props.match.params;\r\n        try {\r\n            const result = await shareAPI.shareDeck(deckId);\r\n            this.setState({\r\n                showShareModal: true,\r\n                shareUrl: result.shareUrl\r\n            });\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleCopyShareLink = () => {\r\n        const { shareUrl } = this.state;\r\n        navigator.clipboard.writeText(shareUrl).then(() => {\r\n            this.setState({ success: '  !' });\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        });\r\n    };\r\n\r\n    handleEditDeck = async (e) => {\r\n        e.preventDefault();\r\n        const { deckId } = this.props.match.params;\r\n        const { editDeckName, editDeckDescription } = this.state;\r\n\r\n        if (!editDeckName.trim()) return;\r\n\r\n        try {\r\n            await deckAPI.update(deckId, editDeckName, editDeckDescription);\r\n            this.setState({\r\n                showEditDeck: false,\r\n                success: ' !'\r\n            });\r\n            this.loadDeckAndCards();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleDeleteCard = async (cardId) => {\r\n        if (!window.confirm('  ?')) return;\r\n\r\n        try {\r\n            await cardAPI.delete(cardId);\r\n            this.setState({ success: ' !' });\r\n            this.loadDeckAndCards();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    handleEditCard = (card) => {\r\n        this.setState({\r\n            editingCard: { ...card },\r\n            showAddForm: false\r\n        });\r\n    };\r\n\r\n    // CSV   \r\n    handleCsvFileSelect = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            this.setState({ csvText: event.target.result });\r\n        };\r\n        reader.readAsText(file, 'UTF-8');\r\n    };\r\n\r\n    // CSV    \r\n    handleCsvImport = async () => {\r\n        const { csvText } = this.state;\r\n        const { deckId } = this.props.match.params;\r\n\r\n        if (!csvText.trim()) {\r\n            this.setState({ error: 'CSV    .' });\r\n            return;\r\n        }\r\n\r\n        this.setState({ csvImporting: true, error: '' });\r\n\r\n        try {\r\n            // CSV \r\n            const lines = csvText.trim().split('\\n');\r\n            const cards = [];\r\n\r\n            for (let i = 0; i < lines.length; i++) {\r\n                const line = lines[i].trim();\r\n                if (!line) continue;\r\n\r\n                //     (front,back)\r\n                if (i === 0 && line.toLowerCase().includes('front') && line.toLowerCase().includes('back')) {\r\n                    continue; //  \r\n                }\r\n\r\n                //   (   )\r\n                const parts = this.parseCsvLine(line);\r\n\r\n                if (parts.length >= 2) {\r\n                    const front = parts[0].trim();\r\n                    const back = parts[1].trim();\r\n\r\n                    if (front && back) {\r\n                        cards.push({ front, back });\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (cards.length === 0) {\r\n                this.setState({ error: '  . : ,', csvImporting: false });\r\n                return;\r\n            }\r\n\r\n            // API  - bulk create\r\n            await cardAPI.bulkCreate(deckId, cards);\r\n\r\n            this.setState({\r\n                showCsvImport: false,\r\n                csvText: '',\r\n                success: `${cards.length}  !`,\r\n                csvImporting: false\r\n            });\r\n            this.loadDeckAndCards();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n\r\n        } catch (err) {\r\n            this.setState({ error: err.message || 'CSV  ', csvImporting: false });\r\n        }\r\n    };\r\n\r\n    // CSV   ( )\r\n    parseCsvLine = (line) => {\r\n        const result = [];\r\n        let current = '';\r\n        let inQuotes = false;\r\n\r\n        for (let i = 0; i < line.length; i++) {\r\n            const char = line[i];\r\n\r\n            if (char === '\"') {\r\n                inQuotes = !inQuotes;\r\n            } else if (char === ',' && !inQuotes) {\r\n                result.push(current.replace(/^\"|\"$/g, ''));\r\n                current = '';\r\n            } else {\r\n                current += char;\r\n            }\r\n        }\r\n        result.push(current.replace(/^\"|\"$/g, ''));\r\n\r\n        return result;\r\n    };\r\n\r\n    handleUpdateCard = async (e) => {\r\n        e.preventDefault();\r\n        const { editingCard } = this.state;\r\n\r\n        if (!editingCard.front.trim() || !editingCard.back.trim()) return;\r\n\r\n        try {\r\n            await cardAPI.update(editingCard.id, editingCard.front, editingCard.back);\r\n            this.setState({\r\n                editingCard: null,\r\n                success: ' !'\r\n            });\r\n            this.loadDeckAndCards();\r\n            setTimeout(() => this.setState({ success: '' }), 3000);\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { deck, cards, loading, error, success, showAddForm, showShareModal, showEditDeck, showCsvImport, editingCard, shareUrl, newCard, editDeckName, editDeckDescription, csvText, csvImporting } = this.state;\r\n\r\n        if (loading) {\r\n            return <div style={{ textAlign: 'center', marginTop: '50px' }}> ...</div>;\r\n        }\r\n\r\n        return (\r\n            <div style={{ maxWidth: '800px', margin: '20px auto', padding: '20px' }}>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                    <Link\r\n                        to=\"/decks\"\r\n                        style={{\r\n                            display: 'inline-block',\r\n                            padding: '8px 16px',\r\n                            marginBottom: '15px',\r\n                            backgroundColor: '#6c757d',\r\n                            color: '#fff',\r\n                            textDecoration: 'none',\r\n                            borderRadius: '4px'\r\n                        }}\r\n                    >\r\n                          \r\n                    </Link>\r\n                    {!showEditDeck ? (\r\n                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                            <div>\r\n                                <h2 style={{ margin: '0 0 5px 0' }}>{deck && deck.name}</h2>\r\n                                {deck && deck.description && <p style={{ color: '#6c757d', margin: 0 }}>{deck.description}</p>}\r\n                            </div>\r\n                            <div style={{ display: 'flex', gap: '10px' }}>\r\n                                <button\r\n                                    onClick={() => this.props.history.push(`/study/${deck.id}`)}\r\n                                    style={{ padding: '8px 16px', backgroundColor: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    <span role=\"img\" aria-label=\"\"></span> \r\n                                </button>\r\n                                <button\r\n                                    onClick={() => this.setState({ showEditDeck: true })}\r\n                                    style={{ padding: '8px 16px', backgroundColor: '#ffc107', color: '#000', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    <span role=\"img\" aria-label=\"\"></span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={this.handleShareDeck}\r\n                                    style={{ padding: '8px 16px', backgroundColor: '#17a2b8', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    <span role=\"img\" aria-label=\"\"></span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <form onSubmit={this.handleEditDeck} style={{ padding: '15px', border: '1px solid #ddd', borderRadius: '4px', backgroundColor: '#f8f9fa' }}>\r\n                            <h5> </h5>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\" \"\r\n                                value={editDeckName}\r\n                                onChange={(e) => this.setState({ editDeckName: e.target.value })}\r\n                                style={{ width: '100%', padding: '8px', marginBottom: '10px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n                            />\r\n                            <textarea\r\n                                placeholder=\" ()\"\r\n                                value={editDeckDescription}\r\n                                onChange={(e) => this.setState({ editDeckDescription: e.target.value })}\r\n                                rows={2}\r\n                                style={{ width: '100%', padding: '8px', marginBottom: '10px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n                            />\r\n                            <button type=\"submit\" style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\r\n                                \r\n                            </button>\r\n                            <button type=\"button\" onClick={() => this.setState({ showEditDeck: false, editDeckName: deck.name, editDeckDescription: deck.description || '' })} style={{ padding: '8px 16px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\r\n                                \r\n                            </button>\r\n                        </form>\r\n                    )}\r\n                </div>\r\n\r\n                {error && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: '#f8d7da', color: '#721c24', border: '1px solid #f5c6cb', borderRadius: '4px' }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                {success && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: '#d4edda', color: '#155724', border: '1px solid #c3e6cb', borderRadius: '4px' }}>\r\n                        {success}\r\n                    </div>\r\n                )}\r\n\r\n                {showShareModal && (\r\n                    <div style={{\r\n                        position: 'fixed',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        backgroundColor: 'rgba(0,0,0,0.5)',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        zIndex: 1000\r\n                    }}>\r\n                        <div style={{\r\n                            backgroundColor: '#fff',\r\n                            padding: '30px',\r\n                            borderRadius: '8px',\r\n                            maxWidth: '500px',\r\n                            width: '90%'\r\n                        }}>\r\n                            <h3>  </h3>\r\n                            <p>         :</p>\r\n                            <div style={{\r\n                                padding: '10px',\r\n                                backgroundColor: '#f8f9fa',\r\n                                border: '1px solid #ddd',\r\n                                borderRadius: '4px',\r\n                                marginBottom: '15px',\r\n                                wordBreak: 'break-all'\r\n                            }}>\r\n                                {shareUrl}\r\n                            </div>\r\n                            <div style={{ display: 'flex', gap: '10px' }}>\r\n                                <button\r\n                                    onClick={this.handleCopyShareLink}\r\n                                    style={{ flex: 1, padding: '10px', backgroundColor: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    <span role=\"img\" aria-label=\"\"></span>  \r\n                                </button>\r\n                                <button\r\n                                    onClick={() => this.setState({ showShareModal: false })}\r\n                                    style={{ flex: 1, padding: '10px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div style={{ marginBottom: '20px', display: 'flex', gap: '10px' }}>\r\n                    {!showAddForm && !showCsvImport ? (\r\n                        <>\r\n                            <button\r\n                                onClick={() => this.setState({ showAddForm: true, showCsvImport: false })}\r\n                                style={{ padding: '10px 20px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                +  \r\n                            </button>\r\n                            <button\r\n                                onClick={() => this.setState({ showCsvImport: true, showAddForm: false })}\r\n                                style={{ padding: '10px 20px', backgroundColor: '#17a2b8', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                CSV \r\n                            </button>\r\n                        </>\r\n                    ) : showCsvImport ? (\r\n                        <div style={{ width: '100%', padding: '15px', border: '1px solid #17a2b8', borderRadius: '4px', backgroundColor: '#e7f5f7' }}>\r\n                            <h5 style={{ marginBottom: '10px' }}>CSV   </h5>\r\n                            <p style={{ fontSize: '14px', color: '#666', marginBottom: '10px' }}>\r\n                                : <code>,</code> (  )<br/>\r\n                                : <code>apple,</code>\r\n                            </p>\r\n\r\n                            <div style={{ marginBottom: '10px' }}>\r\n                                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>CSV  </label>\r\n                                <input\r\n                                    type=\"file\"\r\n                                    accept=\".csv,.txt\"\r\n                                    onChange={this.handleCsvFileSelect}\r\n                                    ref={this.fileInputRef}\r\n                                    style={{ marginBottom: '10px' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <div style={{ marginBottom: '10px' }}>\r\n                                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>  </label>\r\n                                <textarea\r\n                                    rows={8}\r\n                                    placeholder={\"apple,\\nbanana,\\nhappiness,\"}\r\n                                    value={csvText}\r\n                                    onChange={(e) => this.setState({ csvText: e.target.value })}\r\n                                    style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontFamily: 'monospace', fontSize: '13px' }}\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={this.handleCsvImport}\r\n                                disabled={csvImporting || !csvText.trim()}\r\n                                style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: csvImporting ? 'not-allowed' : 'pointer', opacity: csvImporting ? 0.7 : 1 }}\r\n                            >\r\n                                {csvImporting ? ' ...' : ''}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => this.setState({ showCsvImport: false, csvText: '' })}\r\n                                style={{ padding: '8px 16px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                            >\r\n                                \r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div style={{ padding: '15px', border: '1px solid #ddd', borderRadius: '4px', backgroundColor: '#f8f9fa' }}>\r\n                            <h5>  </h5>\r\n                            <form onSubmit={this.handleAddCard}>\r\n                                <div style={{ marginBottom: '15px' }}>\r\n                                    <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}> ()</label>\r\n                                    <textarea\r\n                                        rows={3}\r\n                                        placeholder=\": Hello\"\r\n                                        value={newCard.front}\r\n                                        onChange={(e) => this.setState({ newCard: { ...newCard, front: e.target.value } })}\r\n                                        autoFocus\r\n                                        style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                                    />\r\n                                </div>\r\n                                <div style={{ marginBottom: '15px' }}>\r\n                                    <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}> ()</label>\r\n                                    <textarea\r\n                                        rows={3}\r\n                                        placeholder=\": \"\r\n                                        value={newCard.back}\r\n                                        onChange={(e) => this.setState({ newCard: { ...newCard, back: e.target.value } })}\r\n                                        style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px', fontSize: '14px' }}\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => this.setState({ showAddForm: false })}\r\n                                    style={{ padding: '8px 16px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\r\n                                >\r\n                                    \r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <h4 style={{ marginBottom: '15px' }}>  ({cards.length})</h4>\r\n\r\n                {editingCard && (\r\n                    <div style={{ padding: '15px', marginBottom: '20px', border: '1px solid #ffc107', borderRadius: '4px', backgroundColor: '#fff3cd' }}>\r\n                        <h5> </h5>\r\n                        <form onSubmit={this.handleUpdateCard}>\r\n                            <div style={{ marginBottom: '15px' }}>\r\n                                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                                <textarea\r\n                                    rows={3}\r\n                                    value={editingCard.front}\r\n                                    onChange={(e) => this.setState({ editingCard: { ...editingCard, front: e.target.value } })}\r\n                                    style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n                                />\r\n                            </div>\r\n                            <div style={{ marginBottom: '15px' }}>\r\n                                <label style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}></label>\r\n                                <textarea\r\n                                    rows={3}\r\n                                    value={editingCard.back}\r\n                                    onChange={(e) => this.setState({ editingCard: { ...editingCard, back: e.target.value } })}\r\n                                    style={{ width: '100%', padding: '8px', border: '1px solid #ddd', borderRadius: '4px' }}\r\n                                />\r\n                            </div>\r\n                            <button type=\"submit\" style={{ padding: '8px 16px', marginRight: '10px', backgroundColor: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\r\n                                \r\n                            </button>\r\n                            <button type=\"button\" onClick={() => this.setState({ editingCard: null })} style={{ padding: '8px 16px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\r\n                                \r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                )}\r\n\r\n                {cards.length === 0 ? (\r\n                    <div style={{ padding: '15px', backgroundColor: '#d1ecf1', color: '#0c5460', border: '1px solid #bee5eb', borderRadius: '4px' }}>\r\n                         .  !\r\n                    </div>\r\n                ) : (\r\n                    <div>\r\n                        {cards.map(card => (\r\n                            <div\r\n                                key={card.id}\r\n                                style={{ padding: '15px', marginBottom: '10px', border: '1px solid #ddd', borderRadius: '4px', backgroundColor: '#fff' }}\r\n                            >\r\n                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                    <div style={{ flex: 1, display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                                        <div>\r\n                                            <strong>:</strong>\r\n                                            <p style={{ margin: '5px 0 0 0' }}>{card.front}</p>\r\n                                        </div>\r\n                                        <div>\r\n                                            <strong>:</strong>\r\n                                            <p style={{ margin: '5px 0 0 0' }}>{card.back}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div style={{ display: 'flex', gap: '5px', marginLeft: '10px' }}>\r\n                                        <button\r\n                                            onClick={() => this.handleEditCard(card)}\r\n                                            style={{ padding: '5px 10px', backgroundColor: '#ffc107', color: '#000', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n                                            title=\"\"\r\n                                        >\r\n                                            <span role=\"img\" aria-label=\"\"></span>\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => this.handleDeleteCard(card.id)}\r\n                                            style={{ padding: '5px 10px', backgroundColor: '#dc3545', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n                                            title=\"\"\r\n                                        >\r\n                                            <span role=\"img\" aria-label=\"\"></span>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(DeckDetail);\r\n","//   \r\nimport React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { studyAPI } from '../utils/api';\r\n\r\nclass StudySession extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            cards: [],\r\n            currentIndex: 0,\r\n            showAnswer: false,\r\n            loading: true,\r\n            error: '',\r\n            completed: false,\r\n            stats: { again: 0, hard: 0, good: 0, easy: 0 },\r\n            autoSpeak: true, //   \r\n            speaking: false,\r\n            voiceGender: 'female', // 'female' or 'male'\r\n            availableVoices: [],\r\n            showVoiceSettings: false\r\n        };\r\n    }\r\n\r\n    //     \r\n    loadVoices = () => {\r\n        if (!window.speechSynthesis) return;\r\n        const voices = window.speechSynthesis.getVoices();\r\n        this.setState({ availableVoices: voices });\r\n    };\r\n\r\n    // TTS  \r\n    speak = (text, lang = 'ko-KR') => {\r\n        if (!window.speechSynthesis) return;\r\n\r\n        //   \r\n        window.speechSynthesis.cancel();\r\n\r\n        const utterance = new SpeechSynthesisUtterance(text);\r\n        utterance.lang = lang;\r\n        utterance.rate = 0.9; //  \r\n\r\n        //    \r\n        const { availableVoices, voiceGender } = this.state;\r\n        const langVoices = availableVoices.filter(v => v.lang.startsWith(lang.split('-')[0]));\r\n\r\n        if (langVoices.length > 0) {\r\n            //   \r\n            const genderKeywords = voiceGender === 'female'\r\n                ? ['female', 'woman', 'girl', 'heami', 'yuna', 'sumi', 'zira', 'hazel', 'susan', 'damayanti']\r\n                : ['male', 'man', 'boy', 'david', 'mark', 'james', 'george', 'dede'];\r\n\r\n            const genderVoice = langVoices.find(v =>\r\n                genderKeywords.some(k => v.name.toLowerCase().includes(k))\r\n            );\r\n\r\n            if (genderVoice) {\r\n                utterance.voice = genderVoice;\r\n            } else {\r\n                //     \r\n                utterance.voice = langVoices[0];\r\n            }\r\n        }\r\n\r\n        utterance.onstart = () => this.setState({ speaking: true });\r\n        utterance.onend = () => this.setState({ speaking: false });\r\n        utterance.onerror = () => this.setState({ speaking: false });\r\n\r\n        window.speechSynthesis.speak(utterance);\r\n    };\r\n\r\n    //   \r\n    detectLanguage = (text) => {\r\n        if (/[-]/.test(text)) return 'ko-KR'; // \r\n        if (/[--]/.test(text)) return 'ja-JP'; // \r\n        if (/[-]/.test(text)) return 'zh-CN'; // \r\n        if (/[-]/.test(text)) return 'th-TH'; // \r\n        //     -   \r\n        if (/\\b(dan|yang|di|ke|dari|untuk|dengan|ini|itu|adalah|saya|anda|tidak|bisa|akan|sudah|belum|ada|juga|atau|tetapi|karena|jika|maka|seperti|lebih|sangat|harus|baru|lagi|apa|siapa|mana|kapan|bagaimana|mengapa)\\b/i.test(text)) return 'id-ID';\r\n        return 'en-US'; //  \r\n    };\r\n\r\n    //    \r\n    speakCurrentCard = (side = 'front') => {\r\n        const { cards, currentIndex } = this.state;\r\n        const currentCard = cards[currentIndex];\r\n        if (!currentCard) return;\r\n\r\n        const text = side === 'front' ? currentCard.front : currentCard.back;\r\n        const lang = this.detectLanguage(text);\r\n        this.speak(text, lang);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const { assignedMode } = this.props;\r\n        const { deckId } = this.props.match.params;\r\n\r\n        if (assignedMode || deckId === 'assigned') {\r\n            this.loadAssignedCards();\r\n        } else {\r\n            this.loadDueCards();\r\n        }\r\n        //    \r\n        document.addEventListener('keydown', this.handleKeyPress);\r\n\r\n        //   \r\n        this.loadVoices();\r\n        if (window.speechSynthesis) {\r\n            window.speechSynthesis.onvoiceschanged = this.loadVoices;\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        //    \r\n        document.removeEventListener('keydown', this.handleKeyPress);\r\n    }\r\n\r\n    loadDueCards = async () => {\r\n        const { deckId } = this.props.match.params;\r\n        try {\r\n            this.setState({ loading: true });\r\n            const data = await studyAPI.getDueCards(deckId);\r\n            if (data.cards.length === 0) {\r\n                this.setState({ completed: true, loading: false });\r\n            } else {\r\n                this.setState({ cards: data.cards, loading: false }, () => {\r\n                    //     \r\n                    if (this.state.autoSpeak) {\r\n                        setTimeout(() => this.speakCurrentCard('front'), 300);\r\n                    }\r\n                });\r\n            }\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    loadAssignedCards = async () => {\r\n        try {\r\n            this.setState({ loading: true });\r\n            const data = await (await fetch('/api/study/assigned/due', { headers: { ...(localStorage.getItem('authToken') ? { Authorization: `Bearer ${localStorage.getItem('authToken')}` } : {}) } })).json();\r\n            if (!data.assignments || data.assignments.length === 0) {\r\n                this.setState({ completed: true, loading: false });\r\n            } else {\r\n                // adapt assignments to card-like objects\r\n                const cards = data.assignments.map(a => ({ id: a.id, front: a.card_front || (a.notes || 'Assigned item'), back: a.card_back || '', meta_assignment: a }));\r\n                this.setState({ cards, loading: false });\r\n            }\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    handleAnswer = async (difficulty) => {\r\n        const { cards, currentIndex, stats } = this.state;\r\n        const currentCard = cards[currentIndex];\r\n\r\n        try {\r\n            await studyAPI.submitReview(currentCard.id, difficulty);\r\n\r\n            //  \r\n            const difficultyNames = ['again', 'hard', 'good', 'easy'];\r\n            stats[difficultyNames[difficulty]]++;\r\n\r\n            //  \r\n            if (currentIndex + 1 < cards.length) {\r\n                this.setState({\r\n                    currentIndex: currentIndex + 1,\r\n                    showAnswer: false,\r\n                    stats\r\n                }, () => {\r\n                    //     \r\n                    if (this.state.autoSpeak) {\r\n                        setTimeout(() => this.speakCurrentCard('front'), 300);\r\n                    }\r\n                });\r\n            } else {\r\n                this.setState({ completed: true, stats });\r\n            }\r\n        } catch (err) {\r\n            this.setState({ error: err.message });\r\n        }\r\n    };\r\n\r\n    //   \r\n    handleKeyPress = (e) => {\r\n        const { showAnswer, cards, currentIndex } = this.state;\r\n        const currentCard = cards[currentIndex];\r\n\r\n        //   \r\n        if (!currentCard) return;\r\n\r\n        // Space:  \r\n        if (e.code === 'Space' && !showAnswer) {\r\n            e.preventDefault();\r\n            this.setState({ showAnswer: true });\r\n            return;\r\n        }\r\n\r\n        //      \r\n        if (showAnswer) {\r\n            switch (e.key) {\r\n                case '1':\r\n                    e.preventDefault();\r\n                    this.handleAnswer(0); // \r\n                    break;\r\n                case '2':\r\n                    e.preventDefault();\r\n                    this.handleAnswer(1); // \r\n                    break;\r\n                case '3':\r\n                    e.preventDefault();\r\n                    this.handleAnswer(2); // \r\n                    break;\r\n                case '4':\r\n                    e.preventDefault();\r\n                    this.handleAnswer(3); // \r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { cards, currentIndex, showAnswer, loading, error, completed, stats } = this.state;\r\n        const { deckId } = this.props.match.params;\r\n\r\n        if (loading) {\r\n            return <div style={{ textAlign: 'center', marginTop: '50px' }}> ...</div>;\r\n        }\r\n\r\n        if (completed) {\r\n            return (\r\n                <div style={{ maxWidth: '600px', margin: '50px auto', padding: '30px', textAlign: 'center', border: '1px solid #ddd', borderRadius: '8px', backgroundColor: '#fff' }}>\r\n                    <h2> !</h2>\r\n                    <p style={{ fontSize: '18px', marginTop: '20px' }}>   .</p>\r\n\r\n                    <div style={{ marginTop: '30px', padding: '20px', backgroundColor: '#f8f9fa', borderRadius: '4px' }}>\r\n                        <h4> </h4>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px', marginTop: '15px' }}>\r\n                            <div><strong>:</strong> {stats.again}</div>\r\n                            <div><strong>:</strong> {stats.hard}</div>\r\n                            <div><strong>:</strong> {stats.good}</div>\r\n                            <div><strong>:</strong> {stats.easy}</div>\r\n                        </div>\r\n                        <div style={{ marginTop: '15px', fontSize: '20px', fontWeight: 'bold' }}>\r\n                             {stats.again + stats.hard + stats.good + stats.easy}  \r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: '30px', display: 'flex', gap: '10px', justifyContent: 'center' }}>\r\n                        <button\r\n                            onClick={() => this.props.history.push(`/decks/${deckId}`)}\r\n                            style={{ padding: '12px 24px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '16px' }}\r\n                        >\r\n                             \r\n                        </button>\r\n                        <button\r\n                            onClick={() => this.props.history.push('/decks')}\r\n                            style={{ padding: '12px 24px', backgroundColor: '#6c757d', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '16px' }}\r\n                        >\r\n                             \r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const currentCard = cards[currentIndex];\r\n        const progress = ((currentIndex + 1) / cards.length) * 100;\r\n\r\n        return (\r\n            <div style={{ maxWidth: '600px', margin: '20px auto', padding: '20px' }}>\r\n                <h2> </h2>\r\n\r\n                {/*      */}\r\n                <div style={{\r\n                    padding: '10px',\r\n                    marginBottom: '20px',\r\n                    backgroundColor: '#e7f3ff',\r\n                    border: '1px solid #b3d9ff',\r\n                    borderRadius: '4px',\r\n                    fontSize: '12px',\r\n                    color: '#004085'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap', gap: '10px' }}>\r\n                        <span>\r\n                            <strong> :</strong> Space =   | 1 =  | 2 =  | 3 =  | 4 = \r\n                        </span>\r\n                        <div style={{ display: 'flex', gap: '5px', alignItems: 'center' }}>\r\n                            {/*   */}\r\n                            <button\r\n                                onClick={() => this.setState({ voiceGender: this.state.voiceGender === 'female' ? 'male' : 'female' })}\r\n                                style={{\r\n                                    padding: '5px 10px',\r\n                                    backgroundColor: this.state.voiceGender === 'female' ? '#e83e8c' : '#007bff',\r\n                                    color: '#fff',\r\n                                    border: 'none',\r\n                                    borderRadius: '4px',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '12px'\r\n                                }}\r\n                                title=\"  \"\r\n                            >\r\n                                {this.state.voiceGender === 'female' ? '' : ''}\r\n                            </button>\r\n                            {/*   */}\r\n                            <button\r\n                                onClick={() => this.setState({ autoSpeak: !this.state.autoSpeak })}\r\n                                style={{\r\n                                    padding: '5px 10px',\r\n                                    backgroundColor: this.state.autoSpeak ? '#28a745' : '#6c757d',\r\n                                    color: '#fff',\r\n                                    border: 'none',\r\n                                    borderRadius: '4px',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '12px'\r\n                                }}\r\n                                title={this.state.autoSpeak ? '  ' : '  '}\r\n                            >\r\n                                {this.state.autoSpeak ? ' ON' : ' OFF'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {error && (\r\n                    <div style={{ padding: '10px', marginBottom: '15px', backgroundColor: '#f8d7da', color: '#721c24', border: '1px solid #f5c6cb', borderRadius: '4px' }}>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <div style={{ marginBottom: '20px' }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '10px' }}>\r\n                        <span>{currentIndex + 1} / {cards.length}</span>\r\n                        <span>{Math.round(progress)}%</span>\r\n                    </div>\r\n                    <div style={{ width: '100%', height: '8px', backgroundColor: '#e9ecef', borderRadius: '4px', overflow: 'hidden' }}>\r\n                        <div style={{ width: `${progress}%`, height: '100%', backgroundColor: '#007bff', transition: 'width 0.3s' }} />\r\n                    </div>\r\n                </div>\r\n\r\n                <div\r\n                    style={{\r\n                        minHeight: '300px',\r\n                        padding: '40px',\r\n                        border: '2px solid #007bff',\r\n                        borderRadius: '8px',\r\n                        backgroundColor: '#fff',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        cursor: showAnswer ? 'default' : 'pointer',\r\n                        transition: 'transform 0.3s'\r\n                    }}\r\n                    onClick={() => !showAnswer && this.setState({ showAnswer: true })}\r\n                >\r\n                    <div style={{ textAlign: 'center', width: '100%' }}>\r\n                        {!showAnswer ? (\r\n                            <>\r\n                                <div style={{ fontSize: '24px', fontWeight: 'bold', marginBottom: '20px', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                                    <span>{currentCard.front}</span>\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); this.speakCurrentCard('front'); }}\r\n                                        style={{\r\n                                            padding: '8px 12px',\r\n                                            backgroundColor: this.state.speaking ? '#ffc107' : '#17a2b8',\r\n                                            color: '#fff',\r\n                                            border: 'none',\r\n                                            borderRadius: '50%',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '16px'\r\n                                        }}\r\n                                        title=\" \"\r\n                                    >\r\n                                        {this.state.speaking ? '...' : <span role=\"img\" aria-label=\"speaker\">&#128266;</span>}\r\n                                    </button>\r\n                                </div>\r\n                                <div style={{ color: '#6c757d', marginTop: '30px' }}>\r\n                                      \r\n                                </div>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <div style={{ fontSize: '20px', color: '#6c757d', marginBottom: '20px', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                                    <span>{currentCard.front}</span>\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); this.speakCurrentCard('front'); }}\r\n                                        style={{\r\n                                            padding: '5px 8px',\r\n                                            backgroundColor: '#6c757d',\r\n                                            color: '#fff',\r\n                                            border: 'none',\r\n                                            borderRadius: '50%',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '14px'\r\n                                        }}\r\n                                        title=\"  \"\r\n                                    >\r\n                                        <span role=\"img\" aria-label=\"speaker\">&#128266;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <hr style={{ margin: '20px 0', border: 'none', borderTop: '1px solid #dee2e6' }} />\r\n                                <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#28a745', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '10px' }}>\r\n                                    <span>{currentCard.back}</span>\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); this.speakCurrentCard('back'); }}\r\n                                        style={{\r\n                                            padding: '8px 12px',\r\n                                            backgroundColor: this.state.speaking ? '#ffc107' : '#28a745',\r\n                                            color: '#fff',\r\n                                            border: 'none',\r\n                                            borderRadius: '50%',\r\n                                            cursor: 'pointer',\r\n                                            fontSize: '16px'\r\n                                        }}\r\n                                        title=\"  \"\r\n                                    >\r\n                                        {this.state.speaking ? '...' : <span role=\"img\" aria-label=\"speaker\">&#128266;</span>}\r\n                                    </button>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {showAnswer && (\r\n                    <div style={{ marginTop: '30px', display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '10px' }}>\r\n                        <button\r\n                            onClick={() => this.handleAnswer(0)}\r\n                            style={{ padding: '15px', backgroundColor: '#dc3545', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '14px' }}\r\n                        >\r\n                            <div style={{ fontWeight: 'bold' }}></div>\r\n                            <div style={{ fontSize: '12px', marginTop: '5px' }}>&lt;1</div>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => this.handleAnswer(1)}\r\n                            style={{ padding: '15px', backgroundColor: '#fd7e14', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '14px' }}\r\n                        >\r\n                            <div style={{ fontWeight: 'bold' }}></div>\r\n                            <div style={{ fontSize: '12px', marginTop: '5px' }}>1</div>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => this.handleAnswer(2)}\r\n                            style={{ padding: '15px', backgroundColor: '#28a745', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '14px' }}\r\n                        >\r\n                            <div style={{ fontWeight: 'bold' }}></div>\r\n                            <div style={{ fontSize: '12px', marginTop: '5px' }}>3</div>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => this.handleAnswer(3)}\r\n                            style={{ padding: '15px', backgroundColor: '#007bff', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '14px' }}\r\n                        >\r\n                            <div style={{ fontWeight: 'bold' }}></div>\r\n                            <div style={{ fontSize: '12px', marginTop: '5px' }}>7</div>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(StudySession);\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nconst languages = [\r\n  { code: 'ko', flag: 'KO' },\r\n  { code: 'en', flag: 'EN' },\r\n  { code: 'id', flag: 'ID' }\r\n];\r\n\r\nfunction LanguageSelector() {\r\n  const { i18n } = useTranslation();\r\n\r\n  const handleChange = (e) => {\r\n    i18n.changeLanguage(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <select\r\n      value={i18n.language?.substring(0, 2) || 'ko'}\r\n      onChange={handleChange}\r\n      style={{\r\n        padding: '4px 8px',\r\n        borderRadius: '4px',\r\n        border: '1px solid #ccc',\r\n        backgroundColor: '#fff',\r\n        fontSize: '12px',\r\n        cursor: 'pointer',\r\n        marginRight: '10px'\r\n      }}\r\n    >\r\n      {languages.map(lang => (\r\n        <option key={lang.code} value={lang.code}>\r\n          {lang.flag}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}\r\n\r\nexport default LanguageSelector;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { withTranslation } from 'react-i18next';\r\nimport { authAPI } from '../utils/api';\r\nimport LanguageSelector from './LanguageSelector';\r\nimport './Layout.css';\r\n\r\nclass Layout extends Component {\r\n  render() {\r\n    const { t } = this.props;\r\n    const user = authAPI.getUser();\r\n    return (\r\n      <div className=\"layout-container\">\r\n        <header className=\"layout-header\">\r\n          <div className=\"header-content\">\r\n            <div className=\"header-brand\">\r\n              <h1 className=\"brand-title\">Pangstudy</h1>\r\n            </div>\r\n            <nav className=\"header-nav\">\r\n              <Link to=\"/decks\" className=\"nav-link\">{t('nav.decks')}</Link>\r\n              <Link to=\"/recommendations\" className=\"nav-link\">{t('nav.recommendations')}</Link>\r\n              <Link to=\"/study/assigned\" className=\"nav-link\">{t('nav.assigned')}</Link>\r\n              {user && user.is_admin && <Link to=\"/admin\" className=\"nav-link\">{t('nav.admin')}</Link>}\r\n              <LanguageSelector />\r\n              {user ? (\r\n                <button\r\n                  className=\"logout-btn\"\r\n                  onClick={() => {\r\n                    localStorage.removeItem('authToken');\r\n                    localStorage.removeItem('user');\r\n                    window.location.href = '/login';\r\n                  }}\r\n                >\r\n                  {t('nav.logout')}\r\n                </button>\r\n              ) : (\r\n                <Link to=\"/login\" className=\"nav-link\">{t('nav.login')}</Link>\r\n              )}\r\n            </nav>\r\n          </div>\r\n        </header>\r\n        <main className=\"layout-main\">\r\n          {this.props.children}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withTranslation('common')(Layout);\r\n","import { authAPI } from './api';\r\n\r\nconst API_BASE = '';\r\n\r\nconst getAuthToken = () => localStorage.getItem('authToken');\r\n\r\nexport async function logRecommendationEvent(eventType, deckId = null, variant = null) {\r\n    const token = getAuthToken();\r\n    const body = { eventType, deckId, variant };\r\n    if (authAPI.getUser()) body.userId = authAPI.getUser().id;\r\n\r\n    try {\r\n        await fetch(`${API_BASE}/api/analytics`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                ...(token && { Authorization: `Bearer ${token}` }),\r\n            },\r\n            body: JSON.stringify(body),\r\n        });\r\n    } catch (e) {\r\n        // swallow errors (non-blocking)\r\n        console.warn('analytics log failed', e);\r\n    }\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { recommendationsAPI } from '../utils/api';\r\nimport { logRecommendationEvent } from '../utils/analytics';\r\nimport { getABVariant } from '../utils/abTest';\r\n\r\nconst Recommendations = () => {\r\n    const [loading, setLoading] = useState(true);\r\n    const [items, setItems] = useState([]);\r\n    const [error, setError] = useState(null);\r\n    const [myOnly, setMyOnly] = useState(false);\r\n    const [refreshKey, setRefreshKey] = useState(0);\r\n    const shownLoggedRef = useRef(false);\r\n    const variant = getABVariant();\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n        setLoading(true);\r\n        setError(null);\r\n        recommendationsAPI.getRecommendations({ my: myOnly })\r\n            .then((res) => {\r\n                if (!mounted) return;\r\n                setItems(res.recommendations || []);\r\n            })\r\n            .catch((err) => {\r\n                if (!mounted) return;\r\n                setError(err.message || 'Failed to load recommendations');\r\n            })\r\n            .finally(() => mounted && setLoading(false));\r\n\r\n        return () => { mounted = false; };\r\n    }, [myOnly, refreshKey]);\r\n\r\n    useEffect(() => {\r\n        // reset shown flag when query changes\r\n        shownLoggedRef.current = false;\r\n    }, [myOnly, refreshKey]);\r\n\r\n    useEffect(() => {\r\n        if (!loading && !shownLoggedRef.current) {\r\n            shownLoggedRef.current = true;\r\n            logRecommendationEvent('recommendations_shown', null, variant);\r\n        }\r\n    }, [loading, items, variant]);\r\n\r\n    if (loading) return <div>   ...</div>;\r\n    if (error) return <div>: {error}</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h2> </h2>\r\n            <div style={{ marginBottom: 12 }}>\r\n                <label style={{ marginRight: 12 }}>\r\n                    <input type=\"checkbox\" checked={myOnly} onChange={(e) => setMyOnly(e.target.checked)} />   \r\n                </label>\r\n                <button onClick={() => setRefreshKey(k => k + 1)}></button>\r\n            </div>\r\n\r\n            {!items.length ? (\r\n                <div>  .  !</div>\r\n            ) : (\r\n                <ul style={{ listStyle: 'none', padding: 0 }}>\r\n                    {items.map((i) => (\r\n                        <li key={i.id} style={{ borderBottom: '1px solid #eee', padding: '8px 0' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                <div>\r\n                                    <strong>{i.name}</strong>\r\n                                    <div style={{ fontSize: 12, color: '#666' }}>\r\n                                        : {Math.round(i.score)}\r\n                                    </div>\r\n                                    <div style={{ fontSize: 12, color: '#444', marginTop: 6 }}>\r\n                                        {i.meta && i.meta.due ? <span> : {i.meta.due}  </span> : null}\r\n                                        {i.meta && i.meta.assigned ? <span> : {i.meta.assigned}  </span> : null}\r\n                                        {i.meta && i.meta.recent ? <span> : {i.meta.recent}  </span> : null}\r\n                                        {i.meta && i.meta.wrong ? <span style={{ color: '#b00' }}> : {i.meta.wrong}</span> : null}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <Link to={`/decks/${i.id}`} style={{ marginRight: 8 }}> </Link>\r\n                                    <Link to={`/study/${i.id}`} onClick={() => logRecommendationEvent('recommendation_start', i.id, variant)}> </Link>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Recommendations;\r\n","//  A/B   \r\nexport function getABVariant() {\r\n    try {\r\n        const key = 'ab_variant';\r\n        let v = localStorage.getItem(key);\r\n        if (v) return v;\r\n        // 50/50 \r\n        v = Math.random() < 0.5 ? 'A' : 'B';\r\n        localStorage.setItem(key, v);\r\n        return v;\r\n    } catch (e) {\r\n        return 'A';\r\n    }\r\n}\r\n","//   \r\nimport React, { Component } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport { authAPI } from '../../utils/api';\r\n\r\nclass AdminLayout extends Component {\r\n    render() {\r\n        const user = authAPI.getUser();\r\n        const { location } = this.props;\r\n        const currentPath = location.pathname;\r\n\r\n        const menuItems = [\r\n            { path: '/admin', label: '', exact: true },\r\n            { path: '/admin/users', label: ' ' },\r\n            { path: '/admin/decks', label: ' ' },\r\n            { path: '/admin/assign', label: ' ' },\r\n            { path: '/admin/stats', label: '' },\r\n        ];\r\n\r\n        const isActive = (item) => {\r\n            if (item.exact) return currentPath === item.path;\r\n            return currentPath.startsWith(item.path);\r\n        };\r\n\r\n        return (\r\n            <div style={{ display: 'flex', minHeight: '100vh' }}>\r\n                {/*  */}\r\n                <div style={{\r\n                    width: '220px',\r\n                    backgroundColor: '#2c3e50',\r\n                    color: '#ecf0f1',\r\n                    flexShrink: 0\r\n                }}>\r\n                    <div style={{ padding: '20px', borderBottom: '1px solid #34495e' }}>\r\n                        <h2 style={{ margin: 0, fontSize: '18px' }}>Pangstudy</h2>\r\n                        <small style={{ color: '#95a5a6' }}>Admin Panel</small>\r\n                    </div>\r\n                    <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n                        {menuItems.map(item => (\r\n                            <li key={item.path}>\r\n                                <Link\r\n                                    to={item.path}\r\n                                    style={{\r\n                                        display: 'block',\r\n                                        padding: '12px 20px',\r\n                                        color: isActive(item) ? '#fff' : '#bdc3c7',\r\n                                        backgroundColor: isActive(item) ? '#34495e' : 'transparent',\r\n                                        textDecoration: 'none',\r\n                                        borderLeft: isActive(item) ? '4px solid #3498db' : '4px solid transparent'\r\n                                    }}\r\n                                >\r\n                                    {item.label}\r\n                                </Link>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                    <div style={{ padding: '20px', borderTop: '1px solid #34495e', marginTop: '20px' }}>\r\n                        <Link to=\"/decks\" style={{ color: '#3498db', textDecoration: 'none', fontSize: '14px' }}>\r\n                            &larr;  \r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={{ flex: 1, backgroundColor: '#f5f6fa' }}>\r\n                    <div style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'space-between',\r\n                        alignItems: 'center',\r\n                        padding: '15px 20px',\r\n                        backgroundColor: '#fff',\r\n                        borderBottom: '1px solid #ddd'\r\n                    }}>\r\n                        <h1 style={{ margin: 0, fontSize: '20px', color: '#2c3e50' }}>\r\n                            {menuItems.find(item => isActive(item))?.label || ''}\r\n                        </h1>\r\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\r\n                            <span style={{ color: '#7f8c8d', fontSize: '14px' }}>\r\n                                {user?.username || user?.email}\r\n                            </span>\r\n                            <button\r\n                                onClick={() => {\r\n                                    authAPI.logout();\r\n                                    window.location.href = '/login';\r\n                                }}\r\n                                style={{\r\n                                    padding: '6px 12px',\r\n                                    backgroundColor: '#e74c3c',\r\n                                    color: '#fff',\r\n                                    border: 'none',\r\n                                    borderRadius: '4px',\r\n                                    cursor: 'pointer',\r\n                                    fontSize: '13px'\r\n                                }}\r\n                            >\r\n                                \r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div style={{ padding: '20px' }}>\r\n                        {this.props.children}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AdminLayout);\r\n","//  \r\nimport React, { Component } from 'react';\r\nimport { adminAPI } from '../../utils/api';\r\n\r\nclass AdminDashboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            stats: null,\r\n            recentUsers: [],\r\n            recentActivity: [],\r\n            loading: true,\r\n            error: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadDashboardData();\r\n    }\r\n\r\n    loadDashboardData = async () => {\r\n        try {\r\n            const [statsRes, usersRes] = await Promise.all([\r\n                adminAPI.getDashboardStats(),\r\n                adminAPI.getUsers()\r\n            ]);\r\n\r\n            this.setState({\r\n                stats: statsRes,\r\n                recentUsers: usersRes.users?.slice(0, 5) || [],\r\n                loading: false\r\n            });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { stats, recentUsers, loading, error } = this.state;\r\n\r\n        const cardStyle = {\r\n            backgroundColor: '#fff',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        };\r\n\r\n        const statCardStyle = (color) => ({\r\n            ...cardStyle,\r\n            borderLeft: `4px solid ${color}`,\r\n            flex: 1,\r\n            minWidth: '200px'\r\n        });\r\n\r\n        if (loading) {\r\n            return <div style={{ textAlign: 'center', padding: '40px' }}> ...</div>;\r\n        }\r\n\r\n        if (error) {\r\n            return <div style={{ color: '#e74c3c', padding: '20px' }}>{error}</div>;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {/*   */}\r\n                <div style={{ display: 'flex', gap: '20px', marginBottom: '20px', flexWrap: 'wrap' }}>\r\n                    <div style={statCardStyle('#3498db')}>\r\n                        <div style={{ color: '#7f8c8d', fontSize: '14px', marginBottom: '5px' }}> </div>\r\n                        <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#2c3e50' }}>\r\n                            {stats?.totalUsers || 0}\r\n                        </div>\r\n                    </div>\r\n                    <div style={statCardStyle('#2ecc71')}>\r\n                        <div style={{ color: '#7f8c8d', fontSize: '14px', marginBottom: '5px' }}> </div>\r\n                        <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#2c3e50' }}>\r\n                            {stats?.totalDecks || 0}\r\n                        </div>\r\n                    </div>\r\n                    <div style={statCardStyle('#e67e22')}>\r\n                        <div style={{ color: '#7f8c8d', fontSize: '14px', marginBottom: '5px' }}> </div>\r\n                        <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#2c3e50' }}>\r\n                            {stats?.totalCards || 0}\r\n                        </div>\r\n                    </div>\r\n                    <div style={statCardStyle('#9b59b6')}>\r\n                        <div style={{ color: '#7f8c8d', fontSize: '14px', marginBottom: '5px' }}> </div>\r\n                        <div style={{ fontSize: '28px', fontWeight: 'bold', color: '#2c3e50' }}>\r\n                            {stats?.todayReviews || 0}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>\r\n                    <div style={cardStyle}>\r\n                        <h3 style={{ margin: '0 0 15px', color: '#2c3e50', fontSize: '16px' }}>  </h3>\r\n                        {recentUsers.length === 0 ? (\r\n                            <div style={{ color: '#95a5a6' }}> </div>\r\n                        ) : (\r\n                            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                                <thead>\r\n                                    <tr style={{ borderBottom: '1px solid #eee' }}>\r\n                                        <th style={{ textAlign: 'left', padding: '8px 0', color: '#7f8c8d', fontWeight: 'normal', fontSize: '13px' }}></th>\r\n                                        <th style={{ textAlign: 'left', padding: '8px 0', color: '#7f8c8d', fontWeight: 'normal', fontSize: '13px' }}></th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {recentUsers.map(user => (\r\n                                        <tr key={user.id} style={{ borderBottom: '1px solid #f5f5f5' }}>\r\n                                            <td style={{ padding: '10px 0', fontSize: '14px' }}>{user.username || user.name}</td>\r\n                                            <td style={{ padding: '10px 0', fontSize: '14px', color: '#7f8c8d' }}>{user.email}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div style={cardStyle}>\r\n                        <h3 style={{ margin: '0 0 15px', color: '#2c3e50', fontSize: '16px' }}> </h3>\r\n                        <div style={{ fontSize: '14px', color: '#7f8c8d' }}>\r\n                            <div style={{ marginBottom: '10px' }}>\r\n                                <strong>:</strong> Cloudflare Pages\r\n                            </div>\r\n                            <div style={{ marginBottom: '10px' }}>\r\n                                <strong>:</strong> D1 SQLite\r\n                            </div>\r\n                            <div style={{ marginBottom: '10px' }}>\r\n                                <strong>:</strong> 1.0.0\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminDashboard;\r\n","//  -  \r\nimport React, { Component } from 'react';\r\nimport { adminAPI } from '../../utils/api';\r\n\r\nclass AdminUsers extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            loading: true,\r\n            error: '',\r\n            showAddForm: false,\r\n            newUser: { name: '', email: '', password: '' },\r\n            editingUser: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadUsers();\r\n    }\r\n\r\n    loadUsers = async () => {\r\n        try {\r\n            const res = await adminAPI.getUsers();\r\n            this.setState({ users: res.users || [], loading: false });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    handleAddUser = async (e) => {\r\n        e.preventDefault();\r\n        const { newUser } = this.state;\r\n        try {\r\n            await adminAPI.addUser(newUser.name, newUser.email, newUser.password);\r\n            this.setState({ showAddForm: false, newUser: { name: '', email: '', password: '' } });\r\n            this.loadUsers();\r\n        } catch (err) {\r\n            alert('  : ' + err.message);\r\n        }\r\n    };\r\n\r\n    handleToggleAdmin = async (userId, currentIsAdmin) => {\r\n        try {\r\n            await adminAPI.updateUser(userId, { is_admin: !currentIsAdmin });\r\n            this.loadUsers();\r\n        } catch (err) {\r\n            alert('  : ' + err.message);\r\n        }\r\n    };\r\n\r\n    handleResetPassword = async (userId) => {\r\n        const newPassword = prompt('  :');\r\n        if (!newPassword) return;\r\n        try {\r\n            await adminAPI.updateUser(userId, { password: newPassword });\r\n            alert(' .');\r\n        } catch (err) {\r\n            alert('  : ' + err.message);\r\n        }\r\n    };\r\n\r\n    handleDeleteUser = async (userId, email) => {\r\n        if (!window.confirm(` ${email}  ?`)) return;\r\n        try {\r\n            await adminAPI.deleteUser(userId);\r\n            this.loadUsers();\r\n        } catch (err) {\r\n            alert(' : ' + err.message);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { users, loading, error, showAddForm, newUser } = this.state;\r\n\r\n        const cardStyle = {\r\n            backgroundColor: '#fff',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        };\r\n\r\n        const btnStyle = (color) => ({\r\n            padding: '6px 12px',\r\n            backgroundColor: color,\r\n            color: '#fff',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            fontSize: '12px',\r\n            marginRight: '5px'\r\n        });\r\n\r\n        if (loading) return <div> ...</div>;\r\n        if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n        return (\r\n            <div>\r\n                <div style={{ marginBottom: '20px' }}>\r\n                    <button\r\n                        onClick={() => this.setState({ showAddForm: !showAddForm })}\r\n                        style={btnStyle('#3498db')}\r\n                    >\r\n                        +  \r\n                    </button>\r\n                </div>\r\n\r\n                {showAddForm && (\r\n                    <div style={{ ...cardStyle, marginBottom: '20px' }}>\r\n                        <h3 style={{ margin: '0 0 15px', fontSize: '16px' }}>  </h3>\r\n                        <form onSubmit={this.handleAddUser}>\r\n                            <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"\"\r\n                                    value={newUser.name}\r\n                                    onChange={(e) => this.setState({ newUser: { ...newUser, name: e.target.value } })}\r\n                                    required\r\n                                    style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', flex: 1 }}\r\n                                />\r\n                                <input\r\n                                    type=\"email\"\r\n                                    placeholder=\"\"\r\n                                    value={newUser.email}\r\n                                    onChange={(e) => this.setState({ newUser: { ...newUser, email: e.target.value } })}\r\n                                    required\r\n                                    style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', flex: 1 }}\r\n                                />\r\n                                <input\r\n                                    type=\"password\"\r\n                                    placeholder=\"\"\r\n                                    value={newUser.password}\r\n                                    onChange={(e) => this.setState({ newUser: { ...newUser, password: e.target.value } })}\r\n                                    required\r\n                                    style={{ padding: '8px', border: '1px solid #ddd', borderRadius: '4px', flex: 1 }}\r\n                                />\r\n                                <button type=\"submit\" style={btnStyle('#2ecc71')}></button>\r\n                                <button type=\"button\" onClick={() => this.setState({ showAddForm: false })} style={btnStyle('#95a5a6')}></button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                )}\r\n\r\n                <div style={cardStyle}>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ borderBottom: '2px solid #eee' }}>\r\n                                <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}>ID</th>\r\n                                <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                                <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                                <th style={{ textAlign: 'center', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                                <th style={{ textAlign: 'right', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {users.map(user => (\r\n                                <tr key={user.id} style={{ borderBottom: '1px solid #f5f5f5' }}>\r\n                                    <td style={{ padding: '12px 8px', fontSize: '14px' }}>{user.id}</td>\r\n                                    <td style={{ padding: '12px 8px', fontSize: '14px' }}>{user.username || user.name}</td>\r\n                                    <td style={{ padding: '12px 8px', fontSize: '14px', color: '#7f8c8d' }}>{user.email}</td>\r\n                                    <td style={{ padding: '12px 8px', textAlign: 'center' }}>\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={user.is_admin === 1 || user.is_admin === true}\r\n                                            onChange={() => this.handleToggleAdmin(user.id, user.is_admin)}\r\n                                        />\r\n                                    </td>\r\n                                    <td style={{ padding: '12px 8px', textAlign: 'right' }}>\r\n                                        <button onClick={() => this.handleResetPassword(user.id)} style={btnStyle('#f39c12')}></button>\r\n                                        <button onClick={() => this.handleDeleteUser(user.id, user.email)} style={btnStyle('#e74c3c')}></button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                    {users.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '20px', color: '#95a5a6' }}> </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminUsers;\r\n","//  -  \r\nimport React, { Component } from 'react';\r\nimport { adminAPI } from '../../utils/api';\r\n\r\nclass AdminDecks extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            decks: [],\r\n            loading: true,\r\n            error: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadDecks();\r\n    }\r\n\r\n    loadDecks = async () => {\r\n        try {\r\n            const res = await adminAPI.getAllDecks();\r\n            this.setState({ decks: res.decks || [], loading: false });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    handleDeleteDeck = async (deckId, deckName) => {\r\n        if (!window.confirm(` \"${deckName}\"  ?`)) return;\r\n        try {\r\n            await adminAPI.deleteDeck(deckId);\r\n            this.loadDecks();\r\n        } catch (err) {\r\n            alert(' : ' + err.message);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { decks, loading, error } = this.state;\r\n\r\n        const cardStyle = {\r\n            backgroundColor: '#fff',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        };\r\n\r\n        const btnStyle = (color) => ({\r\n            padding: '6px 12px',\r\n            backgroundColor: color,\r\n            color: '#fff',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            fontSize: '12px'\r\n        });\r\n\r\n        if (loading) return <div> ...</div>;\r\n        if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n        return (\r\n            <div style={cardStyle}>\r\n                <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                    <thead>\r\n                        <tr style={{ borderBottom: '2px solid #eee' }}>\r\n                            <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}>ID</th>\r\n                            <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}> </th>\r\n                            <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                            <th style={{ textAlign: 'center', padding: '12px 8px', color: '#7f8c8d' }}> </th>\r\n                            <th style={{ textAlign: 'left', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                            <th style={{ textAlign: 'right', padding: '12px 8px', color: '#7f8c8d' }}></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {decks.map(deck => (\r\n                            <tr key={deck.id} style={{ borderBottom: '1px solid #f5f5f5' }}>\r\n                                <td style={{ padding: '12px 8px', fontSize: '14px' }}>{deck.id}</td>\r\n                                <td style={{ padding: '12px 8px', fontSize: '14px' }}>{deck.name}</td>\r\n                                <td style={{ padding: '12px 8px', fontSize: '14px', color: '#7f8c8d' }}>\r\n                                    {deck.owner_name || deck.owner_email || `User #${deck.user_id}`}\r\n                                </td>\r\n                                <td style={{ padding: '12px 8px', fontSize: '14px', textAlign: 'center' }}>\r\n                                    {deck.card_count || 0}\r\n                                </td>\r\n                                <td style={{ padding: '12px 8px', fontSize: '14px', color: '#95a5a6' }}>\r\n                                    {deck.created_at ? new Date(deck.created_at).toLocaleDateString() : '-'}\r\n                                </td>\r\n                                <td style={{ padding: '12px 8px', textAlign: 'right' }}>\r\n                                    <button\r\n                                        onClick={() => this.handleDeleteDeck(deck.id, deck.name)}\r\n                                        style={btnStyle('#e74c3c')}\r\n                                    >\r\n                                        \r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n                {decks.length === 0 && (\r\n                    <div style={{ textAlign: 'center', padding: '20px', color: '#95a5a6' }}> </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminDecks;\r\n","//  -  \r\nimport React, { Component } from 'react';\r\nimport { adminAPI } from '../../utils/api';\r\n\r\nclass AdminAssign extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            decks: [],\r\n            assignments: [],\r\n            loading: true,\r\n            error: '',\r\n            form: {\r\n                userId: '',\r\n                deckId: '',\r\n                cardId: '',\r\n                dueDate: '',\r\n                note: ''\r\n            },\r\n            cards: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n    }\r\n\r\n    loadData = async () => {\r\n        try {\r\n            const [usersRes, decksRes, assignRes] = await Promise.all([\r\n                adminAPI.getUsers(),\r\n                adminAPI.getAllDecks(),\r\n                adminAPI.getAssignments()\r\n            ]);\r\n            this.setState({\r\n                users: usersRes.users || [],\r\n                decks: decksRes.decks || [],\r\n                assignments: assignRes.assignments || [],\r\n                loading: false\r\n            });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    loadCards = async (deckId) => {\r\n        if (!deckId) {\r\n            this.setState({ cards: [] });\r\n            return;\r\n        }\r\n        try {\r\n            const res = await adminAPI.getDeckCards(deckId);\r\n            this.setState({ cards: res.cards || [] });\r\n        } catch (err) {\r\n            console.error('Failed to load cards:', err);\r\n        }\r\n    };\r\n\r\n    handleDeckChange = (deckId) => {\r\n        this.setState({ form: { ...this.state.form, deckId, cardId: '' } });\r\n        this.loadCards(deckId);\r\n    };\r\n\r\n    handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const { form } = this.state;\r\n        if (!form.userId || !form.deckId) {\r\n            alert('  ');\r\n            return;\r\n        }\r\n        try {\r\n            await adminAPI.assignToUser({\r\n                userId: parseInt(form.userId),\r\n                deckId: parseInt(form.deckId),\r\n                cardId: form.cardId ? parseInt(form.cardId) : null,\r\n                dueDate: form.dueDate || null,\r\n                note: form.note || null\r\n            });\r\n            alert(' !');\r\n            this.setState({ form: { userId: '', deckId: '', cardId: '', dueDate: '', note: '' }, cards: [] });\r\n            this.loadData();\r\n        } catch (err) {\r\n            alert(' : ' + err.message);\r\n        }\r\n    };\r\n\r\n    handleDeleteAssignment = async (assignmentId) => {\r\n        if (!window.confirm(' ?')) return;\r\n        try {\r\n            await adminAPI.deleteAssignment(assignmentId);\r\n            this.loadData();\r\n        } catch (err) {\r\n            alert(' : ' + err.message);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { users, decks, assignments, cards, loading, error, form } = this.state;\r\n\r\n        const cardStyle = {\r\n            backgroundColor: '#fff',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n            marginBottom: '20px'\r\n        };\r\n\r\n        const inputStyle = {\r\n            padding: '8px 12px',\r\n            border: '1px solid #ddd',\r\n            borderRadius: '4px',\r\n            fontSize: '14px',\r\n            width: '100%'\r\n        };\r\n\r\n        const btnStyle = {\r\n            padding: '10px 20px',\r\n            backgroundColor: '#3498db',\r\n            color: '#fff',\r\n            border: 'none',\r\n            borderRadius: '4px',\r\n            cursor: 'pointer',\r\n            fontSize: '14px'\r\n        };\r\n\r\n        if (loading) return <div> ...</div>;\r\n        if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n        return (\r\n            <div>\r\n                {/*   */}\r\n                <div style={cardStyle}>\r\n                    <h3 style={{ margin: '0 0 15px', fontSize: '16px', color: '#2c3e50' }}>  </h3>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '15px' }}>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '5px', color: '#7f8c8d', fontSize: '13px' }}> *</label>\r\n                                <select\r\n                                    value={form.userId}\r\n                                    onChange={(e) => this.setState({ form: { ...form, userId: e.target.value } })}\r\n                                    style={inputStyle}\r\n                                    required\r\n                                >\r\n                                    <option value=\"\"></option>\r\n                                    {users.map(u => (\r\n                                        <option key={u.id} value={u.id}>{u.username || u.name} ({u.email})</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '5px', color: '#7f8c8d', fontSize: '13px' }}> *</label>\r\n                                <select\r\n                                    value={form.deckId}\r\n                                    onChange={(e) => this.handleDeckChange(e.target.value)}\r\n                                    style={inputStyle}\r\n                                    required\r\n                                >\r\n                                    <option value=\"\"></option>\r\n                                    {decks.map(d => (\r\n                                        <option key={d.id} value={d.id}>{d.name}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '5px', color: '#7f8c8d', fontSize: '13px' }}> ()</label>\r\n                                <select\r\n                                    value={form.cardId}\r\n                                    onChange={(e) => this.setState({ form: { ...form, cardId: e.target.value } })}\r\n                                    style={inputStyle}\r\n                                    disabled={!form.deckId}\r\n                                >\r\n                                    <option value=\"\"> </option>\r\n                                    {cards.map(c => (\r\n                                        <option key={c.id} value={c.id}>{c.front.substring(0, 30)}...</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label style={{ display: 'block', marginBottom: '5px', color: '#7f8c8d', fontSize: '13px' }}></label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={form.dueDate}\r\n                                    onChange={(e) => this.setState({ form: { ...form, dueDate: e.target.value } })}\r\n                                    style={inputStyle}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div style={{ marginTop: '15px' }}>\r\n                            <label style={{ display: 'block', marginBottom: '5px', color: '#7f8c8d', fontSize: '13px' }}></label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={form.note}\r\n                                onChange={(e) => this.setState({ form: { ...form, note: e.target.value } })}\r\n                                style={inputStyle}\r\n                                placeholder=\"  ()\"\r\n                            />\r\n                        </div>\r\n                        <div style={{ marginTop: '15px' }}>\r\n                            <button type=\"submit\" style={btnStyle}></button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={cardStyle}>\r\n                    <h3 style={{ margin: '0 0 15px', fontSize: '16px', color: '#2c3e50' }}> </h3>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ borderBottom: '2px solid #eee' }}>\r\n                                <th style={{ textAlign: 'left', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                                <th style={{ textAlign: 'left', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                                <th style={{ textAlign: 'left', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                                <th style={{ textAlign: 'left', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                                <th style={{ textAlign: 'right', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {assignments.map(a => (\r\n                                <tr key={a.id} style={{ borderBottom: '1px solid #f5f5f5' }}>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px' }}>{a.user_name || a.user_email}</td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px' }}>{a.deck_name}</td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', color: '#95a5a6' }}>\r\n                                        {a.due_date ? new Date(a.due_date).toLocaleDateString() : '-'}\r\n                                    </td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', color: '#7f8c8d' }}>{a.note || '-'}</td>\r\n                                    <td style={{ padding: '10px 8px', textAlign: 'right' }}>\r\n                                        <button\r\n                                            onClick={() => this.handleDeleteAssignment(a.id)}\r\n                                            style={{ padding: '4px 10px', backgroundColor: '#e74c3c', color: '#fff', border: 'none', borderRadius: '4px', cursor: 'pointer', fontSize: '12px' }}\r\n                                        >\r\n                                            \r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                    {assignments.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '20px', color: '#95a5a6' }}>  </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminAssign;\r\n","//  - \r\nimport React, { Component } from 'react';\r\nimport { adminAPI } from '../../utils/api';\r\n\r\nclass AdminStats extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            stats: null,\r\n            userStats: [],\r\n            loading: true,\r\n            error: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadStats();\r\n    }\r\n\r\n    loadStats = async () => {\r\n        try {\r\n            const [dashRes, userStatsRes] = await Promise.all([\r\n                adminAPI.getDashboardStats(),\r\n                adminAPI.getUserStats()\r\n            ]);\r\n            this.setState({\r\n                stats: dashRes,\r\n                userStats: userStatsRes.users || [],\r\n                loading: false\r\n            });\r\n        } catch (err) {\r\n            this.setState({ error: err.message, loading: false });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const { stats, userStats, loading, error } = this.state;\r\n\r\n        const cardStyle = {\r\n            backgroundColor: '#fff',\r\n            borderRadius: '8px',\r\n            padding: '20px',\r\n            boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n            marginBottom: '20px'\r\n        };\r\n\r\n        if (loading) return <div> ...</div>;\r\n        if (error) return <div style={{ color: 'red' }}>{error}</div>;\r\n\r\n        return (\r\n            <div>\r\n                {/*   */}\r\n                <div style={cardStyle}>\r\n                    <h3 style={{ margin: '0 0 15px', fontSize: '16px', color: '#2c3e50' }}> </h3>\r\n                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '20px' }}>\r\n                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#3498db' }}>{stats?.totalUsers || 0}</div>\r\n                            <div style={{ fontSize: '13px', color: '#7f8c8d', marginTop: '5px' }}> </div>\r\n                        </div>\r\n                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#2ecc71' }}>{stats?.totalDecks || 0}</div>\r\n                            <div style={{ fontSize: '13px', color: '#7f8c8d', marginTop: '5px' }}> </div>\r\n                        </div>\r\n                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#e67e22' }}>{stats?.totalCards || 0}</div>\r\n                            <div style={{ fontSize: '13px', color: '#7f8c8d', marginTop: '5px' }}> </div>\r\n                        </div>\r\n                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#9b59b6' }}>{stats?.totalReviews || 0}</div>\r\n                            <div style={{ fontSize: '13px', color: '#7f8c8d', marginTop: '5px' }}>  </div>\r\n                        </div>\r\n                        <div style={{ textAlign: 'center', padding: '15px', backgroundColor: '#f8f9fa', borderRadius: '8px' }}>\r\n                            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#1abc9c' }}>{stats?.todayReviews || 0}</div>\r\n                            <div style={{ fontSize: '13px', color: '#7f8c8d', marginTop: '5px' }}> </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*   */}\r\n                <div style={cardStyle}>\r\n                    <h3 style={{ margin: '0 0 15px', fontSize: '16px', color: '#2c3e50' }}>  </h3>\r\n                    <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n                        <thead>\r\n                            <tr style={{ borderBottom: '2px solid #eee' }}>\r\n                                <th style={{ textAlign: 'left', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}></th>\r\n                                <th style={{ textAlign: 'center', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}> </th>\r\n                                <th style={{ textAlign: 'center', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}> </th>\r\n                                <th style={{ textAlign: 'center', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}> </th>\r\n                                <th style={{ textAlign: 'center', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}> </th>\r\n                                <th style={{ textAlign: 'center', padding: '10px 8px', color: '#7f8c8d', fontSize: '13px' }}> </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {userStats.map(user => (\r\n                                <tr key={user.id} style={{ borderBottom: '1px solid #f5f5f5' }}>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px' }}>\r\n                                        <div>{user.username || user.name}</div>\r\n                                        <div style={{ fontSize: '12px', color: '#95a5a6' }}>{user.email}</div>\r\n                                    </td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', textAlign: 'center' }}>{user.deck_count || 0}</td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', textAlign: 'center' }}>{user.card_count || 0}</td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', textAlign: 'center' }}>{user.total_reviews || 0}</td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '14px', textAlign: 'center' }}>\r\n                                        <span style={{\r\n                                            backgroundColor: user.today_reviews > 0 ? '#d4edda' : '#f8f9fa',\r\n                                            padding: '2px 8px',\r\n                                            borderRadius: '10px',\r\n                                            fontSize: '13px'\r\n                                        }}>\r\n                                            {user.today_reviews || 0}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td style={{ padding: '10px 8px', fontSize: '13px', textAlign: 'center', color: '#95a5a6' }}>\r\n                                        {user.last_activity ? new Date(user.last_activity).toLocaleDateString() : '-'}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                    {userStats.length === 0 && (\r\n                        <div style={{ textAlign: 'center', padding: '20px', color: '#95a5a6' }}> </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminStats;\r\n","import React, { Component } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport './App.css';\r\nimport { Login } from './components/Auth/Login';\r\nimport { Register } from './components/Auth/Register';\r\nimport DeckList from './components/DeckList';\r\nimport DeckDetail from './components/DeckDetail';\r\nimport StudySession from './components/StudySession';\r\nimport Layout from './components/Layout';\r\nimport Recommendations from './components/Recommendations';\r\nimport { authAPI } from './utils/api';\r\nimport { ThemeProvider } from './contexts/ThemeContext';\r\n\r\n// Admin components\r\nimport AdminLayout from './components/admin/AdminLayout';\r\nimport AdminDashboard from './components/admin/AdminDashboard';\r\nimport AdminUsers from './components/admin/AdminUsers';\r\nimport AdminDecks from './components/admin/AdminDecks';\r\nimport AdminAssign from './components/admin/AdminAssign';\r\nimport AdminStats from './components/admin/AdminStats';\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            user: authAPI.getUser(),\r\n            showRegister: false\r\n        };\r\n    }\r\n\r\n    handleLoginSuccess = () => {\r\n        this.setState({ user: authAPI.getUser() });\r\n    };\r\n\r\n    render() {\r\n        const { user, showRegister } = this.state;\r\n        const isAdmin = user?.is_admin;\r\n\r\n        return (\r\n            <ThemeProvider>\r\n                <Switch>\r\n                    {/* Admin routes - separate layout */}\r\n                    <Route path=\"/admin\">\r\n                        {user && isAdmin ? (\r\n                            <AdminLayout>\r\n                                <Switch>\r\n                                    <Route exact path=\"/admin\" component={AdminDashboard} />\r\n                                    <Route exact path=\"/admin/users\" component={AdminUsers} />\r\n                                    <Route exact path=\"/admin/decks\" component={AdminDecks} />\r\n                                    <Route exact path=\"/admin/assign\" component={AdminAssign} />\r\n                                    <Route exact path=\"/admin/stats\" component={AdminStats} />\r\n                                </Switch>\r\n                            </AdminLayout>\r\n                        ) : user ? (\r\n                            <Redirect to=\"/decks\" />\r\n                        ) : (\r\n                            <Redirect to=\"/login\" />\r\n                        )}\r\n                    </Route>\r\n\r\n                    {/* User routes - standard layout */}\r\n                    <Route>\r\n                        <Layout>\r\n                            <Switch>\r\n                                <Route path=\"/login\">\r\n                                    {user ? (\r\n                                        <Redirect to=\"/decks\" />\r\n                                    ) : showRegister ? (\r\n                                        <Register\r\n                                            onSwitchToLogin={() => this.setState({ showRegister: false })}\r\n                                            onRegisterSuccess={this.handleLoginSuccess}\r\n                                        />\r\n                                    ) : (\r\n                                        <Login\r\n                                            onSwitchToRegister={() => this.setState({ showRegister: true })}\r\n                                            onLoginSuccess={this.handleLoginSuccess}\r\n                                        />\r\n                                    )}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/register\">\r\n                                    {user ? (\r\n                                        <Redirect to=\"/decks\" />\r\n                                    ) : (\r\n                                        <Register\r\n                                            onSwitchToLogin={() => this.setState({ showRegister: false })}\r\n                                            onRegisterSuccess={this.handleLoginSuccess}\r\n                                        />\r\n                                    )}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/decks\">\r\n                                    {user ? <DeckList /> : <Redirect to=\"/login\" />}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/recommendations\">\r\n                                    {user ? <Recommendations /> : <Redirect to=\"/login\" />}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/users\">\r\n                                    <Redirect to=\"/admin\" />\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/decks/:deckId\">\r\n                                    {user ? <DeckDetail /> : <Redirect to=\"/login\" />}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/study/assigned\">\r\n                                    {user ? <StudySession assignedMode={true} /> : <Redirect to=\"/login\" />}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/study/:deckId\">\r\n                                    {user ? <StudySession /> : <Redirect to=\"/login\" />}\r\n                                </Route>\r\n\r\n                                <Route exact path=\"/\">\r\n                                    <Redirect to={user ? \"/decks\" : \"/login\"} />\r\n                                </Route>\r\n                            </Switch>\r\n                        </Layout>\r\n                    </Route>\r\n                </Switch>\r\n            </ThemeProvider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\n// Korean translations\r\nimport koCommon from './locales/ko/common.json';\r\nimport koAuth from './locales/ko/auth.json';\r\nimport koDeck from './locales/ko/deck.json';\r\nimport koStudy from './locales/ko/study.json';\r\nimport koAdmin from './locales/ko/admin.json';\r\n\r\n// English translations\r\nimport enCommon from './locales/en/common.json';\r\nimport enAuth from './locales/en/auth.json';\r\nimport enDeck from './locales/en/deck.json';\r\nimport enStudy from './locales/en/study.json';\r\nimport enAdmin from './locales/en/admin.json';\r\n\r\n// Indonesian translations\r\nimport idCommon from './locales/id/common.json';\r\nimport idAuth from './locales/id/auth.json';\r\nimport idDeck from './locales/id/deck.json';\r\nimport idStudy from './locales/id/study.json';\r\nimport idAdmin from './locales/id/admin.json';\r\n\r\nconst resources = {\r\n  ko: {\r\n    common: koCommon,\r\n    auth: koAuth,\r\n    deck: koDeck,\r\n    study: koStudy,\r\n    admin: koAdmin\r\n  },\r\n  en: {\r\n    common: enCommon,\r\n    auth: enAuth,\r\n    deck: enDeck,\r\n    study: enStudy,\r\n    admin: enAdmin\r\n  },\r\n  id: {\r\n    common: idCommon,\r\n    auth: idAuth,\r\n    deck: idDeck,\r\n    study: idStudy,\r\n    admin: idAdmin\r\n  }\r\n};\r\n\r\ni18n\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    resources,\r\n    fallbackLng: 'ko',\r\n    defaultNS: 'common',\r\n    ns: ['common', 'auth', 'deck', 'study', 'admin'],\r\n    interpolation: {\r\n      escapeValue: false\r\n    },\r\n    detection: {\r\n      order: ['localStorage', 'navigator'],\r\n      caches: ['localStorage'],\r\n      lookupLocalStorage: 'i18nextLng'\r\n    }\r\n  });\r\n\r\nexport default i18n;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './i18n';\r\n\r\nReactDOM.render(\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}